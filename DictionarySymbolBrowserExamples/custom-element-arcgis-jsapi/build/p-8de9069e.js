import"./p-476cf7c4.js";import{D as r,E as e,w as s,F as t,f as i,x as a,aI as n,K as o,L as l,p as u,y as c,d as p,U as d,Z as y}from"./p-ab028778.js";import{P as f}from"./p-c6c7c9c2.js";import{i as v}from"./p-77b9029e.js";import{c as m,n as h,e as B}from"./p-201a5204.js";import"./p-35f05b11.js";function P(r){return r.features.map((e=>{const s=c.fromJSON(r.spatialReference),t=n.fromJSON(e);return p(t.geometry).spatialReference=s,t}))}function g(r){return r.features.map((e=>(e.geometry.spatialReference=r.spatialReference,u(e.geometry))))}let A=class extends l{constructor(r){super(r),this.facilities=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.serviceAreaPolylines=null,this.serviceAreaPolygons=null}readFacilities(r){return g(r)}readPointBarriers(r,e){return g(e.barriers)}readPolylineBarriers(r){return g(r)}readPolygonBarriers(r){return g(r)}readIncidents(r,e){return P(e.saPolylines)}readServiceAreaPolygons(r,e){return P(e.saPolygons)}};r([e({type:[s]})],A.prototype,"facilities",void 0),r([t("facilities")],A.prototype,"readFacilities",null),r([e({type:[m]})],A.prototype,"messages",void 0),r([e({type:[s]})],A.prototype,"pointBarriers",void 0),r([t("pointBarriers",["barriers"])],A.prototype,"readPointBarriers",null),r([e({type:[i]})],A.prototype,"polylineBarriers",void 0),r([t("polylineBarriers")],A.prototype,"readPolylineBarriers",null),r([e({type:[a]})],A.prototype,"polygonBarriers",void 0),r([t("polygonBarriers")],A.prototype,"readPolygonBarriers",null),r([e({type:[n]})],A.prototype,"serviceAreaPolylines",void 0),r([t("serviceAreaPolylines",["saPolylines"])],A.prototype,"readIncidents",null),r([e({type:[n]})],A.prototype,"serviceAreaPolygons",void 0),r([t("serviceAreaPolygons",["saPolygons"])],A.prototype,"readServiceAreaPolygons",null),A=r([o("esri.tasks.support.ServiceAreaSolveResult")],A);var b=A;const S=B({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,defaultBreaks:!0,facilities:!0,outSpatialReference:{name:"outSR",getter:r=>r.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},travelMode:!0});let j=class extends(h(v)){constructor(r){super(r),this.url=null}solve(r,e){const s=[],t=[],i={},a={};return r.facilities&&r.facilities.features&&this._collectGeometries(r.facilities.features,t,"facilities.features",i),r.pointBarriers&&r.pointBarriers.features&&this._collectGeometries(r.pointBarriers.features,t,"pointBarriers.features",i),r.polylineBarriers&&r.polylineBarriers.features&&this._collectGeometries(r.polylineBarriers.features,t,"polylineBarriers.features",i),r.polygonBarriers&&r.polygonBarriers.features&&this._collectGeometries(r.polygonBarriers.features,t,"polygonBarriers.features",i),f(t).then((r=>{for(const e in i){const t=i[e];s.push(e),a[e]=r.slice(t[0],t[1])}return this._isInputGeometryZAware(a,s)?this.getServiceDescription():d({dontCheck:!0})})).then((t=>{("dontCheck"in t?t.dontCheck:t.hasZ)||this._dropZValuesOffInputGeometry(a,s);for(const e in a)a[e].forEach(((s,t)=>{r.get(e)[t].geometry=s}));let i={query:{...this.parsedUrl.query,f:"json",...S.toQueryParams(r)}};return(this.requestOptions||e)&&(i={...this.requestOptions,...e,...i}),y(`${this.parsedUrl.path}/solveServiceArea`,i)})).then((r=>b.fromJSON(r.data)))}_collectGeometries(r,e,s,t){t[s]=[e.length,e.length+r.length],r.forEach((r=>{e.push(r.geometry)}))}};r([e()],j.prototype,"url",void 0),j=r([o("esri.tasks.ServiceAreaTask")],j);var k=j;export default k;