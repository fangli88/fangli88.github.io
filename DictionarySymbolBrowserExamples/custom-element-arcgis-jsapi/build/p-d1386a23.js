import{l as t,aP as i,ay as s,aQ as e,aR as n,aS as r,aT as o,D as h,E as a,aU as c,K as l,W as u,aV as d}from"./p-dc4230e0.js";import{s as f,c as p}from"./p-a8d014d4.js";import{u as g}from"./p-365c5902.js";import{d as w,j as y}from"./p-76e49c46.js";function m(t){return function(i,s){i.hasOwnProperty("_messageBundleProps")||(i._messageBundleProps=i._messageBundleProps?i._messageBundleProps.slice():[]),i._messageBundleProps.push({bundlePath:t,propertyName:s})}}function v(t){return t.split(",").map((t=>t.trim()))}function b(t){const i="string"==typeof t?v(t):t;return function(t,s){t.hasOwnProperty("_renderableProps")||(t._renderableProps=t._renderableProps?t._renderableProps.slice():[]);const e=t._renderableProps;i?e.push.apply(e,function(t,i){return t.map((t=>function(t,i){return 0===t.indexOf(i)?t:`${i}.${t}`}(t,i)))}(i,s)):e.push(s)}}const $=t.getLogger("esri.widgets.Widget");let P=0;const _=f();let j=class extends(i(s.EventedAccessor)){constructor(t,i){super(t,i),this._attached=!1,this._internalHandles=new g,this._projector=_,this.domNode=null,this.iconClass="esri-icon-checkbox-unchecked",this.label=this.declaredClass.split(".").pop(),this.visible=!0,this._loadLocale=e((async()=>{this._messageBundleProps&&this._messageBundleProps.length&&await u(this._messageBundleProps.map((async({bundlePath:t,propertyName:i})=>{this[i]=await d(t)}))).then((t=>{for(const i of t)i.error&&$.error("widget-intl:locale-error",this.declaredClass,i.error)})),await this.loadLocale()}));const s="esri-widget-uid-"+Date.now().toString(16),n=this.render.bind(this);let r=!1;this.render=()=>{if(!r||this.destroyed)return null;const t=n();return t.properties?t.properties.key||(t.properties.key=s):t.properties={key:s},t},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then((()=>{r=!0,this._postInitialize()})))}normalizeCtorArgs(t,i){const s={...t};return i&&(s.container=i),s}postInitialize(){}beforeFirstRender(){return this._loadLocale().catch((t=>{if(!n(t))throw t}))}async loadLocale(){}destroy(){this.destroyed||(this.viewModel&&(this.viewModel.destroy(),this.viewModel=null),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null)}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return function(t){return"string"==typeof t?document.getElementById(t):t}(t)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+P++}set id(t){t&&this._set("id",t)}get renderable(){return this._resourcesFetch}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||this._projector.scheduleRender()}classes(...t){return p.apply(this,t)}own(t){arguments.length>1&&(t=Array.prototype.slice.call(arguments)),this._internalHandles.add(t)}renderNow(){this._projector.renderNow()}_postInitialize(){var t,i;this.destroyed||(null!=(t=this._renderableProps)&&t.length&&this._internalHandles.add(this._renderableProps.map((t=>w(this,t,(function(i,s){if(r.isCollection(s)&&this._internalHandles.remove(`${this.declaredClass}:${t}-collection-change-event-listener`),r.isCollection(i)){const s=i.on("change",(()=>this.scheduleRender()));this._internalHandles.add(s,`${this.declaredClass}:${t}-collection-change-event-listener`)}this.scheduleRender()}))))),null!=(i=this._delegatedEventNames)&&i.length&&this._internalHandles.add(w(this,"viewModel",((t,i)=>{i&&this._internalHandles.remove("delegated-events"),t&&this._internalHandles.add(this._delegatedEventNames.map((i=>t.on(i,(t=>{this.emit(i,t)})))),"delegated-events")}))),this.postInitialize(),this._internalHandles.add(o((async()=>{await this._loadLocale().catch((t=>{if(!n(t))throw t})),this.scheduleRender()}))),this._internalHandles.add(y(this,"container",(async t=>{this.destroyed||this._attach(t)}))))}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){t&&this._attached&&(this._projector.detach(this.render),t.parentNode&&t.parentNode.removeChild(t),this._attached=!1)}};h([a({value:null})],j.prototype,"container",null),h([c("container")],j.prototype,"castContainer",null),h([a({aliasOf:"container"})],j.prototype,"domNode",void 0),h([a()],j.prototype,"iconClass",void 0),h([a({dependsOn:["container"]})],j.prototype,"id",null),h([a()],j.prototype,"label",void 0),h([a()],j.prototype,"renderable",null),h([a()],j.prototype,"viewModel",void 0),h([a()],j.prototype,"visible",void 0),j=h([l("esri.widgets.Widget")],j);var C=j;function N(t){return t&&"function"==typeof t.render}function k(t){return t&&"function"==typeof t.postMixInProperties&&"function"==typeof t.buildRendering&&"function"==typeof t.postCreate&&"function"==typeof t.startup}export{C as H,N as a,m as e,v as n,b as o,k as r}