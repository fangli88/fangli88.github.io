import{D as e,E as r,K as i,L as t,bj as a,bk as n,bl as s,C as o,F as l,b9 as p,b as y,bm as u,bn as c,bo as d,bp as v,bq as S,m as g}from"./p-dc4230e0.js";import{m}from"./p-6e5ff36c.js";var w;let f=w=class extends t{async collectRequiredFields(e,r){return a(e,r,this.expression)}clone(){return new w({expression:this.expression,title:this.title})}};e([r({type:String,json:{write:!0}})],f.prototype,"expression",void 0),e([r({type:String,json:{write:!0}})],f.prototype,"title",void 0),f=w=e([i("esri.layers.support.FeatureExpressionInfo")],f);var b=f;const L=function(){const e=Object.keys(n);return e.sort(),e}();var I;const h=s()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),G=new o({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let T=I=class extends t{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,r){return null!=e?e:r.featureExpression&&0===r.featureExpression.value?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,r,i,t){r[i]=e.write(null,t),"0"===e.expression&&(r.featureExpression={value:0})}get mode(){return this._isOverridden("mode")?this._get("mode"):y(this.offset)||this.featureExpressionInfo?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,r){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,r):null}clone(){return new I({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}};e([r({type:b,json:{write:!0}})],T.prototype,"featureExpressionInfo",void 0),e([l("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],T.prototype,"readFeatureExpressionInfo",null),e([p("featureExpressionInfo",{featureExpressionInfo:{type:b},"featureExpression.value":{type:[0]}})],T.prototype,"writeFeatureExpressionInfo",null),e([r({type:h.apiValues,dependsOn:["offset","featureExpressionInfo"],nonNullable:!0,json:{type:h.jsonValues,read:h.read,write:{writer:h.write,isRequired:!0}}})],T.prototype,"mode",null),e([r({type:Number,json:{write:!0}})],T.prototype,"offset",void 0),e([r({type:L,json:{type:String,read:G.read,write:G.write}})],T.prototype,"unit",null),T=I=e([i("esri.layers.support.ElevationInfo")],T);var A=T;const M={type:Boolean,value:!0,json:{origins:{"web-scene":{read:{source:["id","url","layerType"],reader(e,r){if(null!=r.screenSizePerspective||"defaults"!==this.originOf("screenSizePerspectiveEnabled"))return r.screenSizePerspective;u(this).store.set("screenSizePerspectiveEnabled",!1,0)}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer(e,r,i,t){("defaults"===this.originOf("screenSizePerspectiveEnabled")&&e||c(this,"screenSizePerspectiveEnabled",{},t))&&(r[i]=e)}}}}}},E={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,r)=>!r.disablePopup},write:{enabled:!0,writer(e,r,i){r[i]=!e}}}},x={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},j={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:d}}},O={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},B={value:null,type:A,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function F(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const R={type:Number,json:{origins:{"web-document":{default:1,write:!0,read:!0},"portal-item":{write:!0}}}},V={...R,json:{...R.json,origins:{"web-document":{...R.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,r,i)=>i&&"service"!==i.origin||!r.drawingInfo||void 0===r.drawingInfo.transparency?r.layerDefinition&&r.layerDefinition.drawingInfo&&void 0!==r.layerDefinition.drawingInfo.transparency?v(r.layerDefinition.drawingInfo.transparency):void 0:v(r.drawingInfo.transparency)}}},W={type:m,dependsOn:["view.timeExtent","layer.timeExtent","layer.timeInfo","layer.timeOffset","layer.timeOffset.value","layer.timeOffset.unit","layer.useViewTime"],readOnly:!0,get(){var e,r;if(null==(e=this.layer)||!e.timeInfo)return null;const i=null==(r=this.view)?void 0:r.timeExtent,t=this.layer.timeExtent,a=this.layer.useViewTime?i&&t?i.intersection(t):i||t:t;if(!a||a.isEmpty)return a;const n=this.layer.timeOffset,s=n?a.offset(-n.value,n.unit):a,o=this._get("timeExtent");return s.equals(o)?o:s}},P={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,VectorTileLayer:!0,WMS:!0,KML:!0,RasterDataLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISFeatureLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0,CSV:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,VectorTileLayer:!0,WFS:!0,SubtypeGroupLayer:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}},q=t=>{let a=class extends t{constructor(){super(...arguments),this.title=null}writeListMode(e,r,i,t){(t&&"ground"===t.layerContainerType||e&&c(this,i,{},t))&&(r[i]=e)}writeOperationalLayerType(e,r,i,t){!e||t&&"tables"===t.layerContainerType||(r.layerType=e)}writeTitle(e,r){r.title=e||"Layer"}read(e,r){r&&(r.layer=this),S(this,e,(r=>super.read(e,r)),r)}write(e,r){if(r&&r.origin){const e=`${r.origin}/${r.layerContainerType||"operational-layers"}`,i=P[e];let t=i&&i[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(t=!1),!t)return r.messages&&r.messages.push(new g("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const i=super.write(e,{...r,layer:this}),t=!!r&&!!r.messages&&!!r.messages.filter((e=>e instanceof g&&"web-document-write:property-required"===e.name)).length;return!this.url&&t?null:i}beforeSave(){}};return e([r({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],a.prototype,"id",void 0),e([r({json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}})],a.prototype,"listMode",void 0),e([p("listMode")],a.prototype,"writeListMode",null),e([r({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],a.prototype,"operationalLayerType",void 0),e([p("operationalLayerType")],a.prototype,"writeOperationalLayerType",null),e([r(R)],a.prototype,"opacity",void 0),e([r({type:String,json:{write:{ignoreOrigin:!0,allowNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,allowNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],a.prototype,"title",void 0),e([p("title")],a.prototype,"writeTitle",null),e([r({type:Boolean,json:{name:"visibility",origins:{"web-document":{name:"visibility",default:!0},"portal-item":{name:"visibility",read:{source:["visible","visibility"]}}}}})],a.prototype,"visible",void 0),a=e([i("esri.layers.mixins.OperationalLayer")],a),a};export{x as a,E as b,O as c,B as d,F as f,q as l,W as m,j as p,M as s,A as x,V as y}