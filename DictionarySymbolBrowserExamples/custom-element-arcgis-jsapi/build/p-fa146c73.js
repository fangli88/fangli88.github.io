import{m as e,b as n,s as t,aK as r,ba as o}from"./p-dc4230e0.js";const i=new Set(["bing-maps","open-street-map","tile","unknown","unsupported","vector-tile","web-tile"]),a=new Set(["csv","feature","geo-rss","group","kml","tile","unknown","unsupported","vector-tile","web-tile"]);function l(e){return!("feature"!==e.type||e.url||!e.source||"memory"!==e.source.type)}function s(e,t){if(t.restrictedWebMapWriting){const r=function(e){return"basemap"===e.layerContainerType?i:"operational-layers"===e.layerContainerType?a:null}(t);return!n(r)||r.has(e.type)&&!l(e)}return!0}function u(i,a,u){if(!("write"in i)||!i.write)return u&&u.messages&&u.messages.push(new e("layer:unsupported",`Layers (${i.title}, ${i.id}) of type '${i.declaredClass}' cannot be persisted`,{layer:i})),null;if(s(i,u)){const e={};return i.write(e,u)?e:null}return n(a)&&function(e,n){if(function(e,n){if(l(e)){const t=r("featureCollection.layers",n),i=t&&t[0]&&t[0].layerDefinition;i&&("maxScale"in e&&(i.maxScale=o(e.maxScale)),"minScale"in e&&(i.minScale=o(e.minScale)))}else"group"!==e.type&&("maxScale"in e&&(n.maxScale=o(e.maxScale)),"minScale"in e&&(n.minScale=o(e.minScale)))}(e,n),"blendMode"in e&&(n.blendMode=e.blendMode,"normal"===n.blendMode&&delete n.blendMode),n.opacity=o(e.opacity),n.title=e.title||"Layer",n.visibility=e.visible,"legendEnabled"in e&&"wmts"!==e.type)if(l(e)){const t=n.featureCollection;t&&(t.showLegend=e.legendEnabled)}else n.showLegend=e.legendEnabled}(i,a=t(a)),a}export{u as d}