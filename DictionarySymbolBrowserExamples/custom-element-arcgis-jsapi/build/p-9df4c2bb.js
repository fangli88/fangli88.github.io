import"./p-476cf7c4.js";import{U as r,i as n,O as t}from"./p-dc4230e0.js";import{J as e,k as u,Z as i,F as o,E as f,aj as c,W as s}from"./p-aa6688d1.js";import"./p-7edcde15.js";import"./p-643e1e47.js";import"./p-66f366a9.js";import"./p-ebb65ba7.js";import"./p-78c83631.js";import"./p-43d5e67f.js";import"./p-7b4a37d3.js";import{WhereClause as a}from"./p-544c9aeb.js";import"./p-098cc742.js";function p(n,t,e,o,p,j){if(1===o.length){if(i(o[0]))return r(c(n,o[0],s(o[1],-1)));if(f(o[0]))return r(c(n,o[0].toArray(),s(o[1],-1)))}else if(2===o.length){if(i(o[0]))return r(c(n,o[0],s(o[1],-1)));if(f(o[0]))return r(c(n,o[0].toArray(),s(o[1],-1)));if(u(o[0]))return o[0].load().then((r=>m(a.create(o[1],r.getFieldsIndex()),j,p).then((r=>o[0].calculateStatistic(n,r,s(o[2],1e3),t.abortSignal)))))}else if(3===o.length&&u(o[0]))return o[0].load().then((r=>m(a.create(o[1],r.getFieldsIndex()),j,p).then((r=>o[0].calculateStatistic(n,r,s(o[2],1e3),t.abortSignal)))));return r(c(n,o,-1))}function m(e,u,i){try{const t=e.getVariables();if(t.length>0){const r=[];for(let n=0;n<t.length;n++)r.push(u.evaluateIdentifier(i,{name:t[n]}));return n(r).then((r=>{const n={};for(let e=0;e<t.length;e++)n[t[e]]=r[e];return e.parameters=n,e}))}return r(e)}catch(r){return t(r)}}function j(r){"async"===r.mode&&(r.functions.stdev=function(n,t){return r.standardFunctionAsync(n,t,(function(t,e,u){return p("stdev",t,0,u,n,r)}))},r.functions.variance=function(n,t){return r.standardFunctionAsync(n,t,(function(t,e,u){return p("variance",t,0,u,n,r)}))},r.functions.average=function(n,t){return r.standardFunctionAsync(n,t,(function(t,e,u){return p("mean",t,0,u,n,r)}))},r.functions.mean=function(n,t){return r.standardFunctionAsync(n,t,(function(t,e,u){return p("mean",t,0,u,n,r)}))},r.functions.sum=function(n,t){return r.standardFunctionAsync(n,t,(function(t,e,u){return p("sum",t,0,u,n,r)}))},r.functions.min=function(n,t){return r.standardFunctionAsync(n,t,(function(t,e,u){return p("min",t,0,u,n,r)}))},r.functions.max=function(n,t){return r.standardFunctionAsync(n,t,(function(t,e,u){return p("max",t,0,u,n,r)}))},r.functions.count=function(n,t){return r.standardFunctionAsync(n,t,(function(r,n,t){if(e(t,1,1),u(t[0]))return t[0].count(r.abortSignal);if(i(t[0])||o(t[0]))return t[0].length;if(f(t[0]))return t[0].length();throw new Error("Invalid Parameters for Count")}))})}export{j as registerFunctions}