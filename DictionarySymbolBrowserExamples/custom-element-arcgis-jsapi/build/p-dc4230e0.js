import{r as t,c as e,h as r}from"./p-476cf7c4.js";function n(t,e,r,n){var i,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}const i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0;var s,o;let l;var a,u;function c(t){return"function"==typeof l[t]?l[t]=l[t](i):l[t]}function h(t,e){if(t.forEach)t.forEach(e);else for(let r=0;r<t.length;r++)e(t[r],r,t)}function d(t,e,r){if(t.slice)return t.slice(e,r);void 0===e?e=0:(e<0&&(e+=t.length),e=Math.min(t.length,Math.max(0,e))),void 0===r?r=t.length:(r<0&&(r+=t.length),r=Math.min(t.length,Math.max(0,r)));const n=Math.max(0,r-e),i=new t.constructor(n);for(let r=0;r<n;r++)i[r]=t[e+r];return i}function f(t){return t instanceof ArrayBuffer||t&&t.constructor&&"ArrayBuffer"===t.constructor.name}function p(t){return t instanceof Uint8Array||t&&t.constructor&&"Uint8Array"===t.constructor.name}function y(t){return t instanceof Uint16Array||t&&t.constructor&&"Uint16Array"===t.constructor.name}function m(t){return t instanceof Uint32Array||t&&t.constructor&&"Uint32Array"===t.constructor.name}function v(t,e){let r;if(e)for(r in t)t.hasOwnProperty(r)&&(void 0===t[r]?delete t[r]:t[r]instanceof Object&&v(t[r],!0));else for(r in t)t.hasOwnProperty(r)&&void 0===t[r]&&delete t[r];return t}function w(t){if(!t||"object"!=typeof t||"function"==typeof t)return t;if(function(t){return t instanceof Int8Array||t&&t.constructor&&"Int8Array"===t.constructor.name}(t)||p(t)||function(t){return t instanceof Uint8ClampedArray||t&&t.constructor&&"Uint8ClampedArray"===t.constructor.name}(t)||function(t){return t instanceof Int16Array||t&&t.constructor&&"Int16Array"===t.constructor.name}(t)||y(t)||function(t){return t instanceof Int32Array||t&&t.constructor&&"Int32Array"===t.constructor.name}(t)||m(t)||function(t){return t instanceof Float32Array||t&&t.constructor&&"Float32Array"===t.constructor.name}(t)||function(t){return t instanceof Float64Array||t&&t.constructor&&"Float64Array"===t.constructor.name}(t))return d(t);if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;return t.forEach(((t,r)=>{e.set(r,w(t))})),e}if(t instanceof Set){const e=new Set;return t.forEach((t=>{e.add(w(t))})),e}let e;const r=t;return e="function"==typeof r.clone?r.clone():"function"==typeof r.map&&"function"==typeof r.forEach?r.map(w):"function"==typeof r.notifyChange&&"function"==typeof r.watch?r.clone():S({},t,w),e}function b(t,e){return t===e||"number"==typeof t&&isNaN(t)&&"number"==typeof e&&isNaN(e)||"function"==typeof(t||{}).getTime&&"function"==typeof(e||{}).getTime&&t.getTime()===e.getTime()||!1}function g(t={},...e){for(const r of e)S(t,r);return t}function S(t,e,r){let n,i;const s={};for(n in e){i=e[n];const o=!(n in s)||s[n]!==i;(!(n in t)||t[n]!==i&&o)&&(t[n]=r?r(i):i)}return t}function x(t){return null!=t}function M(t){return null==t}function j(t){return void 0===t}function O(t,e){return x(t)?e(t):null}function k(t){return t}function I(t,e){return x(t)?t:"function"==typeof e?e():e}function A(t){return x(t)&&t.remove(),null}function C(){return null}function T(t,e){const r=new Array;for(const n of t)r.push(P(n,null,e));return r}function N(t,e){for(const r of t)P(r,null,e)}function P(t,e,r){return x(t)?r(t):e}function _(t,e){return x(t)?e(t):null}function E(t,...e){let r=t,n=0;for(;n<e.length&&r;)r=r[e[n++]];return r}function $(t){return t}function D(t,e,r=!1){return U(t,e,r)}function R(t,e){if(null!=e)return e[t]||F(t.split("."),!1,e)}function z(t,e,r){const n=t.split("."),i=n.pop(),s=F(n,!0,r);s&&i&&(s[i]=e)}function F(t,e,r){let n=r;for(const r of t){if(null==n)return;if(!(r in n)){if(!e)return;n[r]={}}n=n[r]}return n}function U(t,e,r){return e?Object.keys(e).reduce((function(t,n){let i=t[n],s=e[n];return i===s?t:void 0===i?(t[n]=w(s),t):(Array.isArray(s)||Array.isArray(t)?(i=t[n]=i?Array.isArray(i)?i.concat():[i]:[],s&&(Array.isArray(s)||(s=[s]),r?s.forEach((t=>{-1===i.indexOf(t)&&i.push(t)})):t[n]=s.concat())):s&&"object"==typeof s?t[n]=U(i,s,r):t.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(t[n]=s),t)}),t||{}):t}l=null!=(s=i.dojoConfig)&&s.has||null!=(o=i.esriConfig)&&o.has?{...null==(a=i.dojoConfig)?void 0:a.has,...null==(u=i.esriConfig)?void 0:u.has}:{},c.add=(t,e,r,n)=>((n||void 0===l[t])&&(l[t]=e),r&&c(t)),c.cache=l,c.add("esri-deprecation-warnings",!0),c.add("esri-featurelayer-webgl",!0),c.add("esri-featurelayer-webgl-labeling",!0),(()=>{c.add("host-webworker",void 0!==i.WorkerGlobalScope&&self instanceof i.WorkerGlobalScope);const t="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(c.add("host-browser",t),c.add("host-node","object"==typeof i.process&&i.process.versions&&i.process.versions.node&&i.process.versions.v8),c.add("dom",t),c("host-browser")){const t=navigator,e=t.userAgent,r=t.appVersion,n=parseFloat(r);if(c.add("wp",parseFloat(e.split("Windows Phone")[1])||void 0),c.add("msapp",parseFloat(e.split("MSAppHost/")[1])||void 0),c.add("khtml",r.indexOf("Konqueror")>=0?n:void 0),c.add("edge",parseFloat(e.split("Edge/")[1])||void 0),c.add("opr",parseFloat(e.split("OPR/")[1])||void 0),c.add("webkit",!c("wp")&&!c("edge")&&parseFloat(e.split("WebKit/")[1])||void 0),c.add("chrome",!c("edge")&&!c("opr")&&parseFloat(e.split("Chrome/")[1])||void 0),c.add("android",!c("wp")&&parseFloat(e.split("Android ")[1])||void 0),c.add("safari",!(r.indexOf("Safari")>=0)||c("wp")||c("chrome")||c("android")||c("edge")||c("opr")?void 0:parseFloat(r.split("Version/")[1])),c.add("mac",r.indexOf("Macintosh")>=0),c.add("quirks","BackCompat"===document.compatMode),!c("wp")&&e.match(/(iPhone|iPod|iPad)/)){const t=RegExp.$1.replace(/P/,"p"),r=e.match(/OS ([\d_]+)/)?RegExp.$1:"1",n=parseFloat(r.replace(/_/,".").replace(/_/g,""));c.add(t,n),c.add("ios",n)}c.add("trident",parseFloat(r.split("Trident/")[1])||void 0),c.add("svg","undefined"!=typeof SVGAngle),c("webkit")||(e.indexOf("Opera")>=0&&c.add("opera",n>=9.8&&parseFloat(e.split("Version/")[1])||n),!(e.indexOf("Gecko")>=0)||c("wp")||c("khtml")||c("trident")||c("edge")||c.add("mozilla",n),c("mozilla")&&c.add("ff",parseFloat(e.split("Firefox/")[1]||e.split("Minefield/")[1])||void 0))}})(),(()=>{if(i.navigator){const t=navigator.userAgent,e=t.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),r=t.match(/iPhone/i);e&&c.add("esri-mobile",e),r&&c.add("esri-iPhone",r),c.add("esri-geolocation",!!navigator.geolocation)}c.add("esri-canvas-svg-support",!c("trident")),c.add("esri-secure-context",(()=>"isSecureContext"in i?i.isSecureContext:i.location&&i.location.origin?0===i.location.origin.indexOf("https:"):void 0)),c.add("esri-wasm","WebAssembly"in i),c.add("esri-shared-array-buffer",(()=>"SharedArrayBuffer"in i&&!(!1===i.crossOriginIsolated))),c.add("esri-atomics","Atomics"in i),c.add("esri-workers","Worker"in i),c.add("esri-text-decoder","TextDecoder"in i),c.add("esri-text-encoder","TextEncoder"in i),c.add("featurelayer-advanced-symbols",!1),c.add("featurelayer-pbf",!0),c.add("featurelayer-pbf-statistics",!1),c.add("feature-layers-workers",!0),c.add("mapview-transitions-duration",200),c("host-webworker")||c("host-browser")&&(c.add("csp-restrictions",(()=>{try{new Function}catch{return!0}return!1})),c.add("esri-image-decode",(()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then((()=>{c.add("esri-image-decode",!0,!0,!0)})).catch((()=>{c.add("esri-image-decode",!1,!0,!0)}))}return!1})),c.add("esri-url-encodes-apostrophe",(()=>{const t=i.document.createElement("a");return t.href="?'",t.href.indexOf("?%27")>-1})),c.add("vectortilelayer-max-buffers",(()=>c("ff")?160:Number.POSITIVE_INFINITY)))})();const L=/\{([^\}]+)\}/g;function V(t){return null==t?"":t}function G(t,e){return t.replace(L,"object"==typeof e?(t,r)=>V(R(r,e)):(t,r)=>V(e(r)))}function q(t,e){return t.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,(t=>e&&-1!==e.indexOf(t)?t:`\\${t}`))}function B(t){let e=0;for(let r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r),e|=0;return e}const W={apiKey:void 0,applicationUrl:i.location&&i.location.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};i.esriConfig&&(D(W,i.esriConfig,!0),delete W.has),W.assetsPath||(W.assetsPath="./assets"),W.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(W,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),W.request.corsEnabledServers=[],W.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};const H={info:0,warn:1,error:2,none:3};class J{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=t.level&&(this.level=t.level),null!=t.writer&&(this.writer=t.writer),this._module=t.module,J._loggers[this.module]=this;const e=this.module.lastIndexOf(".");-1!==e&&(this._parent=J.getLogger(this.module.slice(0,e)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}static get test(){return{resetLoggers(t={}){const e=J._loggers;return J._loggers=t,e},set throttlingDisabled(t){J._throttlingDisabled=t}}}static getLogger(t){let e=J._loggers[t];return e||(e=new J({module:t})),e}_log(t,e,...r){if(this._matchLevel(t)){if("always"!==e&&!J._throttlingDisabled){const n=this._argsToKey(r),i=this._loggedMessages[t].get(n);if("once"===e&&null!=i||"oncePerTick"===e&&i&&i>=J._tickCounter)return;this._loggedMessages[t].set(n,J._tickCounter),J._scheduleTickCounterIncrement()}for(const e of W.log.interceptors)if(e(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,e){let r=this;for(;x(r);){const e=r[t];if(x(e))return e;r=r.parent}return e}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,e,...r){console[t](`[${e}]`,...r)}_matchLevel(t){return H[this._parentWithMember("level",W.log.level?W.log.level:"warn")]<=H[t]}_argsToKey(...t){return B(JSON.stringify(t,((t,e)=>"object"!=typeof e||Array.isArray(e)?e:"[Object]")))}static _scheduleTickCounterIncrement(){J._tickCounterScheduled||(J._tickCounterScheduled=!0,Promise.resolve().then((()=>{J._tickCounter++,J._tickCounterScheduled=!1})))}}J._loggers={},J._tickCounter=0,J._tickCounterScheduled=!1,J._throttlingDisabled=!1;const Y=J.getLogger("esri.core.Accessor");function Q(t){return null==t?t:new Date(t)}function Z(t){return null==t?t:!!t}function K(t){return null==t?t:t.toString()}function X(t){return null==t?t:(t=parseFloat(t),isNaN(t)?0:t)}function tt(t){return null==t?t:Math.round(parseFloat(t))}function et(t){return t&&t.constructor&&void 0!==t.constructor.__accessorMetadata__}function rt(t,e){return null!=e&&t&&!(e instanceof t)}function nt(t){return t&&"isCollection"in t}function it(t){return t&&t.Type?"function"==typeof t.Type?t.Type:t.Type.base:null}function st(t,e){return!!et(e)&&(Y.error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+lt(t)+"'"),!0)}function ot(t,e){return null==e?e:nt(t)?function(t,e){if(!e||!e.constructor||!nt(e.constructor))return st(t,e)?e:new t(e);const r=it(t.prototype.itemType),n=it(e.constructor.prototype.itemType);return r?n?r===n?e:r.prototype.isPrototypeOf(n.prototype)?new t(e):(st(t,e),e):new t(e):e}(t,e):rt(t,e)?st(t,e)?e:new t(e):e}function lt(t){return t&&t.prototype&&t.prototype.declaredClass||"unknown"}function at(t){switch(t){case Number:return X;case mt:return tt;case Boolean:return Z;case String:return K;case Date:return Q;default:return ot.bind(null,t)}}function ut(t,e){const r=at(t);return 1===arguments.length?r:r(e)}function ct(t,e,r){return 1===arguments.length?ct.bind(null,t):e?Array.isArray(e)?e.map((e=>t(e,r))):[t(e,r)]:e}function ht(t,e,r){return 0!==e&&Array.isArray(r)?r.map((r=>ht(t,e-1,r))):t(r)}function dt(t,e,r){if(2===arguments.length)return dt.bind(null,t,e);if(!r)return r;let n=e,i=r=ht(t,e,r);for(;n>0&&Array.isArray(i);)n--,i=i[0];if(void 0!==i)for(let t=0;t<n;t++)r=[r];return r}function ft(t){return!!Array.isArray(t)&&!t.some((e=>{const r=typeof e;return!("string"===r||"number"===r||"function"===r&&t.length>1)}))}function pt(t,e){if(2===arguments.length)return pt(t).call(null,e);const r=new Set,n=t.filter((t=>"function"!=typeof t)),i=t.filter((t=>"function"==typeof t));for(const e of t)"string"!=typeof e&&"number"!=typeof e||r.add(e);let s=null,o=null;return(t,e)=>{if(null==t)return t;const l=typeof t,a="string"===l||"number"===l;return a&&(r.has(t)||i.some((t=>"string"===l&&t===String||"number"===l&&t===Number)))||"object"===l&&i.some((e=>!rt(t,e)))?t:(a&&n.length?(s||(s=n.map((t=>"string"==typeof t?`'${t}'`:`${t}`)).join(", ")),Y.error("Accessor#set",`'${t}' is not a valid value for this property, only the following values are valid: ${s}`)):"object"==typeof t&&i.length?(o||(o=i.map((t=>lt(t))).join(", ")),Y.error("Accessor#set",`'${t}' is not a valid value for this property, value must be one of ${o}`)):Y.error("Accessor#set",`'${t}' is not a valid value for this property`),e&&(e.valid=!1),null)}}function yt(t,e){if(2===arguments.length)return yt(t).call(null,e);const r={},n=[],i=[];for(const e in t.typeMap){const s=t.typeMap[e];r[e]=ut(s),n.push(lt(s)),i.push(e)}const s=()=>`'${n.join("', '")}'`,o=()=>`'${i.join("', '")}'`,l="string"==typeof t.key?e=>e[t.key]:t.key;return e=>{if(t.base&&!rt(t.base,e))return e;if(null==e)return e;const n=l(e)||t.defaultKeyValue,i=r[n];if(!i)return Y.error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!rt(t.typeMap[n],e))return e;if("string"==typeof t.key&&!et(e)){const r={};for(const n in e)n!==t.key&&(r[n]=e[n]);return i(r)}return i(e)}}class mt{}const vt={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function wt(t){switch(t.type){case"native":return ut(t.value);case"array":return ct(wt(t.value));case"one-of":return function(t){let e=null;return(r,n)=>gt(r,t)?r:(null==e&&(e=bt(t)),Y.error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),n&&(n.valid=!1),null)}(t);default:return null}}function bt(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case mt:return"integer";case Date:return"date";default:return lt(t.value)}case"array":return`array of ${bt(t.value)}`;case"one-of":{const e=t.values.map((t=>bt(t)));return`one of ${e.slice(0,e.length-1)} or ${e[e.length-1]}`}}return"unknown"}function gt(t,e){if(null==t)return!0;switch(e.type){case"native":switch(e.value){case Number:case mt:return"number"==typeof t;case Boolean:return"boolean"==typeof t;case String:return"string"==typeof t}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some((t=>!gt(t,e.value)));case"one-of":return e.values.some((e=>gt(t,e)))}}function St(t){return function(t){return{remove:()=>{t&&(t(),t=void 0)}}}((()=>t.forEach((t=>x(t)&&t.remove()))))}function xt(t){return t?t.__accessor__?t.__accessor__:t.propertyInvalidated?t:null:null}function Mt(t,e,r){return jt(t,e,r?{policy:r,path:""}:null)}function jt(t,e,r){return e?Object.keys(e).reduce((function(t,n){let i=null,s="merge";if(r&&(i=r.path?`${r.path}.${n}`:n,s=r.policy(i)),"replace"===s)return t[n]=e[n],t;if(void 0===t[n])return t[n]=w(e[n]),t;let o=t[n],l=e[n];if(o===l)return t;if(Array.isArray(l)||Array.isArray(t))o=t[n]=o?Array.isArray(o)?o.concat():[o]:[],l&&(Array.isArray(l)||(l=[l]),l.forEach((t=>{-1===o.indexOf(t)&&o.push(t)})));else if(l&&"object"==typeof l)if(r){const e=r.path;r.path=i,t[n]=jt(o,l,r),r.path=e}else t[n]=jt(o,l,null);else t.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(t[n]=l);return t}),t||{}):t}function Ot(t){return Array.isArray(t)?t:t.split(".")}function kt(t){return t.indexOf(",")>-1?t.split(",").map((t=>t.trim())):[t.trim()]}function It(t,e,r,n){const i=function(t){if(Array.isArray(t)){const e=[];for(const r of t)e.push(...kt(r));return e}return kt(t)}(e);return 1!==i.length?St(i.map((e=>n(t,e,r)))):n(t,i[0],r)}function At(t){let e=!1;return()=>{e||(e=!0,t())}}function Ct(t,e){const r="?"===t[t.length-1]?t.slice(0,-1):t;if(null!=e.getItemAt||Array.isArray(e)){const t=parseInt(r,10);if(!isNaN(t))return Array.isArray(e)?e[t]:e.getItemAt(t)}const n=xt(e);return function(t,e){return null!=t&&t.metadatas&&null!=t.metadatas[e]}(n,r)?n.get(r):e[r]}function Tt(t,e,r){if(null==t)return t;const n=Ct(e[r],t);return!n&&r<e.length-1?void 0:r===e.length-1?n:Tt(n,e,r+1)}function Nt(t,e,r=0){return"string"==typeof e&&-1===e.indexOf(".")?Ct(e,t):Tt(t,Ot(e),r)}function Pt(t,e){return Nt(t,e)}function _t(t,e){return void 0!==Nt(e,t)}class Et{constructor(t){this.autoDestroy=!1,this.properties=t}}function $t(t){let e=t.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!r){const r=Object.create(e.properties),n=e.autoDestroy;for(const t in r)r[t]=w(r[t]);e=new Et(r),e.autoDestroy=n,Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e=new Et({}),Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function Dt(t,e){const r=function(t){return $t(t).properties}(t);let n=r[e];return n||(n=r[e]={}),n}const Rt=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function zt(t){return Rt.test(t)?"replace":"merge"}function Ft(t,e,r){if(t&&e)if("object"==typeof e)for(const r of Object.getOwnPropertyNames(e))Ft(t,r,e[r]);else{if(-1!==e.indexOf(".")){const n=e.split("."),i=n.splice(n.length-1,1)[0];return void Ft(Pt(t,n),i,r)}t[e]=r}}J.getLogger("esri.core.accessorSupport.set");const Ut=J.getLogger("esri.core.accessorSupport.decorators.property");function Lt(t={}){return(e,r,n)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${r}. Accessor does not support static properties.`);const i=Dt(e,r);n&&(n.get||n.set?(i.get=n.get||i.get,i.set=n.set||i.set):"value"in n&&("value"in t&&Ut.warn(`@property() will redefine the value of "${r}" on "${e.constructor.name}" already defined in the metadata`,t),i.value=t.value=n.value)),null!=t.readOnly&&(i.readOnly=t.readOnly);const{aliasOf:s}=t;if(s){const t="string"==typeof s?s:s.source,e="string"==typeof s?null:!0===s.overridable;let n;i.dependsOn=[t],i.get=function(){let e=Pt(this,t);if("function"==typeof e){n||(n=t.split(".").slice(0,-1).join("."));const r=Pt(this,n);r&&(e=e.bind(r))}return e},i.readOnly||(i.set=e?function(t){void 0!==t?this._override(r,t):this._clearOverride(r)}:function(e){Ft(this,t,e)})}const o=t.type,l=t.types;i.cast||(o?i.cast=function(t){let e=0,r=t;if(function(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}(t))return wt(t);for(;Array.isArray(r)&&1===r.length&&"string"!=typeof r[0]&&"number"!=typeof r[0];)r=r[0],e++;const n=r;return ft(n)?0===e?pt(n):dt(pt(n),e):1===e?function(t,e){return 1===arguments.length?ct(ut.bind(null,t)):ct(ut.bind(null,t),e)}(n):e>1?function(t,e,r){return 2===arguments.length?dt(ut.bind(null,t),e):dt(ut.bind(null,t),e,r)}(n,e):t.from?t.from:ut(t)}(o):l&&(i.cast=Array.isArray(l)?ct(yt(l[0])):yt(l))),t.range&&(i.cast=Gt(i.cast,t.range)),function(t,e){Mt(t,e,zt)}(i,t)}}function Vt(t,e,r){const n=Dt(t,r);n.json||(n.json={});let i=n.json;return void 0!==e&&(i.origins||(i.origins={}),i.origins[e]||(i.origins[e]={}),i=i.origins[e]),i}function Gt(t,e){return r=>{let n=+t(r);return null!=e.step&&(n=Math.round(n/e.step)*e.step),null!=e.min&&(n=Math.max(e.min,n)),null!=e.max&&(n=Math.min(e.max,n)),n}}class qt{constructor(t,e,r){var n;this.name=t,this.details=r,this.message=void 0,this instanceof qt&&(this.message=e&&(n=r,e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(function(t,e){if(""===e)return"$";const r=R(e,n),i=null==r?"":r;if(void 0===i)throw new Error(`could not find key "${e}" in template`);return i.toString()})))||"")}toString(){return"["+this.name+"]: "+this.message}}class Bt extends qt{constructor(t,e,r){if(super(t,e,r),!(this instanceof Bt))return new Bt(t,e,r)}}function Wt(t){return!!t&&t.prototype&&t.prototype.declaredClass&&0===t.prototype.declaredClass.indexOf("esri.core.Collection")}Bt.prototype.type="warning";const Ht=J.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function Jt(t,e,r){var n,i;t&&(!r&&!e.read||null!=(n=e.read)&&n.reader||!1===(null==(i=e.read)?void 0:i.enabled)||function(t){return"types"in t?ee(t.types):te(t.type)}(t)&&z("read.reader",Yt(t),e))}function Yt(t){var e;const r=null!=(e=t.ndimArray)?e:0;if(r>1)return function(t){var e;const r=Qt(t),n=Zt.bind(null,r),i=null!=(e=t.ndimArray)?e:0;return(t,e,r)=>{if(null==t)return t;t=n(t,r,i);let s=i,o=t;for(;s>0&&Array.isArray(o);)s--,o=o[0];if(void 0!==o)for(let e=0;e<s;e++)t=[t];return t}}(t);if(1===r)return Kt(t);if("type"in t&&Xt(t.type)){var n,i;const e=null==(n=t.type.prototype)||null==(i=n.itemType)?void 0:i.Type,r=Kt("function"==typeof e?{type:e}:{types:e});return(e,n,i)=>{const s=r(e,n,i);return s?new t.type(s):s}}return Qt(t)}function Qt(t){return"type"in t?function(t){return t.prototype.read?(e,r,n)=>{if(null==e)return e;const i=typeof e;if("object"!==i)return void Ht.error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${i}'`);const s=new t;return s.read(e,n),s}:t.fromJSON}(t.type):function(t){var e;let r=null;const n=null!=(e=t.errorContext)?e:"type";return(e,i,s)=>{if(null==e)return e;const o=typeof e;if("object"!==o)return void Ht.error(`Expected JSON value of type 'object' to deserialize, but got '${o}'`);r||(r=function(t){const e={};for(const i in t.typeMap){var r,n;const s=t.typeMap[i],o=$t(s.prototype);if("function"==typeof t.key)continue;const l=o.properties[t.key];if(!l)continue;null!=(r=l.json)&&r.type&&Array.isArray(l.json.type)&&1===l.json.type.length&&"string"==typeof l.json.type[0]&&(e[l.json.type[0]]=s);const a=null==(n=l.json)?void 0:n.write;if(!a||!a.writer){e[i]=s;continue}const u=a.target,c="string"==typeof u?u:t.key,h={};a.writer(i,h,c),h[c]&&(e[h[c]]=s)}return e}(t));const l=t.key;if("string"!=typeof l)return;const a=e[l],u=a?r[a]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!u){const t=`Type '${a||"unknown"}' is not supported`;return s&&s.messages&&e&&s.messages.push(new Bt(`${n}:unsupported`,t,{definition:e,context:s})),void Ht.error(t)}const c=new u;return c.read(e,s),c}}(t.types)}function Zt(t,e,r,n){return 0!==n&&Array.isArray(e)?e.map((e=>Zt(t,e,r,n-1))):t(e,void 0,r)}function Kt(t){const e=Qt(t);return(t,r,n)=>{if(null==t)return t;if(Array.isArray(t)){const r=[];for(const i of t){const t=e(i,void 0,n);void 0!==t&&r.push(t)}return r}const i=e(t,void 0,n);return void 0!==i?[i]:void 0}}function Xt(t){if(!Wt(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&("function"==typeof e.Type?te(e.Type):ee(e.Type))}function te(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||Xt(t))}function ee(t){for(const e in t.typeMap)if(!te(t.typeMap[e]))return!1;return!0}function re(t){t.name&&(t.read&&"object"==typeof t.read?void 0===t.read.source&&(t.read.source=t.name):t.read={source:t.name},t.write&&"object"==typeof t.write?void 0===t.write.target&&(t.write.target=t.name):t.write={target:t.name})}function ne(t){"boolean"==typeof t.read?t.read={enabled:t.read}:"function"==typeof t.read?t.read={enabled:!0,reader:t.read}:t.read&&"object"==typeof t.read&&void 0===t.read.enabled&&(t.read.enabled=!0)}function ie(t){"boolean"==typeof t.write?t.write={enabled:t.write}:"function"==typeof t.write?t.write={enabled:!0,writer:t.write}:t.write&&"object"==typeof t.write&&void 0===t.write.enabled&&(t.write.enabled=!0)}function se(t,e){var r;if(!e.write||e.write.writer||!1===e.write.enabled&&!e.write.overridePolicy)return;const n=null!=(r=null==t?void 0:t.ndimArray)?r:0;var i;e.write.writer=t&&(1===n||"type"in t&&Wt(t.type))?ue:n>1?(i=n,function(t,e,r,n){let s;if(null===t)s=null;else{s=ce(t,n,i);let e=i,r=s;for(;e>0&&Array.isArray(r);)e--,r=r[0];if(void 0!==r)for(let t=0;t<e;t++)s=[s]}z(r,s,e)}):oe}function oe(t,e,r,n){z(r,le(t,n),e)}function le(t,e){return t&&"function"==typeof t.write?t.write({},e):t&&"function"==typeof t.toJSON?t.toJSON():"number"==typeof t?ae(t):t}function ae(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function ue(t,e,r,n){let i;null===t?i=null:t&&"function"==typeof t.map?(i=t.map((t=>le(t,n))),"function"==typeof i.toArray&&(i=i.toArray())):i=[le(t,n)],z(r,i,e)}function ce(t,e,r){return 0!==r&&Array.isArray(t)?t.map((t=>ce(t,e,r-1))):le(t,e)}function he(t,e){return fe(t,"read",e)}function de(t,e){return fe(t,"write",e)}function fe(t,e,r){let n=t&&t.json;if(t&&t.json&&t.json.origins&&r){const i=t.json.origins[r.origin];i&&("any"===e||e in i)&&(n=i)}return n}const pe=[{processPrototypePropertyMetadata(t,e){(function(t){if(t.json||(t.json={}),ne(t.json),ie(t.json),re(t.json),t.json.origins)for(const e in t.json.origins)ne(t.json.origins[e]),ie(t.json.origins[e]),re(t.json.origins[e]);return!0})(e)&&(function(t){if(t.json&&t.json.origins){const e=t.json.origins,r={"web-document":["web-scene","web-map"]};for(const t in r)if(e[t]){const n=e[t];r[t].forEach((t=>{e[t]=n})),delete e[t]}}}(e),function(t){const e=function(t){return t.type?function(t){if(!t.type)return;let e=0,r=t.type;for(;Array.isArray(r)&&!ft(r);)r=r[0],e++;return{type:r,ndimArray:e}}(t):function(t){if(!t.types)return;let e=0,r=t.types;for(;Array.isArray(r);)r=r[0],e++;return{types:r,ndimArray:e}}(t)}(t);if(t.json.origins)for(const r in t.json.origins){const n=t.json.origins[r];Jt(e,n,!1),se(e,n)}Jt(e,t.json,!0),se(e,t.json)}(e))}}],ye=new Set,me=new Set;function ve(t){return e=>{e.prototype.declaredClass=t,function(t,e){for(const r of pe)if(r.processPrototypePropertyMetadata)for(const n in t)r.processPrototypePropertyMetadata(n,t[n],t,e)}($t(e.prototype).properties,t),function(t){const e=t.prototype,r=e.declaredClass,n=$t(e).properties;!function(t,e){for(const r of pe)if(r.processClassPropertyMetadata)for(const n in t)r.processClassPropertyMetadata(n,t[n],t,e)}(n,r);const i={};for(const t of Object.getOwnPropertyNames(n)){const e=n[t];i[t]={enumerable:!0,configurable:!0,get:we(t,e),set(r){const n=this.__accessor__;if(void 0!==n){if(!Object.isFrozen(this)){if(n.initialized&&e.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${t}' of ${this.declaredClass}`);if(2===n.lifecycle&&e.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${t}' of ${this.declaredClass}`);n.set(t,r)}}else Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:r})}}}Object.defineProperties(t.prototype,i)}(e);const r=[],n=[];let i=e.prototype;for(;i;)i.hasOwnProperty("initialize")&&!ye.has(i.initialize)&&(ye.add(i.initialize),r.push(i.initialize)),i.hasOwnProperty("destroy")&&!me.has(i.destroy)&&(me.add(i.destroy),n.push(i.destroy)),i=Object.getPrototypeOf(i);ye.clear(),me.clear();class s extends e{constructor(...t){if(super(...t),this.constructor===s&&"function"==typeof this.postscript){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let t=r.length-1;t>=0;t--)r[t].call(this)}}),n.length){let t=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!t){t=!0;for(let t=0;t<n.length;t++)n[t].call(this)}}})}this.postscript(...t)}}}return s.__accessorMetadata__=$t(e.prototype),s.prototype.declaredClass=t,s}}function we(t,e){return null==e.get?function(){return this.__accessor__.getterStatic(t)}:function(){return this.__accessor__.getterComputed(t)}}function be(t,e,r){let n,i;return void 0===e?(i=t,n=[void 0]):"string"!=typeof e?(i=t,n=[void 0],r=e):(i=e,n=Array.isArray(t)?t:[t]),(t,e)=>{const s=t.constructor.prototype;n.forEach((n=>{const o=Vt(t,n,i);o.write&&"object"!=typeof o.write&&(o.write={}),r&&z("write.target",r,o),z("write.writer",s[e],o)}))}}class ge extends qt{constructor(t,e,r){if(super(t,e,r),!(this instanceof ge))return new ge(t,e,r)}toJSON(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((t,e)=>{if(e&&"object"==typeof e&&"function"==typeof e.toJSON)return e;try{return w(e)}catch(t){return"[object]"}})))}}catch(t){throw J.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new ge(t.name,t.message,t.details)}}ge.prototype.type="error";const Se=J.getLogger("esri.core.urlUtils"),xe=W.request,Me="esri/config: esriConfig.request.proxyUrl is not set.",je=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,Oe=/^\s*http:/i,ke=/^\s*https:/i,Ie=/^\s*file:/i,Ae=/:\d+$/,Ce=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,Te=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),Ne=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class Pe{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let e=this.uri.match(Te);this.scheme=e[2]||(e[1]?"":null),this.authority=e[4]||(e[3]?"":null),this.path=e[5],this.query=e[7]||(e[6]?"":null),this.fragment=e[9]||(e[8]?"":null),null!=this.authority&&(e=this.authority.match(Ne),this.user=e[3]||null,this.password=e[4]||null,this.host=e[6]||e[7],this.port=e[9]||null)}toString(){return this.uri}}const _e=new Pe(W.applicationUrl),Ee={},$e=(()=>{const t=_e.path,e=t.substring(0,t.lastIndexOf(t.split("/")[t.split("/").length-1]));return`${_e.scheme}://${_e.host}${null!=_e.port?`:${_e.port}`:""}${e}`})();function De(t){const e={path:null,query:null},r=new Pe(t),n=t.indexOf("?");return null===r.query?e.path=t:(e.path=t.substring(0,n),e.query=Re(r.query)),r.fragment&&(e.hash=r.fragment,null===r.query&&(e.path=e.path.substring(0,e.path.length-(r.fragment.length+1)))),e}function Re(t){const e=t.split("&"),r={};for(const t of e){if(!t)continue;const e=t.indexOf("=");let n,i;e<0?(n=decodeURIComponent(t),i=""):(n=decodeURIComponent(t.slice(0,e)),i=decodeURIComponent(t.slice(e+1)));let s=r[n];"string"==typeof s&&(s=r[n]=[s]),Array.isArray(s)?s.push(i):r[n]=i}return r}function ze(t){return t&&"object"==typeof t&&"toJSON"in t&&"function"==typeof t.toJSON}function Fe(t,e){return t?e&&"function"==typeof e?Object.keys(t).map((r=>encodeURIComponent(r)+"="+encodeURIComponent(e(r,t[r])))).join("&"):Object.keys(t).map((r=>{const n=t[r];if(null==n)return"";const i=encodeURIComponent(r)+"=",s=e&&e[r];return s?i+encodeURIComponent(s(n)):Array.isArray(n)?n.map((t=>ze(t)?i+encodeURIComponent(JSON.stringify(t)):i+encodeURIComponent(t))).join("&"):ze(n)?i+encodeURIComponent(JSON.stringify(n)):i+encodeURIComponent(n)})).filter((t=>t)).join("&"):""}function Ue(t=!1){let e,r=xe.proxyUrl;if("string"==typeof t){e=ke.test(n=t)||"https"===_e.scheme&&ur(n);const i=Be(t);i&&(r=i.proxyUrl)}else e=!!t;var n;if(!r)throw Se.warn(Me),new ge("urlutils:proxy-not-set",Me);return e&&dr()&&(r=hr(r)),De(r)}function Le(t){const e=Be(t);let r,n;if(e){const t=Ge(e.proxyUrl);r=t.path,n=t.query?Re(t.query):null}if(r){const e=De(t);t=r+"?"+e.path;const i=Fe({...n,...e.query});i&&(t=`${t}?${i}`)}return t}const Ve={path:"",query:""};function Ge(t){const e=t.indexOf("?");return-1!==e?(Ve.path=t.slice(0,e),Ve.query=t.slice(e+1)):(Ve.path=t,Ve.query=null),Ve}function qe(t){return(t=fr(t=function(t){return t&&"/"===t[t.length-1]?t:`${t}/`}(t=Ge(t).path),!0)).toLowerCase()}function Be(t){const e=xe.proxyRules,r=qe(t);for(let t=0;t<e.length;t++)if(0===r.indexOf(e[t].urlPrefix))return e[t]}function We(t,e){return t=He(t),e=He(e),fr(t)===fr(e)}function He(t){const e=(t=Xe(t)).indexOf("/sharing");return e>0?t.substring(0,e):t.replace(/\/+$/,"")}function Je(t,e,r=!1){const n=wr(t),i=wr(e);return!(!r&&n.scheme!==i.scheme)&&null!=n.host&&null!=i.host&&n.host.toLowerCase()===i.host.toLowerCase()&&n.port===i.port}function Ye(t){if("string"==typeof t){if(!rr(t))return!0;t=wr(t)}if(Je(t,_e))return!0;const e=xe.trustedServers||[];for(let r=0;r<e.length;r++){const n=Qe(e[r]);for(let e=0;e<n.length;e++)if(Je(t,n[e]))return!0}return!1}function Qe(t){return Ee[t]||(Ee[t]=cr(t)||ur(t)?[new Pe(Ze(t))]:[new Pe(`http://${t}`),new Pe(`https://${t}`)]),Ee[t]}function Ze(t,e=$e,r){return ur(t)?r&&r.preserveProtocolRelative?t:"http"===_e.scheme&&_e.authority===er(t).slice(2)?`http:${t}`:`https:${t}`:cr(t)?t:tr("/"===t[0]?function(t){const e=t.indexOf("//"),r=t.indexOf("/",e+2);return-1===r?t:t.slice(0,r)}(e):e,t)}function Ke(t,e=$e,r){if(!rr(t))return t;const n=Xe(t),i=n.toLowerCase(),s=Xe(e).toLowerCase().replace(/\/+$/,""),o=r?Xe(r).toLowerCase().replace(/\/+$/,""):null;if(o&&0!==s.indexOf(o))return t;const l=(t,e,r)=>-1===(r=t.indexOf(e,r))?t.length:r;let a=l(i,"/",i.indexOf("//")+2),u=-1;for(;i.slice(0,a+1)===s.slice(0,a)+"/"&&(u=a+1,a!==i.length);)a=l(i,"/",a+1);if(-1===u)return t;if(o&&u<o.length)return t;t=n.slice(u);const c=s.slice(u-1).replace(/[^/]+/g,"").length;if(c>0)for(let e=0;e<c;e++)t=`../${t}`;else t=`./${t}`;return t}function Xe(t){return function(t){const e=xe.httpsDomains;if(!function(t){return Oe.test(t)||"http"===_e.scheme&&ur(t)}(t))return t;const r=t.indexOf("/",7);let n;if(n=-1===r?t:t.slice(0,r),n=n.toLowerCase().slice(7),Ae.test(n)){if(!n.endsWith(":80"))return t;n=n.slice(0,-3),t=t.replace(":80","")}return"http"!==_e.scheme||n!==_e.authority||Ce.test(t)?((dr()&&n===_e.authority||e&&e.some((t=>n===t||n.endsWith(`.${t}`)))||dr()&&!Be(t))&&(t=hr(t)),t):t}(t=function(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}(t=function(t){if(/^https?:\/\//i.test(t)){const e=Ge(t);t=(t=e.path.replace(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}(t=Ze(t=t.trim()))))}function tr(...t){const e=t.filter(x);if(!e||!e.length)return;const r=[];if(rr(e[0])){const t=e[0],n=t.indexOf("//");-1!==n&&(r.push(t.slice(0,n+1)),Ie.test(e[0])&&(r[0]+="/"),e[0]=t.slice(n+2))}else"/"===e[0][0]&&r.push("");const n=e.reduce(((t,e)=>e?t.concat(e.split("/")):t),[]);for(let t=0;t<n.length;t++){const e=n[t];".."===e&&r.length>0&&".."!==r[r.length-1]?r.pop():(!e&&t===n.length-1||e&&("."!==e||0===r.length))&&r.push(e)}return r.join("/")}function er(t,e=!1){if(nr(t)||ir(t))return null;let r=t.indexOf("://");if(-1===r&&ur(t))r=2;else{if(-1===r)return null;r+=3}const n=t.indexOf("/",r);return-1!==n&&(t=t.slice(0,n)),e&&(t=fr(t,!0)),t}function rr(t){return ur(t)||cr(t)}function nr(t){return null!=t&&"blob:"===t.slice(0,5)}function ir(t){return"data:"===t.slice(0,5)}function sr(t){const e=lr(t);if(!e||!e.isBase64)return null;const r=atob(e.data),n=new Uint8Array(r.length);for(let t=0;t<r.length;t++)n[t]=r.charCodeAt(t);return n.buffer}const or=/^data:(.*?)(;base64)?,(.*)$/;function lr(t){const e=t.match(or);if(!e)return null;const[,r,n,i]=e;return{mediaType:r,isBase64:!!n,data:i}}function ar(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}function ur(t){return null!=t&&void 0!==t&&"/"===t[0]&&"/"===t[1]}function cr(t){return je.test(t)}function hr(t){return ur(t)?`https:${t}`:t.replace(Oe,"https:")}function dr(){return"https"===_e.scheme}function fr(t,e=!1){return ur(t)?t.slice(2):(t=t.replace(je,""),e&&t.length>1&&"/"===t[0]&&"/"===t[1]&&(t=t.slice(2)),t)}function pr(t){let e=0;if(rr(t)){const r=t.indexOf("//");-1!==r&&(e=r+2)}const r=t.lastIndexOf("/");return r<e?t:t.slice(0,r+1)}function yr(t,e){if(!t)return"";const r=De(t).path.replace(/\/+$/,""),n=r.substring(r.lastIndexOf("/")+1);if(null==e||!e.length)return n;const i=new RegExp(`.(${e.join("|")})$`,"ig");return n.replace(i,"")}function mr(t){return t.replace(/\/+$/,"")}function vr(t,e,r){if(!(e&&r&&t&&rr(t)))return t;const n=t.indexOf("//"),i=t.indexOf("/",n+2),s=t.indexOf(":",n+2),o=Math.min(i<0?t.length:i,s<0?t.length:s);return t.slice(n+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,n+2)}${r}${t.slice(o)}`}function wr(t){return"string"==typeof t?new Pe(Ze(t)):(t.scheme||(t.scheme=_e.scheme),t)}function br(t,e){const r=De(t),n=Object.keys(r.query||{});return n.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${n.join(", ")}.`),r.path}function gr(t,e,r){const n=De(t),i=n.query||{};return i[e]=String(r),`${n.path}?${Fe(i)}`}function Sr(t,e){const r=De(t),n=r.query||{};for(const t in e)n[t]=e[t];const i=Fe(n);return i?`${r.path}?${i}`:r.path}function xr(t){if(M(t))return null;const e=t.match(Mr);return e?e[1]:null}const Mr=/.*?\.([^\/]*)$/;function jr(t){return Or[function(t){return t instanceof Blob?t.type:function(t){const e=xr(t);return Ar[e]||kr}(t.url)}(t)]||Ir}const Or={},kr="text/plain",Ir=Or[kr],Ar={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"};for(const t in Ar)Or[Ar[t]]=t;var Cr=function(t){return{setTimeout:(e,r)=>{const n=t.setTimeout(e,r);return{remove:()=>t.clearTimeout(n)}}}}(i);function Tr(t){return t&&("function"==typeof t.on||"function"==typeof t.addEventListener)}function Nr(t,e,r){if(!Tr(t))throw new TypeError("target is not a Evented or EventTarget object");if("on"in t)return t.on(e,r);if(Array.isArray(e)){const n=e.slice();for(const e of n)t.addEventListener(e,r);return{remove(){for(const e of n)t.removeEventListener(e,r)}}}return t.addEventListener(e,r),{remove(){t.removeEventListener(e,r)}}}function Pr(t,e,r){if(!Tr(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,r);const n=Nr(t,e,(e=>{n.remove(),r.call(t,e)}));return{remove(){n.remove()}}}const _r={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function Er({key:t}){return _r[t]||t}function $r(t){return Promise.all(t)}function Dr(t){return new Promise(((e,r)=>{try{t(e,r)}catch(t){Promise.resolve().then((()=>r(t)))}}))}function Rr(t="Aborted"){return new ge("AbortError",t)}function zr(){return new AbortController}function Fr(t){if(Lr(t))throw Rr()}function Ur(t){return x(t)?"aborted"in t?t:t.signal:t}function Lr(t){const e=Ur(t);return x(e)&&e.aborted}function Vr(t){if(Hr(t))throw t}function Gr(t){if(!Hr(t))throw t}function qr(t,e){const r=Ur(t);if(!M(r)){if(!r.aborted)return Pr(r,"abort",(()=>e()));e()}}function Br(t,e){const r=Ur(t);if(!M(r))return Fr(r),Pr(r,"abort",(()=>e(Rr())))}function Wr(t,e){return M(Ur(e))?t:Dr(((r,n)=>{let i=qr(e,(()=>n(Rr())));const s=()=>i=A(i);t.then(s,s),t.then(r,n)}))}function Hr(t){return t&&"AbortError"===t.name}function Jr(t){return t.catch((t=>{if(!Hr(t))throw t}))}function Yr(){let t=null;const e=Dr(((e,r)=>{t={promise:void 0,resolve:e,reject:r}}));return t.promise=e,t}function Qr(t,e){if(!t)return;if("function"!=typeof t.forEach){const e=Object.keys(t);return Qr(e.map((e=>t[e]))).then((t=>{const r={};return e.forEach(((e,n)=>r[e]=t[n])),r}))}const r=t,n=tn;return Wr(Dr((t=>{const e=[];let i=r.length;0===i&&t(e),r.forEach((r=>{const s={promise:r||n(r)};e.push(s),s.promise.then((t=>{s.value=t})).catch((t=>{s.error=t})).then((()=>{--i,0===i&&t(e)}))}))})),e)}function Zr(t){return t&&"function"==typeof t.then}function Kr(t){return t&&t.length?Dr(((e,r)=>{for(const n of t)n.then(e,r)})):tn()}function Xr(t){return Promise.reject(t)}function tn(t){return Promise.resolve(t)}function en(t,e,r){const n=zr();return qr(r,(()=>n.abort())),Dr(((r,i)=>{let s=setTimeout((()=>{s=0,r(e)}),t);qr(n,(()=>{s&&(clearTimeout(s),i(Rr()))}))}))}function rn(t){return t&&"function"==typeof t.then}function nn(t){return t&&"object"==typeof t&&"then"in t&&"function"==typeof t.then?t:tn(t)}function sn(t,e=-1){let r,n,i,s,o=null;const l=(...a)=>{if(r){n=a,s&&s.reject(Rr()),s=Yr();const t=s.promise;if(o){const t=o;o=null,t.abort()}return t}if(i=s||Yr(),s=null,e>0){const n=zr();r=nn(t(...a,n.signal));const i=r;en(e).then((()=>{r===i&&(s?n.abort():o=n)}))}else r=1,r=nn(t(...a));const u=()=>{const t=n;n=i=r=o=null,null!=t&&l(...t)},c=r,h=i;return c.then(u,u),c.then(h.resolve,h.reject),h.promise};return l}function on(){let t,e;const r=Dr(((r,n)=>{t=r,e=n})),n=e=>{t(e)};return n.resolve=e=>t(e),n.reject=t=>e(t),n.timeout=(t,e)=>Cr.setTimeout((()=>n.reject(e)),t),n.promise=r,n}J.getLogger("esri");const ln=new Set;function an(t,e,r={}){if(c("esri-deprecation-warnings")){const{moduleName:n}=r;un(t,"Property: "+(n?n+"::":"")+e,r)}}function un(t,e,r={}){if(c("esri-deprecation-warnings")){const{replacement:n,version:i,see:s,warnOnce:o}=r;let l=e;n&&(l+=`\n\tüõ†Ô∏è Replacement: ${n}`),i&&(l+=`\n\t‚öôÔ∏è Version: ${i}`),s&&(l+=`\n\tüîó See ${s} for more details.`),function(t,e,r=!1){r&&ln.has(e)||(r&&ln.add(e),t.warn(`üõë DEPRECATED - ${e}`))}(t,l,o)}}const cn=7;function hn(t){switch(t){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"user":return 6}}function dn(t){switch(t){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"user"}}function fn(t){return dn(t)}class pn{constructor(t,e,r,n=1,i=0){if(this.ctor=t,this.acquireFunction=e,this.releaseFunction=r,this.allocationSize=n,this._pool=new Array(i),this._initialSize=i,this.ctor)for(let t=0;t<i;t++)this._pool[t]=new this.ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...t){let e;const r=this.ctor;if(pn.test.disabled)e=new r;else{if(0===this._pool.length){const t=this.allocationSize;for(let e=0;e<t;e++)this._pool[e]=new r}e=this._pool.pop()}return this.acquireFunction?this.acquireFunction(e,...t):function(t){return t&&t.acquire&&"function"==typeof t.acquire}(e)&&e.acquire(...t),e}release(t){t&&!pn.test.disabled&&(this.releaseFunction?this.releaseFunction(t):function(t){return t&&t.release&&"function"==typeof t.release}(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let e=t;e<this._pool.length;++e)this._dispose(this._pool[e]);this._pool.length=t}}_dispose(t){t.dispose&&"function"==typeof t.dispose&&t.dispose()}}pn.test={disabled:!1};let yn=!1;function mn(t){return void 0!==t.flags}class vn{constructor(t,e){this._observers=t,this._observer=e}remove(){this._observers.delete(this._observer)}}class wn{constructor(t,e){this.propertyName=t,this.metadata=e,this.flags=1,this._observers=null,this._accessedProperties=null,this._observationHandles=[],this.flags=1|(e.nonNullable?8:0)|(e.hasOwnProperty("value")?16:0)|(void 0===e.get?32:0)|(void 0===e.dependsOn?64:0)}destroy(){this._accessedProperties&&(this._accessedProperties.clear(),this._accessedProperties=null),this._observers&&(this._observers.clear(),this._observers=null),this._clearObservationHandles()}onPropertyAccessed(t){t!==this&&(null===this._accessedProperties&&(this._accessedProperties=new Set),this._accessedProperties.add(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=32;const t=this._accessedProperties;if(null===t)return;const e=this._observationHandles;for(const r of t)e.push(r.observe(this));t.clear()}observe(t){return null===this._observers&&(this._observers=new Set),new vn(this._observers.add(t),t)}notify(){2&~this.flags&&(this.flags|=1),this._notifyObservers()}invalidate(){this.notify()}commit(){this.flags&=-2,this._notifyObservers()}_notifyObservers(){if(null===this._observers)return;const t=this._observers.size,e=new Array(t);let r=t-1;for(const t of this._observers)e[r--]=t;const n=!yn;for(;e.length;){const t=e.pop();if(mn(t)){if(2&~t.flags&&(t.flags|=1),null===t._observers)continue;for(const r of t._observers)e.push(r)}else n&&t.notify()}}_clearObservationHandles(){for(const t of this._observationHandles)t.remove();this._observationHandles.length=0}}class bn{constructor(){this._values=new Map}clone(t){const e=new bn;return this._values.forEach(((r,n)=>{t&&t.has(n)||e.set(n,w(r))})),e}get(t){return this._values.get(t)}originOf(){return 6}keys(){return[...this._values.keys()]}set(t,e){this._values.set(t,e)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}}let gn,Sn=[];const xn=J.getLogger("esri.core.Accessor");function Mn(t){void 0!==gn&&gn.onPropertyAccessed(t)}let jn=!1,On=!1;function kn(t,e,r){if(jn)return In(t,e,r);An(t);const n=e.call(r);return Cn(),n}function In(t,e,r){const n=jn;jn=!0,An(t);let i=null;try{i=e.call(r)}catch(t){On&&xn.error(t)}return Cn(),jn=n,i}function An(t){gn=t,Sn.push(t)}function Cn(){const t=Sn.pop();gn=Sn.length>0?Sn[Sn.length-1]:void 0,void 0!==t&&t.onTrackingEnd()}function Tn(t,e){if(32&e.flags)return;const r=On;On=!1,64&e.flags?In(e,e.metadata.get,t):Pn(t,e),On=r}const Nn=[];function Pn(t,e){128&e.flags||(e.flags|=128,In(e,(()=>{const r=e.metadata.dependsOn||Nn;for(const e of r)if("string"==typeof e&&-1===e.indexOf("."))_n(t,e,!1);else{const r=Ot(e);for(let e=0,n=t;e<r.length&&null!=n&&"object"==typeof n;++e)n=_n(n,r[e],e!==r.length-1)}})),e.flags&=-129)}function _n(t,e,r){const n="?"===e[e.length-1]?e.slice(0,-1):e;if(null!=t.getItemAt||Array.isArray(t)){const e=parseInt(n,10);if(!isNaN(e))return Array.isArray(t)?t[e]:t.getItemAt(e)}const i=xt(t),s=null==i?void 0:i.properties.get(n);return s&&(Mn(s),Tn(t,s)),r?t[n]:void 0}function En(t){return void 0!==t}function $n(t,e,r){return!(void 0===t||null==r&&8&t.flags)}J.getLogger("esri.core.accessorSupport.Properties");const Dn=new pn(class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}});class Rn{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=0,this.store=new bn,this._origin=6;const e=this.host.constructor.__accessorMetadata__,r=e.properties;for(const t in r){const e=new wn(t,r[t]);this.properties.set(t,e)}this.metadatas=r,this._autoDestroy=e.autoDestroy}initialize(){this.lifecycle=1}constructed(){this.lifecycle=2}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[e,r]of this.properties){const n=this.internalGet(e);n&&(t=n)&&"function"==typeof t.destroy&&(n.destroy(),8&~r.flags&&this._internalSet(r,null)),r.destroy()}else for(const[t,e]of this.properties)e.destroy();var t}get initialized(){return 0!==this.lifecycle}get(t){return this.properties.get(t).metadata.get?this.getterComputed(t):this.getterStatic(t)}getterStatic(t){const e=this.properties.get(t);if(void 0!==e)return Mn(e),this.store.has(t)?this.store.get(t):e.metadata.value}getterComputed(t){const e=this.properties.get(t);Mn(e);const r=this.store,n=e.flags,i=this.store.get(t);if(4&n)return i;if(r.has(t)&&(1&~n||yn))return i;let s;e.flags|=4;const o=e.metadata.get;64&n?s=kn(e,o,this.host):(Pn(this.host,e),s=o.call(this.host)),r.set(t,s,1);const l=this.store.get(t);return l===i?e.flags&=-2:e.commit(),e.flags&=-5,l}originOf(t){const e=this.store.originOf(t);if(void 0===e){const e=this.properties.get(t);if(void 0!==e&&16&e.flags)return"defaults"}return dn(e)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){const e=this.properties.get(t);if(En(e))return this.store.has(t)?this.store.get(t):e.metadata.value}internalSet(t,e){const r=this.properties.get(t);En(r)&&this._internalSet(r,e)}getDependsInfo(t,e,r,n){const i=this.properties.get(r);if(!En(i))return"";let s=`${n}${e}.${r}: ${Pt(t,r)}\n`;if(!i.metadata.dependsOn||0===i.metadata.dependsOn.length)return s;n+="  ";for(const e of i.metadata.dependsOn){const r=e.split(".");if(1===r.length)s+=`${n}${e}: ${Pt(t,e)}\n`;else{const i=r[r.length-1];--r.length;const o=r.join("."),l=Pt(t,o),a=xt(l);s+=a?a.getDependsInfo(l,o,i,n):`${n}${e}: undefined\n`}}return s}setAtOrigin(t,e,r){const n=this.properties.get(t);if(En(n))return this._setAtOrigin(n,e,r)}isOverridden(t){const e=this.properties.get(t);return void 0!==e&&!!(2&e.flags)}clearOverride(t){const e=this.properties.get(t);void 0!==e&&2&e.flags&&(e.flags&=-3,e.invalidate())}override(t,e){const r=this.properties.get(t);if(!$n(r,0,e))return;const n=r.metadata.cast;if(n){const t=this._cast(n,e),{valid:r,value:i}=t;if(Dn.release(t),!r)return;e=i}r.flags|=2,this._internalSet(r,e)}set(t,e){const r=this.properties.get(t);if(!$n(r,0,e))return;const n=r.metadata.cast;if(n){const t=this._cast(n,e),{valid:r,value:i}=t;if(Dn.release(t),!r)return;e=i}const i=r.metadata.set;i?i.call(this.host,e):this._internalSet(r,e)}setDefaultOrigin(t){this._origin=hn(t)}getDefaultOrigin(){return dn(this._origin)}propertyInvalidated(t){const e=this.properties.get(t);void 0!==e&&e.invalidate()}propertyCommitted(t){const e=this.properties.get(t);void 0!==e&&e.commit()}_internalSet(t,e){this._setAtOrigin(t,e,0!==this.lifecycle?this._origin:0)}_setAtOrigin(t,e,r){const n=this.store,i=t.propertyName;n.has(i,r)&&b(e,n.get(i))&&2&~t.flags&&r===n.originOf(i)||(yn=!0,t.invalidate(),yn=!1,n.set(i,e,r),t.commit(),Tn(this.host,t))}_cast(t,e){const r=Dn.acquire();return r.valid=!0,r.value=e,t&&(r.value=t.call(this.host,e,r)),r}}const zn=Array.prototype.splice;function Fn(t){t.length=0}class Un{constructor(t=50,e=50){this._pool=new pn(Array,void 0,Fn,e,t)}acquire(){return this._pool.acquire()}copy(t){const e=this.acquire();return t.unshift(0,0),zn.apply(e,t),t.splice(0,2),e}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return Ln.acquire()}static copy(t){return Ln.copy(t)}static release(t){return Ln.release(t)}static prune(){Ln.prune()}}const Ln=new Un(100),Vn=i.queueMicrotask?i.queueMicrotask:t=>{i.Promise.resolve().then(t)},Gn=[];let qn=[];function Bn(t){Gn.push(t),1===Gn.length&&Vn((()=>{for(const t of qn)t();const t=Gn.slice();Gn.length=0;for(const e of t)e()}))}(Bn||(Bn={})).before=function(t){return qn.push(t),{remove(){qn=qn.filter((e=>e!==t))}}};var Wn=Bn;class Hn{constructor(t,e=29){this.name=t,this._counter=0,this._items=new Array(e)}record(t){this._items[++this._counter%this._items.length]=t}get median(){return this._items.slice().sort()[Math.floor(this._items.length/2)]}get average(){return this._items.reduce(((t,e)=>t+e),0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}class Jn{constructor(t=1){this._seed=t}set seed(t){this._seed=null==t?Math.random()*Jn._m:t}getInt(){return this._seed=(Jn._a*this._seed+Jn._c)%Jn._m,this._seed}getFloat(){return this.getInt()/(Jn._m-1)}getIntRange(t,e){return Math.round(this.getFloatRange(t,e))}getFloatRange(t,e){const r=e-t,n=this.getInt()/Jn._m;return t+Math.floor(n*r)}}function Yn(t,e,r){return t&&e?t.filter(r?function(t){return e.findIndex((function(e){return r(t,e)}))>-1}:function(t){return e.indexOf(t)>-1}):[]}Jn._m=2147483647,Jn._a=48271,Jn._c=0;const Qn=!!Array.prototype.fill;function Zn(t,e){if(Qn)return new Array(t).fill(e);const r=new Array(t);for(let n=0;n<t;n++)r[n]=e;return r}function Kn(t,e){void 0===e&&(e=t,t=0);const r=new Array(e-t);for(let n=t;n<e;n++)r[n-t]=n;return r}class Xn{constructor(){this.last=0}}const ti=new Xn;function ei(t,e,r,n){n=n||ti;const i=Math.max(0,n.last-10);for(let s=i;s<r;++s)if(t[s]===e)return n.last=s,s;const s=Math.min(i,r);for(let r=0;r<s;++r)if(t[r]===e)return n.last=r,r;return-1}function ri(t,e,r,n){const i=null==r?t.length:r,s=ei(t,e,i,n);if(-1!==s)return t[s]=t[i-1],null==r&&t.pop(),e}const ni=new Set;var ii;!function(t){function e(t,e,r,n){let i=e,s=e;const o=r>>>1,l=t[i-1];for(;s<=o;){s=i<<1,s<r&&n(t[s-1],t[s])<0&&++s;const e=t[s-1];if(n(e,l)<=0)break;t[i-1]=e,i=s}t[i-1]=l}function r(t,e){return t<e?-1:t>e?1:0}t.sort=function(t,n,i,s){void 0===n&&(n=0),void 0===i&&(i=t.length),void 0===s&&(s=r);for(let r=i>>>1;r>n;r--)e(t,r,i,s);const o=n+1;for(let r=i-1;r>n;r--){const i=t[n];t[n]=t[r],t[r]=i,e(t,o,r,s)}},t.iterableSort=function*(t,n,i,s){void 0===n&&(n=0),void 0===i&&(i=t.length),void 0===s&&(s=r);for(let r=i>>>1;r>n;r--)e(t,r,i,s),yield;const o=n+1;for(let r=i-1;r>n;r--){const i=t[n];t[n]=t[r],t[r]=i,e(t,o,r,s),yield}}}(ii||(ii={}));var si=ii;class oi{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new Xn,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),void 0!==t.deallocator&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>{this.data.length>1.5*this.length&&(this.data.length=Math.floor(1.1*this.length))}))}toArray(){return this.data.slice(0,this.length)}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let e=t;e<this._length;++e)this.data[e]=this._deallocator(this.data[e]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,e=t.length){for(let r=0;r<e;r++)this.data[this._length++]=t[r]}fill(t,e){for(let r=0;r<e;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}pop(){if(0===this.length)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}*iterableRemoveMany(t){const e=new Array;for(let r=0;r<this.length&&!(r>=this.length);++r)ei(t.data,this.data[r],t.length,t._hint)<0&&e.push(this.data[r]),yield;this.data=e,this._length=this.data.length}remove(t){const e=ei(this.data,t,this.length,this._hint);if(-1!==e)return this.data.splice(e,1),this.length=this.length-1,t}removeUnordered(t){const e=ri(this.data,t,this.length,this._hint);return void 0!==e&&(this.length=this.length-1),e}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,e=t.length,r){this.length=function(t,e,r=t.length,n=e.length,i,s){if(0===n||0===r)return r;ni.clear();for(let t=0;t<n;++t)ni.add(e[t]);i=i||ti;const o=Math.max(0,i.last-10);for(let e=o;e<r;++e)if(ni.has(t[e])&&(s&&s.push(t[e]),ni.delete(t[e]),t[e]=t[r-1],--r,--e,0===ni.size||0===r))return ni.clear(),r;for(let e=0;e<o;++e)if(ni.has(t[e])&&(s&&s.push(t[e]),ni.delete(t[e]),t[e]=t[r-1],--r,--e,0===ni.size||0===r))return ni.clear(),r;return ni.clear(),r}(this.data,t,this.length,e,this._hint,r)}front(){if(0!==this.length)return this.data[0]}back(){if(0!==this.length)return this.data[this.length-1]}swapElements(t,e){t>=this.length||e>=this.length||t===e||([this.data[t],this.data[e]]=[this.data[e],this.data[t]])}sort(t){si.sort(this.data,0,this.length,t)}iterableSort(t){return si.iterableSort(this.data,0,this.length,t)}some(t,e){for(let r=0;r<this.length;++r)if(t.call(e,this.data[r],r,this.data))return!0;return!1}filterInPlace(t,e){let r=0;for(let n=0;n<this._length;++n){const i=this.data[n];t.call(e,i,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=i,r++)}if(this._deallocator)for(let t=r;t<this._length;t++)this.data[t]=this._deallocator(this.data[t]);return this._length=r,this}forAll(t,e){const r=this.length,n=this.data;for(let i=0;i<r;++i)t.call(e,n[i],i,n)}*iterableForEach(){for(let t=0;t<this.length;++t)yield this.data[t]}map(t,e){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=t.call(e,this.data[n],n,this.data);return r}reduce(t,e){let r=e;for(let e=0;e<this.length;++e)r=t(r,this.data[e],e,this.data);return r}}class li{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}}let ai=-1;const ui={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},ci=["prepare","preRender","render","postRender","update"],hi=[],di=new oi,fi={frameTasks:di,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(t=!1){di.forAll((t=>{t.removed=!0})),t&&mi()},dispatch:vi,executeFrameTasks:function(t=performance.now()){ai<0&&(ai=t);const e=t-ai,r=1e3/60,n=Math.max(0,e-r);ai=t;const i=performance.now();for(let i=0;i<ci.length;i++){const s=performance.now(),o=ci[i];di.forAll((s=>{var l;s.paused||s.removed||(0===i&&s.ticks++,s.phases[o]&&(ui.time=t,ui.deltaTime=0===s.ticks?0:e,ui.elapsedFrameTime=performance.now()-t,ui.frameDuration=r-n,null==(l=s.phases[o])||l.call(s,ui)))})),bi[i].record(performance.now()-s)}mi(),gi.record(performance.now()-i)}};function pi(t){const e=new li(t);return hi.push(e),fi.willDispatch||(fi.willDispatch=!0,Wn(vi)),e}const yi=new oi;function mi(){di.forAll((t=>{t.removed&&yi.push(t)})),di.removeUnorderedMany(yi.data,yi.length),yi.clear()}function vi(){for(;hi.length;){const t=hi.shift();t.isActive&&t.callback()}fi.willDispatch=!1}function wi(t=1,e){const r=on(),n=()=>{Lr(e)?r.reject(Rr()):0===t?r():(--t,Wn((()=>n())))};return n(),r.promise}const bi=ci.map((t=>new Hn(t))),gi=new Hn("total");class Si{constructor(t){this.notify=t,this._accessedProperties=new Set,this._observationHandles=[]}destroy(){this._accessedProperties.clear(),this.clearObservationHandles()}onPropertyAccessed(t){this._accessedProperties.add(t)}onTrackingEnd(){this._accessedProperties.forEach((t=>{this._observationHandles.push(t.observe(this))})),this._accessedProperties.clear()}clearObservationHandles(){for(const t of this._observationHandles)t.remove();this._observationHandles.length=0}}function xi(t,e){let r=new Si((function(){if(!r||i)return;const s=n;r.clearObservationHandles(),i=!0,n=kn(r,t),i=!1,e(s,n)})),n=null,i=!1;return i=!0,n=kn(r,t),i=!1,{remove:function(){r&&(r.destroy(),r=null,n=null)}}}class Mi{constructor(){this.uid=0,this.target=null,this.path=null,this.oldValue=null,this.callback=null,this.getValue=null,this.removed=!1,this.propertyPath=null}acquire(t,e,r,n,i){this.target=t,this.path=e,this.oldValue=r,this.callback=n,this.getValue=i,this.propertyPath=function(t){return t?"string"==typeof t&&-1===t.indexOf(".")?t:Ot(t):t}(e),this.uid=++Mi.uid,this.removed=!1}release(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null,this.uid=++Mi.uid,this.removed=!0}}Mi.pool=new class extends pn{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const e=super.acquire(...t);return this._set.delete(e),e}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}}(Mi),Mi.uid=0;const ji=new Un,Oi=new Set;let ki,Ii=ji.acquire();function Ai(t){Oi.has(t)?Ii.splice(Ii.indexOf(t),1):Oi.add(t),Ii.push(t),ki||(ki=pi(Ni))}function Ci(t){if(t.removed)return;const{callback:e,path:r,oldValue:n,target:i}=t,s=t.getValue();Ti(n,s)&&(t.oldValue=s,e.call(i,s,n,r,i))}function Ti(t,e){return!b(t,e)}function Ni(){let t=10;for(;ki&&t--;){ki=null;const t=Ii;Ii=ji.acquire(),Oi.clear();const e=ji.acquire();for(const r of t){const t=r.uid;Ci(r),t===r.uid&&r.removed&&e.push(r)}for(let t=0;t<Ii.length;t++){const r=Ii[t];r.removed&&(e.push(r),Oi.delete(r),Ii.splice(t,1),t-=1)}for(let t=0;t<e.length;t++)Mi.pool.release(e[t]);ji.release(t),ji.release(e),Pi.forEach((t=>t()))}}const Pi=new Set;function _i(t){if(null==t)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor&&t.constructor.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}class Ei{constructor(...t){if(this.constructor===Ei)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new Rn(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t))}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:e,declaredClass:r,constructor:n}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const i=this;class s extends i{constructor(...t){super(...t),this.inherited=null,n&&n.apply(this,t)}}$t(s.prototype);for(const e in t){const r=t[e];s.prototype[e]="function"==typeof r?function(...t){const n=this.inherited;let s;this.inherited=function(...t){if(i.prototype[e])return i.prototype[e].apply(this,t)};try{s=r.apply(this,t)}catch(t){throw this.inherited=n,t}return this.inherited=n,s}:t[e]}for(const t in e)Lt(_i(e[t]))(s.prototype,t);return ve(r)(s)}postscript(t){const e=this.__accessor__,r=e.ctorArgs||t;e.initialize(),r&&(this.set(r),e.ctorArgs=null),e.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||(function(t){for(let e=0;e<Ii.length;e++){const r=Ii[e];r.target===t&&(r.removed=!0)}}(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}get(t){return Pt(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}isInstanceOf(t){return function(t,e,r={}){if(c("esri-deprecation-warnings")){const{moduleName:n}=r;un(t,"Function: "+(n?n+"::":"")+e+"()",r)}}(J.getLogger(this.declaredClass),"isInstanceOf",{replacement:"Use instanceof directly",version:"4.16"}),this instanceof t}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,e){return Ft(this,t,e),this}watch(t,e,r){return function(t,e,r,n=!1){return!t.__accessor__||t.__accessor__.destroyed?{remove(){}}:n?function(t,e,r){const n=It(t,e,r,((t,e,r)=>{let i=!1;return xi((()=>Nt(t,e)),((s,o)=>{t.__accessor__.destroyed?n.remove():i||(i=!0,Ti(s,o)&&r.call(t,o,s,e,t),i=!1)}))}));return n}(t,e,r):function(t,e,r){let n=It(t,e,r,((t,e,r)=>{let i,s,o=function(t,e){let r=new Si((function(){e(n,i)})),n=null;function i(){return r?(r.clearObservationHandles(),n=kn(r,t),n):null}return i(),{remove:function(){r&&(r.destroy(),r=null),n=null}}}((()=>Nt(t,e)),((o,l)=>{t.__accessor__.destroyed||i&&i.uid!==s?n.remove():(i||(i=Mi.pool.acquire(t,e,o,r,l),s=i.uid),Ai(i))}));return{remove:At((function(){o.remove(),i&&(i.uid!==s||i.removed||(i.removed=!0,Ai(i)),i=null),n=o=null}))}}));return n}(t,e,r)}(this,t,e,r)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_override(t,e){return this.__accessor__.override(t,e)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.propertyInvalidated(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,e){return this.__accessor__.internalSet(t,e),this}}function $i(t,e,r){if(!t||!t.read||!1===t.read.enabled||!t.read.source)return!1;const n=t.read.source;if("string"==typeof n){if(n===e)return!0;if(n.indexOf(".")>-1&&0===n.indexOf(e)&&_t(n,r))return!0}else for(const t of n){if(t===e)return!0;if(t.indexOf(".")>-1&&0===t.indexOf(e)&&_t(t,r))return!0}return!1}function Di(t,e,r,n,i){let s=he(e[r],i);(function(t){return t&&(!t.read||!1!==t.read.enabled&&!t.read.source)})(s)&&(t[r]=!0);for(const o of Object.getOwnPropertyNames(e))s=he(e[o],i),$i(s,r,n)&&(t[o]=!0)}function Ri(t,e,r,n){const i=fe(r.metadatas[e],"any",n),s=i&&i.default;if(void 0===s)return;const o="function"==typeof s?s.call(t,e,n):s;void 0!==o&&r.set(e,o)}const zi={origin:"service"};function Fi(t,e,r=zi){if(!e||"object"!=typeof e)return;const n=xt(t),i=n.metadatas,s={};for(const t of Object.getOwnPropertyNames(e))Di(s,i,t,e,r);n.setDefaultOrigin(r.origin);for(const o of Object.getOwnPropertyNames(s)){const s=he(i[o],r).read,l=s&&s.source;let a;a=l&&"string"==typeof l?Nt(e,l):e[o],s&&s.reader&&(a=s.reader.call(t,a,e,r)),void 0!==a&&n.set(o,a)}if(!r||!r.ignoreDefaults)for(const e of Object.getOwnPropertyNames(i))s[e]||Ri(t,e,n,r);n.setDefaultOrigin("user")}function Ui(t,e,r,n=zi){var i;const s={...n,messages:[]};r(s),null==(i=s.messages)||i.forEach((e=>{"warning"!==e.type||t.loaded?n&&n.messages&&n.messages.push(e):t.loadWarnings.push(e)}))}const Li=J.getLogger("esri.core.accessorSupport.write");function Vi(t,e,r,n,i){var s,o;const l={};return null==(s=e.write)||null==(o=s.writer)||o.call(t,n,l,r,i),l}function Gi(t,e,r,n,i,s){if(!n||!n.write)return!1;const o=t.get(r);if(!i&&n.write.overridePolicy){const e=n.write.overridePolicy.call(t,o,r,s);void 0!==e&&(i=e)}if(i||(i=n.write),!i||!1===i.enabled)return!1;if((null===o&&!i.allowNull||void 0===o)&&i.isRequired){const e=new ge("web-document-write:property-required",`Missing value for required property '${r}' on '${t.declaredClass}'`,{propertyName:r,target:t});return e&&s&&s.messages?s.messages.push(e):e&&!s&&Li.error(e.name,e.message),!1}return!(void 0===o||null===o&&!i.allowNull||function(t,e,r,n,i){const s=n.default;return void 0!==s&&(null!=n.defaultEquals?n.defaultEquals(i):"function"==typeof s?!!Array.isArray(i)&&function(t,e){if(!t&&!e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}(s.call(t,e,r),i):s===i)}(t,r,s,n,o)||void 0===n.default&&!i.ignoreOrigin&&s&&s.origin&&e.store.originOf(r)<hn(s.origin))}function qi(t,e,r,n){const i=xt(t),s=de(i.metadatas[e],n);return!!s&&Gi(t,i,e,s,r,n)}function Bi(t,e,r){if(t&&"function"==typeof t.toJSON&&(!t.toJSON.isDefaultToJSON||!t.write))return Mt(e,t.toJSON());const n=xt(t),i=n.metadatas;for(const s in i){const o=de(i[s],r);if(!Gi(t,n,s,o,void 0,r))continue;const l=t.get(s),a=Vi(t,o,o.write&&"string"==typeof o.write.target?o.write.target:s,l,r);Object.keys(a).length>0&&(e=Mt(e,a),r&&r.resources&&r.resources.pendingOperations&&r.resources.pendingOperations.length&&$r(r.resources.pendingOperations).then((()=>Mt(e,a))),r&&r.writtenProperties&&r.writtenProperties.push({target:t,propName:s,oldOrigin:fn(n.store.originOf(s)),newOrigin:r.origin}))}return e}const Wi=t=>{let e=class extends t{constructor(...t){super(...t)}read(t,e){Fi(this,t,e)}write(t={},e){return Bi(this,t,e)}toJSON(t){return this.write({},t)}static fromJSON(t,e){return Hi.call(this,t,e)}};return e=n([ve("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function Hi(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(t,e),r}let Ji,Yi=class extends(Wi(Ei)){};Yi=n([ve("esri.core.JSONSupport")],Yi);const Qi={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9367:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(Ji=2e3;Ji<=2045;Ji++)Qi[Ji]=0;for(Ji=2056;Ji<=2065;Ji++)Qi[Ji]=0;for(Ji=2067;Ji<=2135;Ji++)Qi[Ji]=0;for(Ji=2137;Ji<=2154;Ji++)Qi[Ji]=0;for(Ji=2161;Ji<=2170;Ji++)Qi[Ji]=0;for(Ji=2172;Ji<=2193;Ji++)Qi[Ji]=0;for(Ji=2195;Ji<=2198;Ji++)Qi[Ji]=0;for(Ji=2200;Ji<=2203;Ji++)Qi[Ji]=0;for(Ji=2205;Ji<=2217;Ji++)Qi[Ji]=0;for(Ji=2222;Ji<=2224;Ji++)Qi[Ji]=1;for(Ji=2225;Ji<=2250;Ji++)Qi[Ji]=2;for(Ji=2251;Ji<=2253;Ji++)Qi[Ji]=1;for(Ji=2257;Ji<=2264;Ji++)Qi[Ji]=2;for(Ji=2274;Ji<=2279;Ji++)Qi[Ji]=2;for(Ji=2280;Ji<=2282;Ji++)Qi[Ji]=1;for(Ji=2283;Ji<=2289;Ji++)Qi[Ji]=2;for(Ji=2290;Ji<=2292;Ji++)Qi[Ji]=0;for(Ji=2308;Ji<=2313;Ji++)Qi[Ji]=0;for(Ji=2315;Ji<=2491;Ji++)Qi[Ji]=0;for(Ji=2494;Ji<=2866;Ji++)Qi[Ji]=0;for(Ji=2867;Ji<=2869;Ji++)Qi[Ji]=1;for(Ji=2870;Ji<=2888;Ji++)Qi[Ji]=2;for(Ji=2891;Ji<=2895;Ji++)Qi[Ji]=2;for(Ji=2896;Ji<=2898;Ji++)Qi[Ji]=1;for(Ji=2902;Ji<=2908;Ji++)Qi[Ji]=2;for(Ji=2915;Ji<=2920;Ji++)Qi[Ji]=2;for(Ji=2921;Ji<=2923;Ji++)Qi[Ji]=1;for(Ji=2924;Ji<=2930;Ji++)Qi[Ji]=2;for(Ji=2931;Ji<=2962;Ji++)Qi[Ji]=0;for(Ji=2964;Ji<=2968;Ji++)Qi[Ji]=2;for(Ji=2969;Ji<=2973;Ji++)Qi[Ji]=0;for(Ji=2975;Ji<=2991;Ji++)Qi[Ji]=0;for(Ji=2995;Ji<=3051;Ji++)Qi[Ji]=0;for(Ji=3054;Ji<=3079;Ji++)Qi[Ji]=0;for(Ji=3081;Ji<=3088;Ji++)Qi[Ji]=0;for(Ji=3092;Ji<=3101;Ji++)Qi[Ji]=0;for(Ji=3106;Ji<=3138;Ji++)Qi[Ji]=0;for(Ji=3146;Ji<=3151;Ji++)Qi[Ji]=0;for(Ji=3153;Ji<=3166;Ji++)Qi[Ji]=0;for(Ji=3168;Ji<=3172;Ji++)Qi[Ji]=0;for(Ji=3174;Ji<=3203;Ji++)Qi[Ji]=0;for(Ji=3294;Ji<=3358;Ji++)Qi[Ji]=0;for(Ji=3367;Ji<=3403;Ji++)Qi[Ji]=0;for(Ji=3408;Ji<=3416;Ji++)Qi[Ji]=0;for(Ji=3417;Ji<=3438;Ji++)Qi[Ji]=2;for(Ji=3441;Ji<=3446;Ji++)Qi[Ji]=2;for(Ji=3447;Ji<=3450;Ji++)Qi[Ji]=0;for(Ji=3451;Ji<=3459;Ji++)Qi[Ji]=2;for(Ji=3460;Ji<=3478;Ji++)Qi[Ji]=0;for(Ji=3554;Ji<=3559;Ji++)Qi[Ji]=0;for(Ji=3560;Ji<=3570;Ji++)Qi[Ji]=2;for(Ji=3571;Ji<=3581;Ji++)Qi[Ji]=0;for(Ji=3594;Ji<=3597;Ji++)Qi[Ji]=0;for(Ji=3601;Ji<=3604;Ji++)Qi[Ji]=0;for(Ji=3637;Ji<=3639;Ji++)Qi[Ji]=0;for(Ji=3665;Ji<=3667;Ji++)Qi[Ji]=0;for(Ji=3693;Ji<=3695;Ji++)Qi[Ji]=0;for(Ji=3701;Ji<=3727;Ji++)Qi[Ji]=0;for(Ji=3728;Ji<=3739;Ji++)Qi[Ji]=2;for(Ji=3740;Ji<=3751;Ji++)Qi[Ji]=0;for(Ji=3753;Ji<=3760;Ji++)Qi[Ji]=2;for(Ji=3761;Ji<=3773;Ji++)Qi[Ji]=0;for(Ji=3775;Ji<=3777;Ji++)Qi[Ji]=0;for(Ji=3779;Ji<=3781;Ji++)Qi[Ji]=0;for(Ji=3783;Ji<=3785;Ji++)Qi[Ji]=0;for(Ji=3788;Ji<=3791;Ji++)Qi[Ji]=0;for(Ji=3797;Ji<=3802;Ji++)Qi[Ji]=0;for(Ji=3814;Ji<=3816;Ji++)Qi[Ji]=0;for(Ji=3825;Ji<=3829;Ji++)Qi[Ji]=0;for(Ji=3832;Ji<=3841;Ji++)Qi[Ji]=0;for(Ji=3844;Ji<=3852;Ji++)Qi[Ji]=0;for(Ji=3873;Ji<=3885;Ji++)Qi[Ji]=0;for(Ji=3890;Ji<=3893;Ji++)Qi[Ji]=0;for(Ji=3907;Ji<=3912;Ji++)Qi[Ji]=0;for(Ji=3942;Ji<=3950;Ji++)Qi[Ji]=0;for(Ji=3968;Ji<=3970;Ji++)Qi[Ji]=0;for(Ji=3973;Ji<=3976;Ji++)Qi[Ji]=0;for(Ji=3986;Ji<=3989;Ji++)Qi[Ji]=0;for(Ji=3994;Ji<=3997;Ji++)Qi[Ji]=0;for(Ji=4048;Ji<=4051;Ji++)Qi[Ji]=0;for(Ji=4056;Ji<=4063;Ji++)Qi[Ji]=0;for(Ji=4093;Ji<=4096;Ji++)Qi[Ji]=0;for(Ji=4390;Ji<=4398;Ji++)Qi[Ji]=0;for(Ji=4399;Ji<=4413;Ji++)Qi[Ji]=2;for(Ji=4418;Ji<=4433;Ji++)Qi[Ji]=2;for(Ji=4455;Ji<=4457;Ji++)Qi[Ji]=2;for(Ji=4484;Ji<=4489;Ji++)Qi[Ji]=0;for(Ji=4491;Ji<=4554;Ji++)Qi[Ji]=0;for(Ji=4568;Ji<=4589;Ji++)Qi[Ji]=0;for(Ji=4652;Ji<=4656;Ji++)Qi[Ji]=0;for(Ji=4766;Ji<=4800;Ji++)Qi[Ji]=0;for(Ji=5014;Ji<=5016;Ji++)Qi[Ji]=0;for(Ji=5069;Ji<=5072;Ji++)Qi[Ji]=0;for(Ji=5105;Ji<=5130;Ji++)Qi[Ji]=0;for(Ji=5173;Ji<=5188;Ji++)Qi[Ji]=0;for(Ji=5253;Ji<=5259;Ji++)Qi[Ji]=0;for(Ji=5269;Ji<=5275;Ji++)Qi[Ji]=0;for(Ji=5292;Ji<=5311;Ji++)Qi[Ji]=0;for(Ji=5329;Ji<=5331;Ji++)Qi[Ji]=0;for(Ji=5343;Ji<=5349;Ji++)Qi[Ji]=0;for(Ji=5355;Ji<=5357;Ji++)Qi[Ji]=0;for(Ji=5387;Ji<=5389;Ji++)Qi[Ji]=0;for(Ji=5459;Ji<=5463;Ji++)Qi[Ji]=0;for(Ji=5479;Ji<=5482;Ji++)Qi[Ji]=0;for(Ji=5518;Ji<=5520;Ji++)Qi[Ji]=0;for(Ji=5530;Ji<=5539;Ji++)Qi[Ji]=0;for(Ji=5550;Ji<=5552;Ji++)Qi[Ji]=0;for(Ji=5562;Ji<=5583;Ji++)Qi[Ji]=0;for(Ji=5623;Ji<=5625;Ji++)Qi[Ji]=2;for(Ji=5631;Ji<=5639;Ji++)Qi[Ji]=0;for(Ji=5649;Ji<=5653;Ji++)Qi[Ji]=0;for(Ji=5663;Ji<=5680;Ji++)Qi[Ji]=0;for(Ji=5682;Ji<=5685;Ji++)Qi[Ji]=0;for(Ji=5875;Ji<=5877;Ji++)Qi[Ji]=0;for(Ji=5896;Ji<=5899;Ji++)Qi[Ji]=0;for(Ji=5921;Ji<=5940;Ji++)Qi[Ji]=0;for(Ji=6050;Ji<=6125;Ji++)Qi[Ji]=0;for(Ji=6244;Ji<=6275;Ji++)Qi[Ji]=0;for(Ji=6328;Ji<=6348;Ji++)Qi[Ji]=0;for(Ji=6350;Ji<=6356;Ji++)Qi[Ji]=0;for(Ji=6366;Ji<=6372;Ji++)Qi[Ji]=0;for(Ji=6381;Ji<=6387;Ji++)Qi[Ji]=0;for(Ji=6393;Ji<=6404;Ji++)Qi[Ji]=0;for(Ji=6480;Ji<=6483;Ji++)Qi[Ji]=0;for(Ji=6511;Ji<=6514;Ji++)Qi[Ji]=0;for(Ji=6579;Ji<=6581;Ji++)Qi[Ji]=0;for(Ji=6619;Ji<=6624;Ji++)Qi[Ji]=0;for(Ji=6625;Ji<=6627;Ji++)Qi[Ji]=2;for(Ji=6628;Ji<=6632;Ji++)Qi[Ji]=0;for(Ji=6634;Ji<=6637;Ji++)Qi[Ji]=0;for(Ji=6669;Ji<=6692;Ji++)Qi[Ji]=0;for(Ji=6707;Ji<=6709;Ji++)Qi[Ji]=0;for(Ji=6720;Ji<=6723;Ji++)Qi[Ji]=0;for(Ji=6732;Ji<=6738;Ji++)Qi[Ji]=0;for(Ji=6931;Ji<=6933;Ji++)Qi[Ji]=0;for(Ji=6956;Ji<=6959;Ji++)Qi[Ji]=0;for(Ji=7005;Ji<=7007;Ji++)Qi[Ji]=0;for(Ji=7057;Ji<=7070;Ji++)Qi[Ji]=2;for(Ji=7074;Ji<=7082;Ji++)Qi[Ji]=0;for(Ji=7109;Ji<=7118;Ji++)Qi[Ji]=0;for(Ji=7119;Ji<=7127;Ji++)Qi[Ji]=1;for(Ji=7374;Ji<=7376;Ji++)Qi[Ji]=0;for(Ji=7528;Ji<=7586;Ji++)Qi[Ji]=0;for(Ji=7587;Ji<=7645;Ji++)Qi[Ji]=2;for(Ji=7692;Ji<=7696;Ji++)Qi[Ji]=0;for(Ji=7755;Ji<=7787;Ji++)Qi[Ji]=0;for(Ji=7791;Ji<=7795;Ji++)Qi[Ji]=0;for(Ji=7799;Ji<=7801;Ji++)Qi[Ji]=0;for(Ji=7803;Ji<=7805;Ji++)Qi[Ji]=0;for(Ji=7825;Ji<=7831;Ji++)Qi[Ji]=0;for(Ji=7845;Ji<=7859;Ji++)Qi[Ji]=0;for(Ji=8013;Ji<=8032;Ji++)Qi[Ji]=0;for(Ji=8065;Ji<=8068;Ji++)Qi[Ji]=1;for(Ji=8518;Ji<=8529;Ji++)Qi[Ji]=2;for(Ji=8533;Ji<=8536;Ji++)Qi[Ji]=2;for(Ji=8538;Ji<=8540;Ji++)Qi[Ji]=2;for(Ji=8677;Ji<=8679;Ji++)Qi[Ji]=0;for(Ji=8836;Ji<=8840;Ji++)Qi[Ji]=0;for(Ji=8857;Ji<=8859;Ji++)Qi[Ji]=0;for(Ji=8908;Ji<=8910;Ji++)Qi[Ji]=0;for(Ji=9154;Ji<=9159;Ji++)Qi[Ji]=0;for(Ji=9205;Ji<=9218;Ji++)Qi[Ji]=0;for(Ji=9271;Ji<=9273;Ji++)Qi[Ji]=0;for(Ji=9295;Ji<=9297;Ji++)Qi[Ji]=0;for(Ji=20002;Ji<=20032;Ji++)Qi[Ji]=0;for(Ji=20062;Ji<=20092;Ji++)Qi[Ji]=0;for(Ji=20135;Ji<=20138;Ji++)Qi[Ji]=0;for(Ji=20248;Ji<=20258;Ji++)Qi[Ji]=0;for(Ji=20348;Ji<=20358;Ji++)Qi[Ji]=0;for(Ji=20436;Ji<=20440;Ji++)Qi[Ji]=0;for(Ji=20822;Ji<=20824;Ji++)Qi[Ji]=0;for(Ji=20934;Ji<=20936;Ji++)Qi[Ji]=0;for(Ji=21035;Ji<=21037;Ji++)Qi[Ji]=0;for(Ji=21095;Ji<=21097;Ji++)Qi[Ji]=0;for(Ji=21148;Ji<=21150;Ji++)Qi[Ji]=0;for(Ji=21413;Ji<=21423;Ji++)Qi[Ji]=0;for(Ji=21453;Ji<=21463;Ji++)Qi[Ji]=0;for(Ji=21473;Ji<=21483;Ji++)Qi[Ji]=0;for(Ji=21780;Ji<=21782;Ji++)Qi[Ji]=0;for(Ji=21891;Ji<=21894;Ji++)Qi[Ji]=0;for(Ji=21896;Ji<=21899;Ji++)Qi[Ji]=0;for(Ji=22171;Ji<=22177;Ji++)Qi[Ji]=0;for(Ji=22181;Ji<=22187;Ji++)Qi[Ji]=0;for(Ji=22191;Ji<=22197;Ji++)Qi[Ji]=0;for(Ji=22234;Ji<=22236;Ji++)Qi[Ji]=0;for(Ji=22521;Ji<=22525;Ji++)Qi[Ji]=0;for(Ji=22991;Ji<=22994;Ji++)Qi[Ji]=0;for(Ji=23028;Ji<=23038;Ji++)Qi[Ji]=0;for(Ji=23830;Ji<=23853;Ji++)Qi[Ji]=0;for(Ji=23866;Ji<=23872;Ji++)Qi[Ji]=0;for(Ji=23877;Ji<=23884;Ji++)Qi[Ji]=0;for(Ji=23886;Ji<=23894;Ji++)Qi[Ji]=0;for(Ji=23946;Ji<=23948;Ji++)Qi[Ji]=0;for(Ji=24311;Ji<=24313;Ji++)Qi[Ji]=0;for(Ji=24342;Ji<=24347;Ji++)Qi[Ji]=0;for(Ji=24370;Ji<=24374;Ji++)Qi[Ji]=10;for(Ji=24375;Ji<=24381;Ji++)Qi[Ji]=0;for(Ji=24718;Ji<=24721;Ji++)Qi[Ji]=0;for(Ji=24817;Ji<=24821;Ji++)Qi[Ji]=0;for(Ji=24877;Ji<=24882;Ji++)Qi[Ji]=0;for(Ji=24891;Ji<=24893;Ji++)Qi[Ji]=0;for(Ji=25391;Ji<=25395;Ji++)Qi[Ji]=0;for(Ji=25828;Ji<=25838;Ji++)Qi[Ji]=0;for(Ji=26191;Ji<=26195;Ji++)Qi[Ji]=0;for(Ji=26391;Ji<=26393;Ji++)Qi[Ji]=0;for(Ji=26701;Ji<=26722;Ji++)Qi[Ji]=0;for(Ji=26729;Ji<=26799;Ji++)Qi[Ji]=2;for(Ji=26801;Ji<=26803;Ji++)Qi[Ji]=2;for(Ji=26811;Ji<=26813;Ji++)Qi[Ji]=2;for(Ji=26847;Ji<=26870;Ji++)Qi[Ji]=2;for(Ji=26891;Ji<=26899;Ji++)Qi[Ji]=0;for(Ji=26901;Ji<=26923;Ji++)Qi[Ji]=0;for(Ji=26929;Ji<=26946;Ji++)Qi[Ji]=0;for(Ji=26948;Ji<=26998;Ji++)Qi[Ji]=0;for(Ji=27037;Ji<=27040;Ji++)Qi[Ji]=0;for(Ji=27205;Ji<=27232;Ji++)Qi[Ji]=0;for(Ji=27258;Ji<=27260;Ji++)Qi[Ji]=0;for(Ji=27391;Ji<=27398;Ji++)Qi[Ji]=0;for(Ji=27561;Ji<=27564;Ji++)Qi[Ji]=0;for(Ji=27571;Ji<=27574;Ji++)Qi[Ji]=0;for(Ji=27581;Ji<=27584;Ji++)Qi[Ji]=0;for(Ji=27591;Ji<=27594;Ji++)Qi[Ji]=0;for(Ji=28191;Ji<=28193;Ji++)Qi[Ji]=0;for(Ji=28348;Ji<=28358;Ji++)Qi[Ji]=0;for(Ji=28402;Ji<=28432;Ji++)Qi[Ji]=0;for(Ji=28462;Ji<=28492;Ji++)Qi[Ji]=0;for(Ji=29118;Ji<=29122;Ji++)Qi[Ji]=0;for(Ji=29168;Ji<=29172;Ji++)Qi[Ji]=0;for(Ji=29177;Ji<=29185;Ji++)Qi[Ji]=0;for(Ji=29187;Ji<=29195;Ji++)Qi[Ji]=0;for(Ji=29900;Ji<=29903;Ji++)Qi[Ji]=0;for(Ji=30161;Ji<=30179;Ji++)Qi[Ji]=0;for(Ji=30491;Ji<=30494;Ji++)Qi[Ji]=0;for(Ji=30729;Ji<=30732;Ji++)Qi[Ji]=0;for(Ji=31251;Ji<=31259;Ji++)Qi[Ji]=0;for(Ji=31265;Ji<=31268;Ji++)Qi[Ji]=0;for(Ji=31275;Ji<=31279;Ji++)Qi[Ji]=0;for(Ji=31281;Ji<=31297;Ji++)Qi[Ji]=0;for(Ji=31461;Ji<=31469;Ji++)Qi[Ji]=0;for(Ji=31491;Ji<=31495;Ji++)Qi[Ji]=0;for(Ji=31917;Ji<=31922;Ji++)Qi[Ji]=0;for(Ji=31965;Ji<=32e3;Ji++)Qi[Ji]=0;for(Ji=32001;Ji<=32003;Ji++)Qi[Ji]=2;for(Ji=32005;Ji<=32031;Ji++)Qi[Ji]=2;for(Ji=32033;Ji<=32060;Ji++)Qi[Ji]=2;for(Ji=32064;Ji<=32067;Ji++)Qi[Ji]=2;for(Ji=32074;Ji<=32077;Ji++)Qi[Ji]=2;for(Ji=32081;Ji<=32086;Ji++)Qi[Ji]=0;for(Ji=32107;Ji<=32130;Ji++)Qi[Ji]=0;for(Ji=32133;Ji<=32158;Ji++)Qi[Ji]=0;for(Ji=32164;Ji<=32167;Ji++)Qi[Ji]=2;for(Ji=32180;Ji<=32199;Ji++)Qi[Ji]=0;for(Ji=32201;Ji<=32260;Ji++)Qi[Ji]=0;for(Ji=32301;Ji<=32360;Ji++)Qi[Ji]=0;for(Ji=32601;Ji<=32662;Ji++)Qi[Ji]=0;for(Ji=32664;Ji<=32667;Ji++)Qi[Ji]=2;for(Ji=32701;Ji<=32761;Ji++)Qi[Ji]=0;for(Ji=53001;Ji<=53004;Ji++)Qi[Ji]=0;for(Ji=53008;Ji<=53019;Ji++)Qi[Ji]=0;for(Ji=53021;Ji<=53032;Ji++)Qi[Ji]=0;for(Ji=53034;Ji<=53037;Ji++)Qi[Ji]=0;for(Ji=53042;Ji<=53046;Ji++)Qi[Ji]=0;for(Ji=53074;Ji<=53080;Ji++)Qi[Ji]=0;for(Ji=54001;Ji<=54004;Ji++)Qi[Ji]=0;for(Ji=54008;Ji<=54019;Ji++)Qi[Ji]=0;for(Ji=54021;Ji<=54032;Ji++)Qi[Ji]=0;for(Ji=54034;Ji<=54037;Ji++)Qi[Ji]=0;for(Ji=54042;Ji<=54046;Ji++)Qi[Ji]=0;for(Ji=54048;Ji<=54053;Ji++)Qi[Ji]=0;for(Ji=54074;Ji<=54080;Ji++)Qi[Ji]=0;for(Ji=54098;Ji<=54101;Ji++)Qi[Ji]=0;for(Ji=102001;Ji<=102040;Ji++)Qi[Ji]=0;for(Ji=102042;Ji<=102063;Ji++)Qi[Ji]=0;for(Ji=102065;Ji<=102067;Ji++)Qi[Ji]=0;for(Ji=102070;Ji<=102117;Ji++)Qi[Ji]=0;for(Ji=102122;Ji<=102216;Ji++)Qi[Ji]=0;for(Ji=102221;Ji<=102377;Ji++)Qi[Ji]=0;for(Ji=102382;Ji<=102388;Ji++)Qi[Ji]=0;for(Ji=102389;Ji<=102398;Ji++)Qi[Ji]=2;for(Ji=102399;Ji<=102444;Ji++)Qi[Ji]=0;for(Ji=102445;Ji<=102447;Ji++)Qi[Ji]=2;for(Ji=102448;Ji<=102458;Ji++)Qi[Ji]=0;for(Ji=102459;Ji<=102468;Ji++)Qi[Ji]=2;for(Ji=102469;Ji<=102499;Ji++)Qi[Ji]=0;for(Ji=102500;Ji<=102519;Ji++)Qi[Ji]=1;for(Ji=102520;Ji<=102524;Ji++)Qi[Ji]=0;for(Ji=102525;Ji<=102529;Ji++)Qi[Ji]=2;for(Ji=102530;Ji<=102588;Ji++)Qi[Ji]=0;for(Ji=102590;Ji<=102598;Ji++)Qi[Ji]=0;for(Ji=102601;Ji<=102603;Ji++)Qi[Ji]=0;for(Ji=102605;Ji<=102628;Ji++)Qi[Ji]=0;for(Ji=102629;Ji<=102646;Ji++)Qi[Ji]=2;for(Ji=102648;Ji<=102700;Ji++)Qi[Ji]=2;for(Ji=102701;Ji<=102703;Ji++)Qi[Ji]=0;for(Ji=102707;Ji<=102730;Ji++)Qi[Ji]=2;for(Ji=102733;Ji<=102758;Ji++)Qi[Ji]=2;for(Ji=102767;Ji<=102900;Ji++)Qi[Ji]=0;for(Ji=102965;Ji<=102969;Ji++)Qi[Ji]=0;for(Ji=102971;Ji<=102973;Ji++)Qi[Ji]=0;for(Ji=102975;Ji<=102989;Ji++)Qi[Ji]=0;for(Ji=102990;Ji<=102992;Ji++)Qi[Ji]=1;for(Ji=102997;Ji<=103002;Ji++)Qi[Ji]=0;for(Ji=103003;Ji<=103008;Ji++)Qi[Ji]=2;for(Ji=103009;Ji<=103011;Ji++)Qi[Ji]=0;for(Ji=103012;Ji<=103014;Ji++)Qi[Ji]=2;for(Ji=103019;Ji<=103021;Ji++)Qi[Ji]=0;for(Ji=103022;Ji<=103024;Ji++)Qi[Ji]=2;for(Ji=103029;Ji<=103031;Ji++)Qi[Ji]=0;for(Ji=103032;Ji<=103034;Ji++)Qi[Ji]=2;for(Ji=103065;Ji<=103068;Ji++)Qi[Ji]=0;for(Ji=103074;Ji<=103076;Ji++)Qi[Ji]=0;for(Ji=103077;Ji<=103079;Ji++)Qi[Ji]=1;for(Ji=103080;Ji<=103082;Ji++)Qi[Ji]=0;for(Ji=103083;Ji<=103085;Ji++)Qi[Ji]=2;for(Ji=103090;Ji<=103093;Ji++)Qi[Ji]=0;for(Ji=103097;Ji<=103099;Ji++)Qi[Ji]=0;for(Ji=103100;Ji<=103102;Ji++)Qi[Ji]=2;for(Ji=103107;Ji<=103109;Ji++)Qi[Ji]=0;for(Ji=103110;Ji<=103112;Ji++)Qi[Ji]=2;for(Ji=103113;Ji<=103116;Ji++)Qi[Ji]=0;for(Ji=103117;Ji<=103120;Ji++)Qi[Ji]=2;for(Ji=103153;Ji<=103157;Ji++)Qi[Ji]=0;for(Ji=103158;Ji<=103162;Ji++)Qi[Ji]=2;for(Ji=103163;Ji<=103165;Ji++)Qi[Ji]=0;for(Ji=103166;Ji<=103168;Ji++)Qi[Ji]=1;for(Ji=103169;Ji<=103171;Ji++)Qi[Ji]=2;for(Ji=103186;Ji<=103188;Ji++)Qi[Ji]=0;for(Ji=103189;Ji<=103191;Ji++)Qi[Ji]=2;for(Ji=103192;Ji<=103195;Ji++)Qi[Ji]=0;for(Ji=103196;Ji<=103199;Ji++)Qi[Ji]=2;for(Ji=103200;Ji<=103224;Ji++)Qi[Ji]=0;for(Ji=103225;Ji<=103227;Ji++)Qi[Ji]=1;for(Ji=103232;Ji<=103237;Ji++)Qi[Ji]=0;for(Ji=103238;Ji<=103243;Ji++)Qi[Ji]=2;for(Ji=103244;Ji<=103246;Ji++)Qi[Ji]=0;for(Ji=103247;Ji<=103249;Ji++)Qi[Ji]=2;for(Ji=103254;Ji<=103256;Ji++)Qi[Ji]=0;for(Ji=103257;Ji<=103259;Ji++)Qi[Ji]=2;for(Ji=103264;Ji<=103266;Ji++)Qi[Ji]=0;for(Ji=103267;Ji<=103269;Ji++)Qi[Ji]=2;for(Ji=103300;Ji<=103375;Ji++)Qi[Ji]=0;for(Ji=103381;Ji<=103383;Ji++)Qi[Ji]=0;for(Ji=103384;Ji<=103386;Ji++)Qi[Ji]=1;for(Ji=103387;Ji<=103389;Ji++)Qi[Ji]=0;for(Ji=103390;Ji<=103392;Ji++)Qi[Ji]=2;for(Ji=103397;Ji<=103399;Ji++)Qi[Ji]=0;for(Ji=103400;Ji<=103471;Ji++)Qi[Ji]=2;for(Ji=103476;Ji<=103478;Ji++)Qi[Ji]=0;for(Ji=103479;Ji<=103481;Ji++)Qi[Ji]=2;for(Ji=103486;Ji<=103488;Ji++)Qi[Ji]=0;for(Ji=103489;Ji<=103491;Ji++)Qi[Ji]=2;for(Ji=103492;Ji<=103495;Ji++)Qi[Ji]=0;for(Ji=103496;Ji<=103499;Ji++)Qi[Ji]=2;for(Ji=103528;Ji<=103543;Ji++)Qi[Ji]=0;for(Ji=103544;Ji<=103548;Ji++)Qi[Ji]=2;for(Ji=103549;Ji<=103551;Ji++)Qi[Ji]=0;for(Ji=103552;Ji<=103554;Ji++)Qi[Ji]=1;for(Ji=103555;Ji<=103557;Ji++)Qi[Ji]=2;for(Ji=103558;Ji<=103560;Ji++)Qi[Ji]=0;for(Ji=103571;Ji<=103573;Ji++)Qi[Ji]=0;for(Ji=103574;Ji<=103576;Ji++)Qi[Ji]=2;for(Ji=103577;Ji<=103580;Ji++)Qi[Ji]=0;for(Ji=103581;Ji<=103583;Ji++)Qi[Ji]=2;for(Ji=103595;Ji<=103694;Ji++)Qi[Ji]=0;for(Ji=103696;Ji<=103699;Ji++)Qi[Ji]=0;for(Ji=103700;Ji<=103793;Ji++)Qi[Ji]=2;for(Ji=103794;Ji<=103872;Ji++)Qi[Ji]=0;for(Ji=103900;Ji<=103971;Ji++)Qi[Ji]=2;const Zi={102113:!0,102100:!0,3857:!0,3785:!0},Ki={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0},Xi='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',ts=[-20037508.342788905,20037508.342788905],es=[-20037508.342787,20037508.342787],rs={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:ts,origin:es,dx:1e-5},102100:{wkTemplate:Xi,valid:ts,origin:es,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:ts,origin:es,dx:1e-5},3857:{wkTemplate:Xi,valid:ts,origin:es,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function ns(t,e){return!M(t)&&!M(e)&&(t===e||(null!=t.wkid||null!=e.wkid?t.wkid===e.wkid||ls(t)&&ls(e)||null!=e.latestWkid&&t.wkid===e.latestWkid||null!=t.latestWkid&&e.wkid===t.latestWkid:!(!t.wkt||!e.wkt)&&t.wkt.toUpperCase()===e.wkt.toUpperCase()))}function is(t){return ds(t)&&t.wkid?rs[t.wkid]:null}function ss(t){return!!ds(t)&&(t.wkid?null==Qi[t.wkid]:!!t.wkt&&!!/^\s*GEOGCS/i.test(t.wkt))}function os(t){return ds(t)&&4326===t.wkid}function ls(t){return ds(t)&&null!=t.wkid&&!0===Zi[t.wkid]}function as(t){return 104971===t||104905===t}function us(t){return ds(t)&&null!=t.wkid&&as(t.wkid)}function cs(t){return 104903===t}function hs(t){return ds(t)&&null!=t.wkid&&cs(t.wkid)}function ds(t){return x(t)&&(null!=t.wkid&&t.wkid>=2e3||null!=t.wkt)}const fs={wkid:4326,wkt:G(rs[4326].wkTemplate,{Central_Meridian:"0.0"})};var ps;let ys=ps=class extends Yi{constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(t){if(!t)return null;if(t.wkid){if(102100===t.wkid)return ps.WebMercator;if(4326===t.wkid)return ps.WGS84}const e=new ps;return e.read(t),e}normalizeCtorArgs(t){return t&&"object"==typeof t?t:{["string"==typeof t?"wkt":"wkid"]:t}}get isWGS84(){return os(this)}get isWebMercator(){return ls(this)}get isGeographic(){return ss(this)}get isWrappable(){return function(t){return ds(t)&&null!=t.wkid&&!0===Ki[t.wkid]}(this)}writeWkt(t,e){this.wkid||(e.wkt=t)}clone(){if(this===ps.WGS84)return ps.WGS84;if(this===ps.WebMercator)return ps.WebMercator;const t=new ps;return null!=this.wkid?(t.wkid=this.wkid,null!=this.latestWkid&&(t.latestWkid=this.latestWkid),null!=this.vcsWkid&&(t.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(t.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(t.wkt=this.wkt),this.imageCoordinateSystem&&(t.imageCoordinateSystem=w(this.imageCoordinateSystem)),t}equals(t){if(null==t)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(null==this.imageCoordinateSystem||null==t.imageCoordinateSystem)return!1;const{id:e,referenceServiceName:r}=t.imageCoordinateSystem,{geodataXform:n}=t.imageCoordinateSystem,i=this.imageCoordinateSystem;return null==e||n?JSON.stringify(i)===JSON.stringify(t.imageCoordinateSystem):r?i.id===e&&i.referenceServiceName===r:i.id===e}return ns(this,t)}toJSON(t){return this.write(void 0,t)}};ys.GCS_NAD_1927=null,ys.WGS84=null,ys.WebMercator=null,n([Lt({dependsOn:["wkid"],autoTracked:!1,readOnly:!0})],ys.prototype,"isWGS84",null),n([Lt({dependsOn:["wkid"],autoTracked:!1,readOnly:!0})],ys.prototype,"isWebMercator",null),n([Lt({dependsOn:["wkid","wkt"],autoTracked:!1,readOnly:!0})],ys.prototype,"isGeographic",null),n([Lt({dependsOn:["wkid"],autoTracked:!1,readOnly:!0})],ys.prototype,"isWrappable",null),n([Lt({type:mt,json:{write:!0}})],ys.prototype,"latestWkid",void 0),n([Lt({type:mt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null===this.wkt}}}}}}})],ys.prototype,"wkid",void 0),n([Lt({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null===this.wkid}}}}}}})],ys.prototype,"wkt",void 0),n([be("wkt"),be("web-scene","wkt")],ys.prototype,"writeWkt",null),n([Lt({type:mt,json:{write:!0}})],ys.prototype,"vcsWkid",void 0),n([Lt({type:mt,json:{write:!0}})],ys.prototype,"latestVcsWkid",void 0),n([Lt()],ys.prototype,"imageCoordinateSystem",void 0),ys=ps=n([ve("esri.geometry.SpatialReference")],ys),ys.prototype.toJSON.isDefaultToJSON=!0,ys.GCS_NAD_1927=new ys({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),ys.WGS84=new ys(fs),ys.WebMercator=new ys({wkid:102100,latestWkid:3857}),Object.freeze&&(Object.freeze(ys.GCS_NAD_1927),Object.freeze(ys.WGS84),Object.freeze(ys.WebMercator));var ms=ys;function vs(t,e,r){let n,i;return void 0===e||Array.isArray(e)?(i=t,r=e,n=[void 0]):(i=e,n=Array.isArray(t)?t:[t]),(t,e)=>{const s=t.constructor.prototype;n.forEach((n=>{const o=Vt(t,n,i);o.read&&"object"!=typeof o.read&&(o.read={}),z("read.reader",s[e],o),r&&(o.read.source=(o.read.source||[]).concat(r))}))}}let ws=class extends Yi{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=ms.WGS84}get cache(){return{}}get extent(){return null}readSpatialReference(t,e){if(t instanceof ms)return t;if(null!=t){const r=new ms;return r.read(t,e),r}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,e){this.cache[t]=e}};n([Lt()],ws.prototype,"type",void 0),n([Lt({readOnly:!0,dependsOn:["spatialReference"],autoTracked:!1})],ws.prototype,"cache",null),n([Lt({readOnly:!0,dependsOn:["spatialReference"],autoTracked:!1})],ws.prototype,"extent",null),n([Lt({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ws.prototype,"hasM",void 0),n([Lt({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ws.prototype,"hasZ",void 0),n([Lt({type:ms,json:{write:!0}})],ws.prototype,"spatialReference",void 0),n([vs("spatialReference")],ws.prototype,"readSpatialReference",null),ws=n([ve("esri.geometry.Geometry")],ws);var bs=ws;const gs=Object.prototype.toString;function Ss(t){const e="__accessorMetadata__"in t?ut(t):t;return function(...t){if(t.push(e),"number"==typeof t[2])throw new Error("Using @cast has parameter decorator is not supported since 4.16");return xs.apply(this,t)}}function xs(t,e,r,n){Dt(t,e).cast=n}function Ms(...t){var e;if(3!==t.length||"string"!=typeof t[1])return 1===t.length&&"[object Function]"===gs.call(t[0])?Ss(t[0]):1===t.length&&"string"==typeof t[0]?(e=t[0],function(t,r){Dt(t,e).cast=t[r]}):void 0}class js{constructor(t,e,r,n){this.semiMajorAxis=t,this.flattening=e,this.outerAtmosphereRimWidth=r,this.semiMinorAxis=this.semiMajorAxis*(1-this.flattening),this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=n||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const Os=new js(6378137,1/298.257223563,3e5,.006694379990137799),ks=new js(3396190,1/169.8944472236118,23e4),Is=new js(1737400,0,0);function As(t){return 57.29577951308232*t}function Cs(t){return.017453292519943*t}function Ts(t){return null!=t.wkid||null!=t.wkt}const Ns=[0,0];function Ps(t,e,r,n,i){const s=t,o=i;if("x"in s&&"x"in o)[o.x,o.y]=e(s.x,s.y,Ns,n);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=e(s.xmin,s.ymin,Ns,n),[o.xmax,o.ymax]=e(s.xmax,s.ymax,Ns,n);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const t="paths"in s?s.paths:s.rings,r=[];let i;for(let s=0;s<t.length;s++){const o=t[s];i=[],r.push(i);for(let t=0;t<o.length;t++)i.push(e(o[t][0],o[t][1],[0,0],n)),o[t].length>2&&i[t].push(o[t][2]),o[t].length>3&&i[t].push(o[t][3])}"paths"in o?o.paths=r:o.rings=r}else if("points"in s&&"points"in o){const t=s.points,r=[];for(let i=0;i<t.length;i++)r[i]=e(t[i][0],t[i][1],[0,0],n),t[i].length>2&&r[i].push(t[i][2]),t[i].length>3&&r[i].push(t[i][3]);o.points=r}return o.spatialReference=r,i}function _s(t,e){const r=t&&(Ts(t)?t:t.spatialReference),n=e&&(Ts(e)?e:e.spatialReference);return(!t||!("type"in t)||"mesh"!==t.type)&&(!e||!("type"in e)||"mesh"!==e.type)&&!(!r||!n)&&(!!ns(n,r)||ls(n)&&os(r)||ls(r)&&os(n))}function Es(t,e){const r=t&&t.spatialReference,n=e&&(Ts(e)?e:e.spatialReference);return _s(r,n)?ns(r,n)?w(t):ls(n)?Ps(t,$s,ms.WebMercator,!1,w(t)):os(n)?Ps(t,Ds,ms.WGS84,!1,w(t)):null:null}function $s(t,e,r=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const n=Cs(e);return r[0]=Cs(t)*Os.radius,r[1]=Os.halfSemiMajorAxis*Math.log((1+Math.sin(n))/(1-Math.sin(n))),r}function Ds(t,e,r=[0,0],n=!1){const i=As(t/Os.radius);return r[0]=n?i:i-360*Math.floor((i+180)/360),r[1]=As(Math.PI/2-2*Math.atan(Math.exp(-1*e/Os.radius))),r}function Rs(t,e=!1,r=w(t)){return Ps(t,$s,ms.WebMercator,e,r)}function zs(t,e=!1,r=w(t)){return Ps(t,Ds,ms.WGS84,e,r)}var Fs;const Us=[0,0];function Ls(t){return t&&("esri.geometry.SpatialReference"===t.declaredClass||null!=t.wkid)}const Vs=J.getLogger("esri.geometry.Point");let Gs=Fs=class extends bs{constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const r=t._get("spatialReference");e._set("spatialReference",Object.isFrozen(r)?r:r.clone())}normalizeCtorArgs(t,e,r,n,i){let s;if(Array.isArray(t))s=t,i=e,t=s[0],e=s[1],r=s[2],n=s[3];else if(t&&"object"==typeof t){if(s=t,t=null!=s.x?s.x:s.longitude,e=null!=s.y?s.y:s.latitude,r=s.z,n=s.m,(i=s.spatialReference)&&"esri.geometry.SpatialReference"!==i.declaredClass&&(i=new ms(i)),null!=s.longitude||null!=s.latitude)if(null==s.longitude)Vs.warn(".longitude=","Latitude was defined without longitude");else if(null==s.latitude)Vs.warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&i&&i.isWebMercator){const r=$s(s.longitude,s.latitude,Us);t=r[0],e=r[1]}}else Ls(r)?(i=r,r=null):Ls(n)&&(i=n,n=null);const o={x:t,y:e};return null==o.x&&null!=o.y?Vs.warn(".y=","Y coordinate was defined without an X coordinate"):null==o.y&&null!=o.x&&Vs.warn(".x=","X coordinate was defined without a Y coordinate"),null!=i&&(o.spatialReference=i),null!=r&&(o.z=r),null!=n&&(o.m=n),o}get hasM(){return void 0!==this.m}set hasM(t){t!==this.hasM&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return void 0!==this.z}set hasZ(t){t!==this.hasZ&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){const t=this._get("spatialReference");if(t){if(t.isWebMercator)return Ds(this.x,this.y,Us)[1];if(t.isGeographic)return this._get("y")}return null}set latitude(t){const e=this._get("spatialReference");e&&(e.isWebMercator?this._set("y",$s(this.x,t,Us)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){const t=this._get("spatialReference");if(t){if(t.isWebMercator)return Ds(this._get("x"),this._get("y"),Us)[0];if(t.isGeographic)return this._get("x")}return null}set longitude(t){const e=this._get("spatialReference");e&&(e.isWebMercator?this._set("x",$s(t,this._get("y"),Us)[0]):e.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,r){e[r]=isNaN(t)?"NaN":t}readX(t){return"string"==typeof t?NaN:t}clone(){const t=new Fs;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return Fs.copy(t,this),this}equals(t){if(!t)return!1;const{x:e,y:r,z:n,m:i,spatialReference:s}=this,{z:o,m:l}=t;let{x:a,y:u,spatialReference:c}=t;if(!s.equals(c))if(s.isWebMercator&&c.isWGS84)[a,u]=$s(a,u),c=s;else{if(!s.isWGS84||!c.isWebMercator)return!1;[a,u]=Ds(a,u),c=s}return e===a&&r===u&&n===o&&i===l&&s.wkid===c.wkid}offset(t,e,r){return function(t,e,r,n){return t.x=t.x+e,t.y=t.y+r,null!=n&&null!=t.z&&(t.z=t.z+n),t}(this,t,e,r)}normalize(){if(!this.spatialReference)return this;const t=is(this.spatialReference);if(!t)return this;let e=this.x;const[r,n]=t.valid,i=2*n;let s;return e>n?(s=Math.ceil(Math.abs(e-n)/i),e-=s*i):e<r&&(s=Math.ceil(Math.abs(e-r)/i),e+=s*i),this._set("x",e),this}distance(t){return function(t,e){const r=t.x-e.x,n=t.y-e.y,i=t.hasZ&&e.hasZ?t.z-e.z:0;return Math.sqrt(r*r+n*n+i*i)}(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write(null,t)}};n([Lt({dependsOn:["x","y","z","m","spatialReference"],autoTracked:!1})],Gs.prototype,"cache",void 0),n([Lt({type:Boolean,dependsOn:["m"],json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Gs.prototype,"hasM",null),n([Lt({type:Boolean,dependsOn:["z"],json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Gs.prototype,"hasZ",null),n([Lt({type:Number,dependsOn:["y"],autoTracked:!1})],Gs.prototype,"latitude",null),n([Lt({type:Number,dependsOn:["x"],autoTracked:!1})],Gs.prototype,"longitude",null),n([Lt({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Ms((t=>isNaN(t)?t:X(t)))],Gs.prototype,"x",void 0),n([be("x")],Gs.prototype,"writeX",null),n([vs("x")],Gs.prototype,"readX",null),n([Lt({type:Number,json:{write:!0}})],Gs.prototype,"y",void 0),n([Lt({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Gs.prototype,"z",void 0),n([Lt({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Gs.prototype,"m",void 0),Gs=Fs=n([ve("esri.geometry.Point")],Gs),Gs.prototype.toJSON.isDefaultToJSON=!0;var qs=Gs;const Bs=[0,0];function Ws(t,e){return Qs(t,e.x,e.y,e.z)}function Hs(t,e){if(!e.points||e.points.length)return!1;for(const r of e.points)if(!Js(t,r))return!1;return!0}function Js(t,e){return Qs(t,e[0],e[1])}function Ys(t,e){return Qs(t,e[0],e[1],e[2])}function Qs(t,e,r,n){return e>=t.xmin&&e<=t.xmax&&r>=t.ymin&&r<=t.ymax&&(null==n||!t.hasZ||n>=t.zmin&&n<=t.zmax)}function Zs(t,e){return function(t,e){if(!t)return!1;if(function(t){return!Array.isArray(t[0][0])}(t))return Ks(!1,t,e);let r=!1;for(let n=0,i=t.length;n<i;n++)r=Ks(r,t[n],e);return r}(t.rings,e)}function Ks(t,e,r){const[n,i]=r;let s=t,o=0;for(let t=0,r=e.length;t<r;t++){o++,o===r&&(o=0);const[l,a]=e[t],[u,c]=e[o];(a<i&&c>=i||c<i&&a>=i)&&l+(i-a)/(c-a)*(u-l)<n&&(s=!s)}return s}function Xs(t,e){return Ws(t,e)}function to(t,e){let r,n,i;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(n=e.ymin,t.ymax<n)return!1}else if(n=t.ymin,e.ymax<n)return!1;if(t.hasZ&&e.hasZ&&e.hasZ)if(t.zmin<=e.zmin){if(i=e.zmin,t.zmax<i)return!1}else if(i=t.zmin,e.zmax<i)return!1;return!0}function eo(t,e){const{points:r,hasZ:n}=e,i=n?Ys:Js;for(const e of r)if(i(t,e))return!0;return!1}const ro=[0,0],no=[0,0],io=[0,0],so=[0,0],oo=[ro,no,io,so],lo=[[io,ro],[ro,no],[no,so],[so,io]];function ao(t,e){ro[0]=t.xmin,ro[1]=t.ymax,no[0]=t.xmax,no[1]=t.ymax,io[0]=t.xmin,io[1]=t.ymin,so[0]=t.xmax,so[1]=t.ymin;for(const t of oo)if(Zs(e,t))return!0;for(const r of e.rings){if(!r.length)continue;let e=r[0];if(Js(t,e))return!0;for(let n=1;n<r.length;n++){const i=r[n];if(Js(t,i)||ho(e,i,lo))return!0;e=i}}return!1}function uo(t,e){ro[0]=t.xmin,ro[1]=t.ymax,no[0]=t.xmax,no[1]=t.ymax,io[0]=t.xmin,io[1]=t.ymin,so[0]=t.xmax,so[1]=t.ymin;const r=e.paths;for(const e of r){if(!r.length)continue;let n=e[0];if(Js(t,n))return!0;for(let r=1;r<e.length;r++){const i=e[r];if(Js(t,i)||ho(n,i,lo))return!0;n=i}}return!1}const co=[0,0];function ho(t,e,r){for(let n=0;n<r.length;n++)if(fo(t,e,r[n][0],r[n][1]))return!0;return!1}function fo(t,e,r,n,i){const[s,o]=t,[l,a]=e,[u,c]=r,[h,d]=n,f=h-u,p=s-u,y=l-s,m=d-c,v=o-c,w=a-o,b=m*y-f*w;if(0===b)return!1;const g=(f*v-m*p)/b,S=(y*v-w*p)/b;return g>=0&&g<=1&&S>=0&&S<=1&&(i&&(i[0]=s+g*(l-s),i[1]=o+g*(a-o)),!0)}function po(t){switch(t){case"esriGeometryEnvelope":case"extent":return to;case"esriGeometryMultipoint":case"multipoint":return eo;case"esriGeometryPoint":case"point":return Xs;case"esriGeometryPolygon":case"polygon":return ao;case"esriGeometryPolyline":case"polyline":return uo;case"mesh":return to}}var yo;function mo(t,e,r){return null==e?r:null==r?e:t(e,r)}let vo=yo=class extends bs{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,r,n,i){return!(s=t)||"esri.geometry.SpatialReference"!==s.declaredClass&&null==s.wkid?"object"==typeof t?(t.spatialReference=null==t.spatialReference?ms.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:r,ymax:n,spatialReference:null==i?ms.WGS84:i}:{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0};var s}static fromBounds(t,e){return new yo({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}get center(){const t=new qs({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return null!=this.mmin&&null!=this.mmax}get hasZ(){return null!=this.zmin&&null!=this.zmax}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return null!=t.z&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new yo;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,null!=this.zmin&&(t.zmin=this.zmin,t.zmax=this.zmax),null!=this.mmin&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,r=t.spatialReference;return e&&r&&!e.equals(r)&&_s(e,r)&&(t=e.isWebMercator?Rs(t):zs(t,!0)),"point"===t.type?Ws(this,t):"extent"===t.type&&function(t,e){const{xmin:r,ymin:n,zmin:i,xmax:s,ymax:o,zmax:l}=e;return t.hasZ&&e.hasZ?Qs(t,r,n,i)&&Qs(t,r,o,i)&&Qs(t,s,o,i)&&Qs(t,s,n,i)&&Qs(t,r,n,l)&&Qs(t,r,o,l)&&Qs(t,s,o,l)&&Qs(t,s,n,l):Qs(t,r,n)&&Qs(t,r,o)&&Qs(t,s,o)&&Qs(t,s,n)}(this,t)}equals(t){if(!t)return!1;const e=this.spatialReference,r=t.spatialReference;return e&&r&&!e.equals(r)&&_s(e,r)&&(t=e.isWebMercator?Rs(t):zs(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),r=this.width*e,n=this.height*e;if(this.xmin+=r,this.ymin+=n,this.xmax-=r,this.ymax-=n,this.hasZ){const t=(this.zmax-this.zmin)*e;this.zmin+=t,this.zmax-=t}if(this.hasM){const t=(this.mmax-this.mmin)*e;this.mmin+=t,this.mmax-=t}return this}intersects(t){if(M(t))return!1;"mesh"===t.type&&(t=t.extent);const e=this.spatialReference,r=t.spatialReference;return e&&r&&!e.equals(r)&&_s(e,r)&&(t=e.isWebMercator?Rs(t):zs(t,!0)),po(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,r){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,null!=r&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=mo(Math.min,this.zmin,t.zmin),this.zmax=mo(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=mo(Math.min,this.mmin,t.mmin),this.mmax=mo(Math.max,this.mmax,t.mmax)),this}intersection(t){return this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=mo(Math.max,this.zmin,t.zmin),this.zmax=mo(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=mo(Math.max,this.mmin,t.mmin),this.mmax=mo(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write(null,t)}_shiftCM(t=is(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,r=this._getCM(t);if(r){const n=e.isWebMercator?zs(r):r;this.xmin-=r.x,this.xmax-=r.x,e.isWebMercator||(n.x=this._normalizeX(n.x,t).x),this.spatialReference=new ms(G(e.isWGS84?t.altTemplate:t.wkTemplate,{Central_Meridian:n.x}))}return this}_getCM(t){let e=null;const[r,n]=t.valid,i=this.xmin,s=this.xmax;return i>=r&&i<=n&&s>=r&&s<=n||(e=this.center),e}_normalize(t,e,r){const n=this.spatialReference;if(!n)return this;if(!(r=r||is(n)))return this;const i=this._getParts(r).map((t=>t.extent));if(i.length<2)return i[0]||this;if(i.length>2)return t?this._shiftCM(r):this.set({xmin:r.valid[0],xmax:r.valid[1]});if(t)return this._shiftCM(r);if(e)return i;let s=!0,o=!0;return i.forEach((t=>{t.hasZ||(s=!1),t.hasM||(o=!1)})),{rings:i.map((t=>{const e=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]];if(s){const r=(t.zmax-t.zmin)/2;for(let t=0;t<e.length;t++)e[t].push(r)}if(o){const r=(t.mmax-t.mmin)/2;for(let t=0;t<e.length;t++)e[t].push(r)}return e})),hasZ:s,hasM:o,spatialReference:n}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:r,ymax:n,spatialReference:i}=this,s=this.width,o=this.xmin,l=this.xmax;let a;t=t||is(i);const[u,c]=t.valid;a=this._normalizeX(this.xmin,t);const h=a.x,d=a.frameId;a=this._normalizeX(this.xmax,t);const f=a.x,p=a.frameId,y=h===f&&s>0;if(s>2*c){const t=new yo(o<l?h:f,r,c,n,i),s=new yo(u,r,o<l?f:h,n,i),a=new yo(0,r,c,n,i),y=new yo(u,r,0,n,i),m=[],v=[];t.contains(a)&&m.push(d),t.contains(y)&&v.push(d),s.contains(a)&&m.push(p),s.contains(y)&&v.push(p);for(let t=d+1;t<p;t++)m.push(t),v.push(t);e.push({extent:t,frameIds:[d]},{extent:s,frameIds:[p]},{extent:a,frameIds:m},{extent:y,frameIds:v})}else h>f||y?e.push({extent:new yo(h,r,c,n,i),frameIds:[d]},{extent:new yo(u,r,f,n,i),frameIds:[p]}):e.push({extent:new yo(h,r,f,n,i),frameIds:[d]});this.cache._parts=e}const r=this.hasZ,n=this.hasM;if(r||n){const t={};r&&(t.zmin=this.zmin,t.zmax=this.zmax),n&&(t.mmin=this.mmin,t.mmax=this.mmax);for(let r=0;r<e.length;r++)e[r].extent.set(t)}return e}_normalizeX(t,e){const[r,n]=e.valid,i=2*n;let s,o=0;return t>n?(s=Math.ceil(Math.abs(t-n)/i),t-=s*i,o=s):t<r&&(s=Math.ceil(Math.abs(t-r)/i),t+=s*i,o=-s),{x:t,frameId:o}}};n([Lt({dependsOn:["xmin","ymin","zmin","mmin","xmax","ymax","zmax","mmax","spatialReference"],autoTracked:!1})],vo.prototype,"cache",void 0),n([Lt({readOnly:!0,dependsOn:["cache"],autoTracked:!1})],vo.prototype,"center",null),n([Lt({readOnly:!0,dependsOn:["cache"],autoTracked:!1})],vo.prototype,"extent",null),n([Lt({readOnly:!0,dependsOn:["mmin","mmax"],json:{write:{enabled:!1,overridePolicy:null}}})],vo.prototype,"hasM",null),n([Lt({readOnly:!0,dependsOn:["zmin","zmax"],json:{write:{enabled:!1,overridePolicy:null}}})],vo.prototype,"hasZ",null),n([Lt({readOnly:!0,dependsOn:["ymin","ymax"]})],vo.prototype,"height",null),n([Lt({readOnly:!0,dependsOn:["xmin","xmax"]})],vo.prototype,"width",null),n([Lt({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],vo.prototype,"xmin",void 0),n([Lt({type:Number,json:{write:!0}})],vo.prototype,"ymin",void 0),n([Lt({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],vo.prototype,"mmin",void 0),n([Lt({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],vo.prototype,"zmin",void 0),n([Lt({type:Number,json:{write:!0}})],vo.prototype,"xmax",void 0),n([Lt({type:Number,json:{write:!0}})],vo.prototype,"ymax",void 0),n([Lt({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],vo.prototype,"mmax",void 0),n([Lt({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],vo.prototype,"zmax",void 0),vo=yo=n([ve("esri.geometry.Extent")],vo),vo.prototype.toJSON.isDefaultToJSON=!0;var wo,bo=vo;function go(t,e,r=!1){let{hasM:n,hasZ:i}=t;Array.isArray(e)?4!==e.length||n||i?3===e.length&&r&&!n?(i=!0,n=!1):3===e.length&&n&&i&&(n=!1,i=!1):(n=!0,i=!0):(i=!i&&e.hasZ&&(!n||e.hasM),n=!n&&e.hasM&&(!i||e.hasZ)),t.hasZ=i,t.hasM=n}function So(t){return(e,r)=>null==e?r:null==r?e:t(e,r)}let xo=wo=class extends bs{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){if(!t&&!e)return null;const r={};var n;Array.isArray(t)?(r.points=t,r.spatialReference=e):!(n=t)||"esri.geometry.SpatialReference"!==n.declaredClass&&null==n.wkid?(t.points&&(r.points=t.points),t.spatialReference&&(r.spatialReference=t.spatialReference),t.hasZ&&(r.hasZ=t.hasZ),t.hasM&&(r.hasM=t.hasM)):r.spatialReference=t;const i=r.points&&r.points[0];return i&&(void 0===r.hasZ&&void 0===r.hasM?(r.hasZ=i.length>2,r.hasM=!1):void 0===r.hasZ?r.hasZ=i.length>3:void 0===r.hasM&&(r.hasM=i.length>3)),r}get extent(){const t=this.points;if(!t.length)return null;const e=new bo,r=this.hasZ,n=this.hasM,i=r?3:2,s=t[0],o=So(Math.min),l=So(Math.max);let a,u,c,h,[d,f]=s,[p,y]=s;for(let e=0,s=t.length;e<s;e++){const s=t[e],[m,v]=s;if(d=o(d,m),f=o(f,v),p=l(p,m),y=l(y,v),r&&s.length>2){const t=s[2];a=o(a,t),c=l(c,t)}if(n&&s.length>i){const t=s[i];u=o(u,t),h=l(h,t)}}return e.xmin=d,e.ymin=f,e.xmax=p,e.ymax=y,e.spatialReference=this.spatialReference,r?(e.zmin=a,e.zmax=c):(e.zmin=null,e.zmax=null),n?(e.mmin=u,e.mmax=h):(e.mmin=null,e.mmax=null),e}writePoints(t,e){e.points=w(this.points)}addPoint(t){return this.clearCache(),go(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this}clone(){const t={points:w(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new wo(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],r={x:e[0],y:e[1],spatialReference:this.spatialReference};let n=2;return this.hasZ&&(r.z=e[2],n=3),this.hasM&&(r.m=e[n]),new qs(r)}removePoint(t){return this._validateInputs(t)?(this.clearCache(),new qs(this.points.splice(t,1)[0],this.spatialReference)):null}setPoint(t,e){return this._validateInputs(t)?(this.clearCache(),go(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this):this}toJSON(t){return this.write(null,t)}_validateInputs(t){return null!=t&&t>=0&&t<this.points.length}};n([Lt({dependsOn:["points","hasZ","hasM","spatialReference"],autoTracked:!1})],xo.prototype,"cache",void 0),n([Lt({dependsOn:["cache"],autoTracked:!1})],xo.prototype,"extent",null),n([Lt({type:[[Number]],json:{write:{isRequired:!0}}})],xo.prototype,"points",void 0),n([be("points")],xo.prototype,"writePoints",null),xo=wo=n([ve("esri.geometry.Multipoint")],xo),xo.prototype.toJSON.isDefaultToJSON=!0;var Mo=xo;function jo(t,e){const r=e[0]-t[0],n=e[1]-t[1];if(t.length>2&&e.length>2){const i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)}return Math.sqrt(r*r+n*n)}function Oo(t,e){return function(t,e){const r=t[0]+.5*(e[0]-t[0]),n=t[1]+.5*(e[1]-t[1]);return t.length>2&&e.length>2?[r,n,t[2]+.5*(e[2]-t[2])]:[r,n]}(t,e)}function ko(t,e,r){const n=t.length;let i=0,s=0,o=0;for(let l=0;l<n;l++){const a=t[l],u=t[(l+1)%n];let c=2;i+=a[0]*u[1]-u[0]*a[1],a.length>2&&u.length>2&&r&&(s+=a[0]*u[2]-u[0]*a[2],c=3),a.length>c&&u.length>c&&e&&(o+=a[0]*u[c]-u[0]*a[c])}return i<=0&&s<=0&&o<=0}function Io(t,e,r){let n=0,i=0,s=0,o=0,l=0;for(let a=0;a<t.length;a++){const u=t[a],[c,h,d]=u,f=t[(a+1)%t.length],[p,y,m]=f;let v=c*y-p*h;o+=v,n+=(c+p)*v,i+=(h+y)*v,e&&u.length>2&&f.length>2&&(v=c*m-p*d,s+=(d+m)*v,l+=v),c<r[0]&&(r[0]=c),c>r[1]&&(r[1]=c),h<r[2]&&(r[2]=h),h>r[3]&&(r[3]=h),e&&(d<r[4]&&(r[4]=d),d>r[5]&&(r[5]=d))}if(o>0&&(o*=-1),l>0&&(l*=-1),!o)return null;const a=[n,i,.5*o];return e&&(a[3]=s,a[4]=.5*l),a}function Ao(t){return void 0!==t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax}function Co(t){return void 0!==t.points}function To(t){return void 0!==t.x&&void 0!==t.y}function No(t){return void 0!==t.paths}function Po(t){return void 0!==t.rings}function _o(t){return(e,r)=>null==e?r:null==r?e:t(e,r)}const Eo=_o(Math.min),$o=_o(Math.max);function Do(t,e){return No(e)?zo(t,e.paths,!1,!1):Po(e)?zo(t,e.rings,!1,!1):Co(e)?Uo(t,e.points,!1,!1,!1,!1):Ao(e)?Fo(t,e):(To(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function Ro(t,e){return No(e)?zo(t,e.paths,!0,!1):Po(e)?zo(t,e.rings,!0,!1):Co(e)?Uo(t,e.points,!0,!1,!0,!1):Ao(e)?Fo(t,e,0,0,!0,!1):(To(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function zo(t,e,r,n){const i=r?3:2;if(!e.length||!e[0].length)return null;let s,o,l,a,[u,c]=e[0][0],[h,d]=e[0][0];for(let t=0;t<e.length;t++){const f=e[t];for(let t=0;t<f.length;t++){const e=f[t],[p,y]=e;if(u=Eo(u,p),c=Eo(c,y),h=$o(h,p),d=$o(d,y),r&&e.length>2){const t=e[2];s=Eo(s,t),o=$o(o,t)}if(n&&e.length>i){const t=e[i];l=Eo(s,t),a=$o(o,t)}}}return r?n?(t[0]=u,t[1]=c,t[2]=s,t[3]=l,t[4]=h,t[5]=d,t[6]=o,t[7]=a,t.length=8,t):(t[0]=u,t[1]=c,t[2]=s,t[3]=h,t[4]=d,t[5]=o,t.length=6,t):n?(t[0]=u,t[1]=c,t[2]=l,t[3]=h,t[4]=d,t[5]=a,t.length=6,t):(t[0]=u,t[1]=c,t[2]=h,t[3]=d,t.length=4,t)}function Fo(t,e,r,n,i,s){const o=e.xmin,l=e.xmax,a=e.ymin,u=e.ymax;let c=e.zmin,h=e.zmax,d=e.mmin,f=e.mmax;return i?(c=c||0,h=h||0,s?(d=d||0,f=f||0,t[0]=o,t[1]=a,t[2]=c,t[3]=d,t[4]=l,t[5]=u,t[6]=h,t[7]=f,t):(t[0]=o,t[1]=a,t[2]=c,t[3]=l,t[4]=u,t[5]=h,t)):s?(d=d||0,f=f||0,t[0]=o,t[1]=a,t[2]=d,t[3]=l,t[4]=u,t[5]=f,t):(t[0]=o,t[1]=a,t[2]=l,t[3]=u,t)}function Uo(t,e,r,n,i,s){const o=r?3:2,l=n&&s,a=r&&i;if(!e.length||!e[0].length)return null;let u,c,h,d,[f,p]=e[0],[y,m]=e[0];for(let t=0;t<e.length;t++){const r=e[t],[n,i]=r;if(f=Eo(f,n),p=Eo(p,i),y=$o(y,n),m=$o(m,i),a&&r.length>2){const t=r[2];u=Eo(u,t),c=$o(c,t)}if(l&&r.length>o){const t=r[o];h=Eo(u,t),d=$o(c,t)}}return i?(u=u||0,c=c||0,s?(h=h||0,d=d||0,t[0]=f,t[1]=p,t[2]=u,t[3]=h,t[4]=y,t[5]=m,t[6]=c,t[7]=d,t):(t[0]=f,t[1]=p,t[2]=u,t[3]=y,t[4]=m,t[5]=c,t)):s?(h=h||0,d=d||0,t[0]=f,t[1]=p,t[2]=h,t[3]=y,t[4]=m,t[5]=d,t):(t[0]=f,t[1]=p,t[2]=y,t[3]=m,t)}const Lo=[];function Vo(t,e,r,n){return{xmin:t,ymin:e,xmax:r,ymax:n}}function Go(t,e,r,n,i,s){return{xmin:t,ymin:e,zmin:r,xmax:n,ymax:i,zmax:s}}function qo(t,e,r,n,i,s){return{xmin:t,ymin:e,mmin:r,xmax:n,ymax:i,mmax:s}}function Bo(t,e,r,n,i,s,o,l){return{xmin:t,ymin:e,zmin:r,mmin:n,xmax:i,ymax:s,zmax:o,mmax:l}}function Wo(t,e=!1,r=!1){return e?r?Bo(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):Go(t[0],t[1],t[2],t[3],t[4],t[5]):r?qo(t[0],t[1],t[2],t[3],t[4],t[5]):Vo(t[0],t[1],t[2],t[3])}function Ho(t){return t?void 0!==(e=t).xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax?t:function(t){return void 0!==t.x&&void 0!==t.y}(t)?function(t){const{x:e,y:r,z:n,m:i}=t,s=null!=i;return null!=n?s?Bo(e,r,n,i,e,r,n,i):Go(e,r,n,e,r,n):s?qo(e,r,i,e,r,i):Vo(e,r,e,r)}(t):function(t){return void 0!==t.rings}(t)?Jo(t):function(t){return void 0!==t.paths}(t)?Yo(t):function(t){return void 0!==t.points}(t)?function(t){const{hasZ:e,hasM:r,points:n}=t;return Wo(Uo(Lo,n,e,r),e,r)}(t):null:null;var e}function Jo(t){const{hasZ:e,hasM:r,rings:n}=t,i=zo(Lo,n,e,r);return i?Wo(i,e,r):null}function Yo(t){const{hasZ:e,hasM:r,paths:n}=t,i=zo(Lo,n,e,r);return i?Wo(i,e,r):null}var Qo;function Zo(t){return!Array.isArray(t[0])}let Ko=Qo=class extends bs{constructor(...t){super(...t),this.rings=[],this.type="polygon"}static fromExtent(t){const e=t.clone().normalize(),r=t.spatialReference;let n=!1,i=!1;e.map((t=>{t.hasZ&&(n=!0),t.hasM&&(i=!0)}));const s={rings:e.map((function(t){const e=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]];if(n&&t.hasZ){const r=t.zmin+.5*(t.zmax-t.zmin);for(let t=0;t<e.length;t++)e[t].push(r)}if(i&&t.hasM){const r=t.mmin+.5*(t.mmax-t.mmin);for(let t=0;t<e.length;t++)e[t].push(r)}return e})),spatialReference:r};return n&&(s.hasZ=!0),i&&(s.hasM=!0),new Qo(s)}normalizeCtorArgs(t,e){let r,n,i=null,s=null;return t&&!Array.isArray(t)?(i=t.rings?t.rings:null,e||(t.spatialReference?e=t.spatialReference:t.rings||(e=t)),r=t.hasZ,n=t.hasM):i=t,i=i||[],i.length&&i[0]&&null!=i[0][0]&&"number"==typeof i[0][0]&&(i=[i]),s=i[0]&&i[0][0],s&&(void 0===r&&void 0===n?(r=s.length>2,n=!1):void 0===r?r=!n&&s.length>3:void 0===n&&(n=!r&&s.length>3)),{rings:i,spatialReference:e=e||ms.WGS84,hasZ:r,hasM:n}}get centroid(){const t=function(t){return t?function(t,e){if(!t||!t.length)return null;const r=[],n=[],i=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let r=0,s=t.length;r<s;r++){const s=Io(t[r],e,i);s&&n.push(s)}if(n.sort(((t,r)=>{let n=t[2]-r[2];return 0===n&&e&&(n=t[4]-r[4]),n})),n.length){let t=6*n[0][2];r[0]=n[0][0]/t,r[1]=n[0][1]/t,e&&(t=6*n[0][4],r[2]=0!==t?n[0][3]/t:0),(r[0]<i[0]||r[0]>i[1]||r[1]<i[2]||r[1]>i[3]||e&&(r[2]<i[4]||r[2]>i[5]))&&(r.length=0)}if(!r.length){const n=t[0]&&t[0].length?function(t,e){const r=e?[0,0,0]:[0,0],n=e?[0,0,0]:[0,0];let i=0,s=0,o=0,l=0;for(let a=0,u=t.length;a<u-1;a++){const u=t[a],c=t[a+1];if(u&&c){r[0]=u[0],r[1]=u[1],n[0]=c[0],n[1]=c[1],e&&u.length>2&&c.length>2&&(r[2]=u[2],n[2]=c[2]);const t=jo(r,n);if(t){i+=t;const r=Oo(u,c);s+=t*r[0],o+=t*r[1],e&&r.length>2&&(l+=t*r[2])}}}return i>0?e?[s/i,o/i,l/i]:[s/i,o/i]:t.length?t[0]:null}(t[0],e):null;if(!n)return null;r[0]=n[0],r[1]=n[1],e&&n.length>2&&(r[2]=n[2])}return r}(t.rings,t.hasZ):null}(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new qs;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}get extent(){const{spatialReference:t}=this,e=Jo(this);if(!e)return null;const r=new bo(e);return r.spatialReference=t,r}get isSelfIntersecting(){return function(t){for(let e=0;e<t.length;e++){const r=t[e];for(let n=0;n<r.length-1;n++){const i=r[n],s=r[n+1];for(let r=e+1;r<t.length;r++)for(let e=0;e<t[r].length-1;e++){const n=t[r][e],o=t[r][e+1];if(fo(i,s,n,o,co)&&!(co[0]===i[0]&&co[1]===i[1]||co[0]===n[0]&&co[1]===n[1]||co[0]===s[0]&&co[1]===s[1]||co[0]===o[0]&&co[1]===o[1]))return!0}}const n=r.length;if(!(n<=4))for(let t=0;t<n-3;t++){let e=n-1;0===t&&(e=n-2);const i=r[t],s=r[t+1];for(let n=t+2;n<e;n++){const t=r[n],e=r[n+1];if(fo(i,s,t,e,co)&&!(co[0]===i[0]&&co[1]===i[1]||co[0]===t[0]&&co[1]===t[1]||co[0]===s[0]&&co[1]===s[1]||co[0]===e[0]&&co[1]===e[1]))return!0}}}return!1}(this.rings)}writeRings(t,e){e.rings=w(this.rings)}addRing(t){if(!t)return;this.clearCache();const e=this.rings,r=e.length;if(Zo(t)){const n=[];for(let e=0,r=t.length;e<r;e++)n[e]=t[e].toArray();e[r]=n}else e[r]=t.concat();return this}clone(){const t=new Qo;return t.spatialReference=this.spatialReference,t.rings=w(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}contains(t){return!!t&&(_s(t,this.spatialReference)&&(t=Es(t,this.spatialReference)),function(t,e){return Bs[1]=e.y,Bs[0]=e.x,Zs(t,Bs)}(this,t))}isClockwise(t){let e;return e=Zo(t)?t.map((t=>this.hasZ?this.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])):t,ko(e,this.hasM,this.hasZ)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const r=this.rings[t][e],n=this.hasZ,i=this.hasM;return n&&!i?new qs(r[0],r[1],r[2],void 0,this.spatialReference):i&&!n?new qs(r[0],r[1],void 0,r[2],this.spatialReference):n&&i?new qs(r[0],r[1],r[2],r[3],this.spatialReference):new qs(r[0],r[1],this.spatialReference)}insertPoint(t,e,r){return this._validateInputs(t,e,!0)?(this.clearCache(),go(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[t].splice(e,0,r),this):this}removePoint(t,e){return this._validateInputs(t,e)?(this.clearCache(),new qs(this.rings[t].splice(e,1)[0],this.spatialReference)):null}removeRing(t){if(!this._validateInputs(t,null))return null;this.clearCache();const e=this.rings.splice(t,1)[0],r=this.spatialReference;return e.map((t=>new qs(t,r)))}setPoint(t,e,r){return this._validateInputs(t,e)?(this.clearCache(),go(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[t][e]=r,this):this}_validateInputs(t,e,r=!1){if(null==t||t<0||t>=this.rings.length)return!1;if(null!=e){const n=this.rings[t];if(r&&(e<0||e>n.length))return!1;if(!r&&(e<0||e>=n.length))return!1}return!0}toJSON(t){return this.write(null,t)}};n([Lt({dependsOn:["hasM","hasZ","rings"],autoTracked:!1})],Ko.prototype,"cache",void 0),n([Lt({readOnly:!0,dependsOn:["cache"],autoTracked:!1})],Ko.prototype,"centroid",null),n([Lt({readOnly:!0,dependsOn:["cache"],autoTracked:!1})],Ko.prototype,"extent",null),n([Lt({readOnly:!0,dependsOn:["cache"],autoTracked:!1})],Ko.prototype,"isSelfIntersecting",null),n([Lt({type:[[[Number]]],json:{write:{isRequired:!0}}})],Ko.prototype,"rings",void 0),n([be("rings")],Ko.prototype,"writeRings",null),Ko=Qo=n([ve("esri.geometry.Polygon")],Ko),Ko.prototype.toJSON.isDefaultToJSON=!0;var Xo,tl=Ko;let el=Xo=class extends bs{constructor(...t){super(...t),this.paths=[],this.type="polyline"}normalizeCtorArgs(t,e){let r,n,i=null,s=null;return t&&!Array.isArray(t)?(i=t.paths?t.paths:null,e||(t.spatialReference?e=t.spatialReference:t.paths||(e=t)),r=t.hasZ,n=t.hasM):i=t,i=i||[],i.length&&i[0]&&null!=i[0][0]&&"number"==typeof i[0][0]&&(i=[i]),s=i[0]&&i[0][0],s&&(void 0===r&&void 0===n?(r=s.length>2,n=!1):void 0===r?r=!n&&s.length>3:void 0===n&&(n=!r&&s.length>3)),{paths:i,spatialReference:e=e||ms.WGS84,hasZ:r,hasM:n}}get extent(){const{spatialReference:t}=this,e=Yo(this);if(!e)return null;const r=new bo(e);return r.spatialReference=t,r}writePaths(t,e){e.paths=w(this.paths)}addPath(t){if(!t)return;this.clearCache();const e=this.paths,r=e.length;if(function(t){return!Array.isArray(t[0])}(t)){const n=[];for(let e=0,r=t.length;e<r;e++)n[e]=t[e].toArray();e[r]=n}else e[r]=t.concat();return this}clone(){const t=new Xo;return t.spatialReference=this.spatialReference,t.paths=w(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const r=this.paths[t][e],n=this.hasZ,i=this.hasM;return n&&!i?new qs(r[0],r[1],r[2],void 0,this.spatialReference):i&&!n?new qs(r[0],r[1],void 0,r[2],this.spatialReference):n&&i?new qs(r[0],r[1],r[2],r[3],this.spatialReference):new qs(r[0],r[1],this.spatialReference)}insertPoint(t,e,r){return this._validateInputs(t,e,!0)?(this.clearCache(),go(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[t].splice(e,0,r),this):this}removePath(t){if(!this._validateInputs(t,null))return null;this.clearCache();const e=this.paths.splice(t,1)[0],r=this.spatialReference;return e.map((t=>new qs(t,r)))}removePoint(t,e){return this._validateInputs(t,e)?(this.clearCache(),new qs(this.paths[t].splice(e,1)[0],this.spatialReference)):null}setPoint(t,e,r){return this._validateInputs(t,e)?(this.clearCache(),go(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[t][e]=r,this):this}_validateInputs(t,e,r=!1){if(null==t||t<0||t>=this.paths.length)return!1;if(null!=e){const n=this.paths[t];if(r&&(e<0||e>n.length))return!1;if(!r&&(e<0||e>=n.length))return!1}return!0}toJSON(t){return this.write(null,t)}};n([Lt({dependsOn:["hasM","hasZ","paths"],autoTracked:!1})],el.prototype,"cache",void 0),n([Lt({readOnly:!0,dependsOn:["cache"],autoTracked:!1})],el.prototype,"extent",null),n([Lt({type:[[[Number]]],json:{write:{isRequired:!0}}})],el.prototype,"paths",void 0),n([be("paths")],el.prototype,"writePaths",null),el=Xo=n([ve("esri.geometry.Polyline")],el),el.prototype.toJSON.isDefaultToJSON=!0;var rl=el;class nl{constructor(t,e={ignoreUnknown:!1}){this.jsonToAPI=t,this.options=e,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this.invertMap(t),this.apiValues=this.getKeysSorted(this.apiToJSON),this.jsonValues=this.getKeysSorted(this.jsonToAPI),this.read=t=>this.fromJSON(t),this.write=(t,e,r)=>{const n=this.toJSON(t);void 0!==n&&(e[r]=n)},this.write.isJSONMapWriter=!0}toJSON(t){return this.apiToJSON.hasOwnProperty(t)?this.apiToJSON[t]:this.options.ignoreUnknown?void 0:t}fromJSON(t){return this.jsonToAPI.hasOwnProperty(t)?this.jsonToAPI[t]:this.options.ignoreUnknown?void 0:t}invertMap(t){const e={};for(const r in t)e[t[r]]=r;return e}getKeysSorted(t){const e=[];for(const r in t)e.push(r);return e.sort(),e}}function il(){return function(t){return new nl(t,{ignoreUnknown:!0})}}const sl=il()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),ol=il()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function ll(t){return void 0!==t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax}function al(t){return void 0!==t.points}function ul(t){return void 0!==t.x&&void 0!==t.y}function cl(t){return void 0!==t.paths}function hl(t){return void 0!==t.rings}function dl(t){return t?t instanceof bs?t:ul(t)?qs.fromJSON(t):cl(t)?rl.fromJSON(t):hl(t)?tl.fromJSON(t):al(t)?Mo.fromJSON(t):ll(t)?bo.fromJSON(t):null:null}function fl(t){return t?ul(t)?"esriGeometryPoint":cl(t)?"esriGeometryPolyline":hl(t)?"esriGeometryPolygon":ll(t)?"esriGeometryEnvelope":al(t)?"esriGeometryMultipoint":null:null}const pl={esriGeometryPoint:qs,esriGeometryPolyline:rl,esriGeometryPolygon:tl,esriGeometryEnvelope:bo,esriGeometryMultipoint:Mo};function yl(t){return t&&pl[t]||null}const ml={base:bs,key:"type",typeMap:{extent:bo,multipoint:Mo,point:qs,polyline:rl,polygon:tl}};let vl;async function wl(){return vl||(vl=(async()=>{const t=await import("./p-aa6688d1.js").then((function(t){return t.aq}));return await t.arcade.load(),{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})()),vl}yt(ml);const bl=(t,e,r)=>Sl.create(t,e,r,null,["$feature"]),gl=(t,e,r)=>Sl.create(t,e,r,null,["$feature","$view"]);class Sl{constructor(t,e,r,n,i,s,o,l){this.script=t,this.evaluate=i,this.fields=o,this._syntaxTree=n,this._arcade=e,this._arcadeDictionary=r,this._arcadeFeature=s,this._spatialReference=l,this._referencesGeometry=e.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,e,r,n,i,s){const{arcade:o,Feature:l,Dictionary:a}=await wl(),u=ms.fromJSON(e),c=o.parseScript(t,s),h=i.reduce(((t,e)=>({...t,[e]:null})),{});let d=null;x(n)&&(d=new a(n),d.immutable=!0,h.$config=null);const f=o.scriptUsesGeometryEngine(c)&&o.enableGeometrySupport(),p=o.scriptUsesFeatureSet(c)&&o.enableFeatureSetSupport(),y=o.scriptIsAsync(c)&&o.enableAsyncSupport(),m={vars:h,spatialReference:u,useAsync:!!y},v=new a;v.immutable=!1,v.setField("scale",0);const w=o.compileScript(c,m);return await $r([f,p,y]),new Sl(t,o,a,c,(t=>("$view"in t&&t.$view&&(v.setField("scale",t.$view.scale),t.$view=v),d&&(t.$config=d),w({vars:t,spatialReference:u}))),new l,r,u)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(t){return this._arcadeFeature.repurposeFromAdapter(t,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(t){return this._arcade.referencesMember(this._syntaxTree,t)}referencesFunction(t){return this._arcade.referencesFunction(this._syntaxTree,t)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(t){return this._arcade.extractFieldLiterals(this._syntaxTree,t)}}function xl(t,e={ignoreUnknown:!0}){const r=t instanceof nl?t:new nl(t,e),n={type:null!=e&&e.ignoreUnknown?r.apiValues:String,readOnly:null==e?void 0:e.readOnly,json:{type:r.jsonValues,read:(null==e||!e.readOnly)&&{reader:r.read},write:{writer:r.write}}};return void 0!==(null==e?void 0:e.default)&&(n.json.default=e.default),Lt(n)}const Ml=new nl({inherited:"inherited",codedValue:"coded-value",range:"range"});let jl=class extends Yi{constructor(t){super(t),this.name=null,this.type=null}};n([Lt({type:String,json:{write:!0}})],jl.prototype,"name",void 0),n([xl(Ml)],jl.prototype,"type",void 0),jl=n([ve("esri.layers.support.Domain")],jl);var Ol,kl=jl;let Il=Ol=class extends Yi{constructor(t){super(t),this.name=null,this.code=null}clone(){return new Ol({name:this.name,code:this.code})}};n([Lt({type:String,json:{write:!0}})],Il.prototype,"name",void 0),n([Lt({type:[String,Number],json:{write:!0}})],Il.prototype,"code",void 0),Il=Ol=n([ve("esri.layers.support.CodedValue")],Il);var Al,Cl=Il;let Tl=Al=class extends kl{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let e=null;if(this.codedValues){const r=String(t);this.codedValues.some((t=>(String(t.code)===r&&(e=t.name),!!e)))}return e}clone(){return new Al({codedValues:w(this.codedValues),name:this.name})}};n([Lt({type:[Cl],json:{write:!0}})],Tl.prototype,"codedValues",void 0),n([xl({codedValue:"coded-value"})],Tl.prototype,"type",void 0),Tl=Al=n([ve("esri.layers.support.CodedValueDomain")],Tl);var Nl,Pl=Tl;let _l=Nl=class extends kl{constructor(t){super(t),this.type="inherited"}clone(){return new Nl}};n([xl({inherited:"inherited"})],_l.prototype,"type",void 0),_l=Nl=n([ve("esri.layers.support.InheritedDomain")],_l);var El,$l=_l;let Dl=El=class extends kl{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new El({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};n([Lt({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(t,e,r){e[r]=[this.minValue||0,t]}}}})],Dl.prototype,"maxValue",void 0),n([Lt({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[0]},write:{target:"range",writer(t,e,r){e[r]=[t,this.maxValue||0]}}}})],Dl.prototype,"minValue",void 0),n([xl({range:"range"})],Dl.prototype,"type",void 0),Dl=El=n([ve("esri.layers.support.RangeDomain")],Dl);var Rl,zl=Dl;!function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"}(Rl||(Rl={}));const Fl={key:"type",base:kl,typeMap:{range:zl,"coded-value":Pl,inherited:$l}};function Ul(t){if(!t||!t.type)return null;switch(t.type){case"range":return zl.fromJSON(t);case"codedValue":return Pl.fromJSON(t);case"inherited":return $l.fromJSON(t)}return null}const Ll=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Vl=["field","normalizationField"];function Gl(t,e){if(null!=t&&null!=e)for(const r of Array.isArray(t)?t:[t])if(ql(Ll,r,e),"visualVariables"in r&&r.visualVariables)for(const t of r.visualVariables)ql(Vl,t,e)}function ql(t,e,r){if(t)for(const n of t){const t=R(n,e),i=t&&"function"!=typeof t&&Ql(r,t);i&&z(n,i.name,e)}}function Bl(t,e){if(null!=t&&null!=e)if("startField"in t){const r=Ql(e,t.startField),n=Ql(e,t.endField);t.startField=r&&r.name||null,t.endField=n&&n.name||null}else{const r=Ql(e,t.startTimeField),n=Ql(e,t.endTimeField);t.startTimeField=r&&r.name||null,t.endTimeField=n&&n.name||null}}const Wl=new Set;function Hl(t,e){return t&&e?(Wl.clear(),Jl(Wl,t,e),Array.from(Wl).sort()):[]}function Jl(t,e,r){if(r)if(e&&e.length)if(r.includes("*"))for(const{name:r}of e)t.add(r);else for(const n of r)Yl(t,e,n);else{if(r.includes("*"))return t.clear(),void t.add("*");for(const e of r)t.add(e)}}function Yl(t,e,r){if(e&&e.length){const n=Ql(e,r);n&&t.add(n.name)}else"string"==typeof r&&t.add(r)}function Ql(t,e){if("string"!=typeof e)return null;if(null!=t){e=e.toLowerCase();for(const r of t)if(r&&r.name.toLowerCase()===e)return r}return null}function Zl(t,e){if(!t||!e||"string"!=typeof e)return!1;e=e.toLowerCase();for(const r of t)if(r&&r.name.toLowerCase()===e)return!0;return!1}async function Kl(t,e,r){if(!r)return;const{arcadeUtils:n}=await wl(),i=n.extractFieldNames(r);for(const r of i)Yl(t,e,r)}function Xl({displayField:t,fields:e}){return t||(e&&e.length?ta(e,"name-or-title")||ta(e,"unique-identifier")||ta(e,"type-or-category")||function(t){for(const e of t){if(!e||!e.name)continue;const t=e.name.toLowerCase();if(t.indexOf("name")>-1||t.indexOf("title")>-1)return e.name}return null}(e):null)}function ta(t,e){for(const r of t)if(r&&r.valueType&&r.valueType===e)return r.name;return null}function ea(t){const e=t.defaultValue;return void 0!==e&&ua(t,e)?e:t.nullable?null:void 0}function ra(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function na(t){return null===t||ra(t)}const ia="isInteger"in Number?Number.isInteger:t=>"number"==typeof t&&isFinite(t)&&Math.floor(t)===t;function sa(t){return null===t||ia(t)}function oa(t){return null!=t&&"string"==typeof t}function la(t){return null===t||oa(t)}function aa(){return!0}function ua(t,e){let r;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=t.nullable?sa:ia;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=t.nullable?na:ra;break;case"string":case"esriFieldTypeString":r=t.nullable?la:oa;break;default:r=aa}return 1===arguments.length?r:r(e)}const ca=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function ha(t){return null!=t&&ca.has(t.type)}function da(t){return null!=t&&("string"===t.type||"esriFieldTypeString"===t.type)}var fa,pa;function ya(t){return null==t||"number"==typeof t&&isNaN(t)?null:t}function ma(t,e){return t.nullable&&null===e?null:ha(t)&&!function(t,e){const r="string"==typeof t?va(t):t;return!!r&&(r.isInteger?ia(e)&&e>=r.min&&e<=r.max:e>=r.min&&e<=r.max)}(t.type,Number(e))?fa.OUT_OF_RANGE:ua(t,e)?t.domain?function(t,e){switch(t.type){case"range":{const r="range"in t?t.range[1]:t.maxValue;if(+e<("range"in t?t.range[0]:t.minValue)||+e>r)return Rl.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==t.codedValues||t.codedValues.every((t=>null==t||t.code!==e)))return Rl.INVALID_CODED_VALUE}return null}(t.domain,e):null:pa.INVALID_TYPE}function va(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return wa;case"esriFieldTypeInteger":case"integer":return ba;case"esriFieldTypeSingle":case"single":return ga;case"esriFieldTypeDouble":case"double":return Sa}}(fa||(fa={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",(pa||(pa={})).INVALID_TYPE="type-validation-error::invalid-type";const wa={min:-32768,max:32767,isInteger:!0},ba={min:-2147483648,max:2147483647,isInteger:!0},ga={min:-34e37,max:12e37,isInteger:!1},Sa={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function xa(t,e,r){switch(t){case Rl.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case Rl.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case pa.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case fa.OUT_OF_RANGE:{const{min:t,max:n}=va(e.type);return`Value ${r} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${t} to ${n}`}}}function Ma(t,e){return!function(t,e,r){if(!e||!e.attributes||!t){if(x(r))for(const e of t)r.add(e);return!0}const n=e.attributes;let i=!1;for(const e of t)if(!(e in n)){if(i=!0,!x(r))break;r.add(e)}return i}(t,e,null)}const ja={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,5,10]};function Oa(t,e,r){r<0&&++r,r>1&&--r;const n=6*r;return n<1?t+(e-t)*n:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}const ka=new Float32Array(1);function Ia(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function Aa(t,e,r){return t<e?e:t>r?r:t}function Ca(t,e,r){return Math.min(Math.max(t,e),r)}function Ta(t){return 0==(t&t-1)}function Na(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}const Pa=Math.log2||function(t){return Math.log(t)/Math.LN2};function _a(t,e,r){return t+(e-t)*r}function Ea(t){return t*Math.PI/180}function $a(t){return 180*t/Math.PI}function Da(t){return Math.acos(Aa(t,-1,1))}function Ra(t){return Math.asin(Aa(t,-1,1))}function za(t){return Aa(tt(t),0,255)}function Fa(t,e,r){return t=Number(t),isNaN(t)?r:t<e?e:t>r?r:t}ka[0]=34028234663852886e22;class Ua{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}static blendColors(t,e,r,n=new Ua){return n.r=Math.round(t.r+(e.r-t.r)*r),n.g=Math.round(t.g+(e.g-t.g)*r),n.b=Math.round(t.b+(e.b-t.b)*r),n.a=t.a+(e.a-t.a)*r,n._sanitize()}static fromRgb(t,e){const r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const t=r[2].split(/\s*,\s*/),n=r[1];if("rgb"===n&&3===t.length||"rgba"===n&&4===t.length){const r=t[0];if("%"===r.charAt(r.length-1)){const r=t.map((t=>2.56*parseFloat(t)));return 4===t.length&&(r[3]=parseFloat(t[3])),Ua.fromArray(r,e)}return Ua.fromArray(t.map((t=>parseFloat(t))),e)}if("hsl"===n&&3===t.length||"hsla"===n&&4===t.length)return Ua.fromArray(function(t,e,r,n=1){const i=(t%360+360)%360/360,s=r<=.5?r*(e+1):r+e-r*e,o=2*r-s;return[Math.round(256*Oa(o,s,i+1/3)),Math.round(256*Oa(o,s,i)),Math.round(256*Oa(o,s,i-1/3)),n]}(parseFloat(t[0]),parseFloat(t[1])/100,parseFloat(t[2])/100,parseFloat(t[3])),e)}return null}static fromHex(t,e=new Ua){const r=4===t.length?4:8,n=(1<<r)-1;let i=Number("0x"+t.substr(1));return isNaN(i)?null:(["b","g","r"].forEach((t=>{const s=i&n;i>>=r,e[t]=4===r?17*s:s})),e.a=1,e)}static fromArray(t,e=new Ua){return e._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(e.a)&&(e.a=1),e._sanitize()}static fromString(t,e){const r=function(t){var e;return null!=(e=ja[t])?e:null}(t);return r&&Ua.fromArray(r,e)||Ua.fromRgb(t,e)||Ua.fromHex(t,e)}static fromJSON(t){return t&&new Ua([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return x(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return x(t)?[t.r/255,t.g/255,t.b/255,null!=t.a?t.a:1]:null}get isBright(){return.299*this.r+.587*this.g+.114*this.b>=127}setColor(t){if("string"==typeof t)Ua.fromString(t,this);else if(Array.isArray(t))Ua.fromArray(t,this);else{var e,r,n,i;this._set(null!=(e=t.r)?e:0,null!=(r=t.g)?r:0,null!=(n=t.b)?n:0,null!=(i=t.a)?i:1),t instanceof Ua||this._sanitize()}return this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),e=this.g.toString(16),r=this.b.toString(16);return`#${t.length<2?"0"+t:t}${e.length<2?"0"+e:e}${r.length<2?"0"+r:r}`}toCss(t=!1){const e=this.r+", "+this.g+", "+this.b;return t?`rgba(${e}, ${this.a})`:`rgb(${e})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=0){const e=za(this.r),r=za(this.g),n=za(this.b);return 0===t||1!==this.a?[e,r,n,za(255*this.a)]:[e,r,n]}clone(){return new Ua(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}_sanitize(){return this.r=Math.round(Fa(this.r,0,255)),this.g=Math.round(Fa(this.g,0,255)),this.b=Math.round(Fa(this.b,0,255)),this.a=Fa(this.a,0,1),this}_set(t,e,r,n){this.r=t,this.g=e,this.b=r,this.a=n}}Ua.prototype.declaredClass="esri.Color";const La=new nl({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Va=0,Ga=class extends Yi{constructor(t){super(t),this.id="sym"+Va++,this.type=null}set color(t){this._set("color",t)}readColor(t){return t&&null!=t[0]?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,e){}hash(){return JSON.stringify(this.toJSON())}clone(){}};n([Lt({type:La.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:La.write}}})],Ga.prototype,"type",void 0),n([Lt({type:Ua,value:new Ua([0,0,0,1]),json:{write:{allowNull:!0}}})],Ga.prototype,"color",null),n([vs("color")],Ga.prototype,"readColor",null),Ga=n([ve("esri.symbols.Symbol")],Ga);var qa,Ba=Ga;let Wa=qa=class extends Ba{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){if(t)for(const r in t)e[r]=t[r]}async collectRequiredFields(t,e){if("CIMSymbolReference"===this.data.type){const r=this.data.primitiveOverrides;if(r){const n=r.map((r=>Kl(t,e,r.valueExpressionInfo.expression)));await $r(n)}}}clone(){return new qa({data:w(this.data)})}hash(){return B(JSON.stringify(this.data)).toString()}};n([Lt({json:{write:!1}})],Wa.prototype,"color",void 0),n([Lt({json:{write:!0}})],Wa.prototype,"data",void 0),n([vs("data",["symbol"])],Wa.prototype,"readData",null),n([be("data")],Wa.prototype,"writeData",null),n([xl({CIMSymbolReference:"cim"},{readOnly:!0})],Wa.prototype,"type",void 0),Wa=qa=n([ve("esri.symbols.CIMSymbol")],Wa);var Ha=Wa;const Ja="4.18",Ya={request:(t,e)=>Promise.resolve().then((function(){return mu})).then((({default:r})=>{const n=t.options||{};return n.responseType="array-buffer",n.signal=null==e?void 0:e.signal,r(t.url,n)})).then((t=>({result:{data:t.data,ssl:t.ssl},transferList:[t.data]})))};let Qa,Za;function Ka(t){Qa=t}function Xa(t){const e=Qa&&Qa.findCredential(t);return e&&e.token?gr(t,"token",e.token):t}function tu(t,e,r=!1,n){return Dr(((i,s)=>{if(Lr(n))return void s(eu());let o=()=>{u(),s(new Error(`Unable to load ${e}`))},l=()=>{const e=t;u(),i(e)},a=()=>{if(!t)return;const e=t;u(),e.src="",s(eu())};const u=()=>{c("esri-image-decode")||(t.removeEventListener("error",o),t.removeEventListener("load",l)),o=null,l=null,t=null,x(n)&&n.removeEventListener("abort",a),a=null,r&&URL.revokeObjectURL(e)};x(n)&&n.addEventListener("abort",a),c("esri-image-decode")?t.decode().then(l,o):(t.addEventListener("error",o),t.addEventListener("load",l))}))}function eu(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}async function ru(t,e){const r=ir(t),n=nr(t);n||r||(t=Xe(t));const s={url:t,requestOptions:{...e}};let o=function(t){const e=e=>null==e||e instanceof RegExp&&e.test(t)||"string"==typeof e&&t.startsWith(e),r=xe.interceptors;if(r)for(const t of r)if(Array.isArray(t.urls)){if(t.urls.some(e))return t}else if(e(t.urls))return t;return null}(t);if(o){const t=await async function(t,e){if(null!=t.responseData)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let r,n;try{n=await t.before(e)}catch(t){r=uu("request:interceptor",t,e)}if((n instanceof Error||n instanceof ge)&&(r=uu("request:interceptor",n,e)),r)throw t.error&&t.error(r),r;return n}}(o,s);if(null!=t)return{data:t,getHeader:au,requestOptions:s.requestOptions,url:s.url};o.after||o.error||(o=null)}if(t=s.url,"image"===(e=s.requestOptions).responseType){if(c("host-webworker")||c("host-node"))throw uu("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s)}else if(r)throw uu("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+e.responseType),s);if("head"===e.method){if(e.body)throw uu("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(r||n)throw uu("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await async function(){c("host-webworker")?Za||(Za=await import("./p-239f49f0.js")):ru._abortableFetch||(ru._abortableFetch=i.fetch.bind(i))}(),Za)return Za.execute(t,e);const l=zr();qr(e,(()=>l.abort()));const a={controller:l,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:o,params:s,redoRequest:!1,useIdentity:nu.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},u=await async function(t){let e,r;await async function(t){const e=t.params.url,r=t.params.requestOptions,n=t.controller.signal,s=r.body;let o=null,l=null,a=null;iu&&"HTMLFormElement"in i&&(s instanceof FormData?o=s:s instanceof HTMLFormElement&&(l=s,o=new FormData(l))),"string"==typeof s&&(a=s),t.fetchOptions={cache:r.cacheBust&&!ru._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:"head"===r.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:n},(o||a)&&(t.fetchOptions.body=o||a),"anonymous"===r.authMode&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||r.query&&r.query.token||o&&o.get&&o.get("token")||l&&l.elements.token);const u=er(e,!0);if(u&&!t.hasToken&&W.apiKey&&u.endsWith(".arcgis.com")&&"elevation3d.arcgis.com"!==u&&"js.arcgis.com"!==u&&"jsdev.arcgis.com"!==u&&"jsqa.arcgis.com"!==u&&(r.query||(r.query={}),r.query.token=W.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!hu(e)&&!Lr(n)){let i;"immediate"===r.authMode?(await cu(),i=await Qa.getCredential(e,{signal:n}),t.credential=i):"no-prompt"===r.authMode?(await cu(),i=await Qa.getCredential(e,{prompt:!1,signal:n}).catch((()=>{})),t.credential=i):Qa&&(i=Qa.findCredential(e)),i&&(t.credentialToken=i.token,t.useSSL=!!i.ssl)}}(t);try{do{[e,r]=await du(t)}while(!await pu(t,e,r))}catch(r){const n=uu("request:server",r,t.params,e);throw n.details.ssl=t.useSSL,t.interceptor&&t.interceptor.error&&t.interceptor.error(n),n}const n=t.params.url;if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(n)&&!t.hasToken&&!t.credentialToken&&r&&r.user&&r.user.username&&!Ye(n)){const t=er(n,!0);t&&nu.trustedServers.push(t)}const s=t.credential;if(s&&Qa){const t=Qa.findServerInfo(s.server);let e=t&&t.owningSystemUrl;if(e){e=e.replace(/\/?$/,"/sharing");const t=Qa.findCredential(e,s.userId);t&&-1===Qa._getIdenticalSvcIdx(e,t)&&t.resources.unshift(e)}}return{data:r,getHeader:e?t=>e.headers.get(t):au,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}(a);return o&&o.after&&o.after(u),u}c("host-webworker")||(c("edge")||c("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");const nu=W.request,iu="FormData"in i,su=[499,498,403,401],ou=["COM_0056","COM_0057","SB_0008"],lu=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],au=()=>null;function uu(t,e,r,n){let i="Error";const s={url:r.url,requestOptions:r.requestOptions,getHeader:au,ssl:!1};if(e instanceof ge)return e.details?(e.details=w(e.details),e.details.url=r.url,e.details.requestOptions=r.requestOptions):e.details=s,e;if(e){const t=n&&(t=>n.headers.get(t)),r=n&&n.status,o=e.message;o&&(i=o),t&&(s.getHeader=t),s.httpStatus=(null!=e.httpCode?e.httpCode:e.code)||r||0,s.subCode=e.subcode,s.messageCode=e.messageCode,s.messages="string"==typeof e.details?[e.details]:e.details}return Hr(e)?Rr():new ge(t,i,s)}async function cu(){Qa||await import("./p-031e75bf.js")}function hu(t){return lu.some((e=>e.test(t)))}async function du(t){let e=t.params.url;const r=t.params.requestOptions,n=t.fetchOptions,i=nr(e)||ir(e),s=r.responseType||"json",o=i?0:null!=r.timeout?r.timeout:nu.timeout;let l=!1;if(!i){t.useSSL&&(e=hr(e)),r.cacheBust&&"default"===n.cache&&(e=gr(e,"request.preventCache",Date.now()));let i={...r.query};t.credentialToken&&(i.token=t.credentialToken);let s=Fe(i);c("esri-url-encodes-apostrophe")&&(s=s.replace(/'/g,"%27"));const o=e.length+1+s.length;let a;l="post"===r.method||!!r.body||o>nu.maxUrlLength;const u=r.useProxy||!!Be(e);if(u){const t=Ue(e);a=t.path,!l&&a.length+1+o>nu.maxUrlLength&&(l=!0),t.query&&(i={...t.query,...i})}if("HEAD"===n.method&&(l||u)){if(l){if(o>nu.maxUrlLength)throw uu("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params);throw uu("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params)}if(u)throw uu("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(l?(n.method="POST",r.body?e=Sr(e,i):(n.body=Fe(i),n.headers["Content-Type"]="application/x-www-form-urlencoded")):e=Sr(e,i),u&&(t.useProxy=!0,e=`${a}?${e}`),i.token&&iu&&n.body instanceof FormData){const t=n.body;t.set?t.set("token",i.token):t.append("token",i.token)}if(r.hasOwnProperty("withCredentials"))t.withCredentials=r.withCredentials;else if(Ye(e))t.withCredentials=!0;else if(Qa){const r=Qa.findServerInfo(e);r&&r.webTierAuth&&(t.withCredentials=!0)}t.withCredentials&&(n.credentials="include")}let a,u,h=0,d=!1;o>0&&(h=setTimeout((()=>{d=!0,t.controller.abort()}),o));try{if("image"!==r.responseType||"default"!==n.cache||"GET"!==n.method||l||function(t){if(t)for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0;return!1}(r.headers)||!i&&!t.useProxy&&nu.proxyUrl&&!function(t){const e=er(t);return!e||e.endsWith(".arcgis.com")||-1!==ru._corsServers.indexOf(e)||Ye(e)}(e)){if(a=await ru._abortableFetch(e,n),t.useProxy||function(t){if(nr(t)||ir(t))return;const e=er(t);e&&-1===ru._corsServers.indexOf(e)&&ru._corsServers.push(e)}(e),a.ok&&"HEAD"!==n.method){switch(s){case"array-buffer":u=await a.arrayBuffer();break;case"blob":case"image":u=await a.blob();break;default:u=await a.text()}if(h&&(clearTimeout(h),h=0),"json"===s||"xml"===s||"document"===s)if(u)switch(s){case"json":u=JSON.parse(u);break;case"xml":u=fu(u,"application/xml");break;case"document":u=fu(u,"text/html")}else u=null;if(u){if("array-buffer"===s||"blob"===s){const t=a.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(t)&&u["blob"===s?"size":"byteLength"]<=750)try{const t=await new Response(u).json();t.error&&(u=t)}catch{}}"image"===s&&u instanceof Blob&&(u=await yu(URL.createObjectURL(u),t,!0))}}}else u=await yu(e,t)}catch(n){if("AbortError"===n.name){if(d)throw new Error("Timeout exceeded");throw Rr("Request canceled")}if(!(!a&&n instanceof TypeError&&nu.proxyUrl)||r.body||"post"===r.method||"head"===r.method||t.useProxy)throw n;t.redoRequest=!0,function(t){const e={proxyUrl:t.proxyUrl,urlPrefix:qe(t.urlPrefix)},r=xe.proxyRules,n=e.urlPrefix;let i=r.length;for(let t=0;t<r.length;t++){const e=r[t].urlPrefix;if(0===n.indexOf(e)){if(n.length===e.length)return-1;i=t;break}0===e.indexOf(n)&&(i=t+1)}r.splice(i,0,e)}({proxyUrl:nu.proxyUrl,urlPrefix:pr(De(e).path)})}finally{h&&clearTimeout(h)}return[a,u]}function fu(t,e){let r;try{r=(new DOMParser).parseFromString(t,e)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function pu(t,e,r){var n;if(t.redoRequest)return t.redoRequest=!1,!1;if(!e)return!0;if(!e.ok)throw new Error(`Unable to load ${e.url} status: ${e.status}`);let i,s,o,l;r&&r.error&&(i=g(new Error,r.error)),i&&(s=Number(i.code),o=i.hasOwnProperty("subcode")?Number(i.subcode):null,l=i.messageCode,l=l&&l.toUpperCase());const a=t.params.requestOptions.authMode,u=String(null==(n=t.params.requestOptions.query)?void 0:n.token);if(403===s&&(4===o||i.message&&i.message.toLowerCase().indexOf("ssl")>-1&&-1===i.message.toLowerCase().indexOf("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(t.useIdentity&&("no-prompt"!==a||498===s)&&-1!==su.indexOf(s)&&!hu(t.params.url)&&!u.startsWith("AAPK")&&(403!==s||-1===ou.indexOf(l)&&(null==o||2===o&&t.credentialToken))){await cu();try{const e=await Qa.getCredential(t.params.url,{error:uu("request:server",i,t.params),prompt:"no-prompt"!==a,signal:t.controller.signal,token:t.credentialToken});return t.credential=e,t.credentialToken=e.token,t.useSSL=t.useSSL||e.ssl,!1}catch(e){if("no-prompt"===a)return t.credential=null,t.credentialToken=null,!1;i=e}}if(i)throw i;return!0}function yu(t,e,r=!1){const n=e.controller.signal,i=new Image;return i.crossOrigin=e.withCredentials?"use-credentials":"anonymous",i.alt="",i.src=t,tu(i,t,r,n)}ru._abortableFetch=null,ru._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const mu=Object.freeze({__proto__:null,default:ru});var vu;let wu=vu=class extends Yi{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new vu({minValue:this.minValue,maxValue:this.maxValue})}};n([Lt({type:Number,json:{write:!0}})],wu.prototype,"minValue",void 0),n([Lt({type:Number,json:{write:!0}})],wu.prototype,"maxValue",void 0),wu=vu=n([ve("esri.renderer.support.AuthoringInfoClassBreakInfo")],wu);var bu,gu=wu;let Su=bu=class extends Yi{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new bu({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:w(this.classBreakInfos)})}};n([Lt({type:String,json:{write:!0}})],Su.prototype,"field",void 0),n([Lt({type:String,json:{write:!0}})],Su.prototype,"normalizationField",void 0),n([Lt({type:String,json:{write:!0}})],Su.prototype,"label",void 0),n([Lt({type:[gu],json:{write:!0}})],Su.prototype,"classBreakInfos",void 0),Su=bu=n([ve("esri.renderers.support.AuthoringInfoFieldInfo")],Su);var xu,Mu=Su;const ju=new nl({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),Ou=new nl({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),ku={key:t=>"number"==typeof t?"number":"string",typeMap:{number:Number,string:String},base:null},Iu=["high-to-low","above-and-below","centered-on","extremes"],Au=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],Cu=["seconds","minutes","hours","days","months","years"];let Tu=xu=class extends Yi{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return"string"==typeof t||"number"==typeof t?t:null}castStartTime(t){return"string"==typeof t||"number"==typeof t?t:null}get style(){return"color"===this.type?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new xu({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};n([Lt({types:ku,json:{write:!0}})],Tu.prototype,"endTime",void 0),n([Ms("endTime")],Tu.prototype,"castEndTime",null),n([Lt({type:String,json:{write:!0}})],Tu.prototype,"field",void 0),n([Lt({type:Number,json:{write:!0}})],Tu.prototype,"maxSliderValue",void 0),n([Lt({type:Number,json:{write:!0}})],Tu.prototype,"minSliderValue",void 0),n([Lt({types:ku,json:{write:!0}})],Tu.prototype,"startTime",void 0),n([Ms("startTime")],Tu.prototype,"castStartTime",null),n([Lt({type:ju.apiValues,value:null,dependsOn:["type"],json:{type:ju.jsonValues,read:ju.read,write:ju.write}})],Tu.prototype,"style",null),n([Lt({type:Au,value:null,dependsOn:["type"],json:{type:Au,origins:{"web-scene":{type:Iu,write:{writer:(t,e)=>{Iu.indexOf(t)>-1&&(e.theme=t)}}}},write:!0}})],Tu.prototype,"theme",null),n([Lt({type:Ou.apiValues,json:{type:Ou.jsonValues,read:Ou.read,write:Ou.write}})],Tu.prototype,"type",void 0),n([Lt({type:Cu,json:{type:Cu,write:!0}})],Tu.prototype,"units",void 0),Tu=xu=n([ve("esri.renderers.support.AuthoringInfoVisualVariable")],Tu);var Nu=Tu;let Pu=class extends Yi{constructor(t){super(t),this.type=null}};n([Lt({readOnly:!0,json:{read:!1,write:!0}})],Pu.prototype,"type",void 0),Pu=n([ve("esri.tasks.support.ColorRamp")],Pu);var _u,Eu=Pu;let $u=_u=class extends Eu{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new _u({fromColor:w(this.fromColor),toColor:w(this.toColor),algorithm:this.algorithm})}};n([xl({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],$u.prototype,"algorithm",void 0),n([Lt({type:Ua,json:{type:[mt],write:!0}})],$u.prototype,"fromColor",void 0),n([Lt({type:Ua,json:{type:[mt],write:!0}})],$u.prototype,"toColor",void 0),n([Lt({type:["algorithmic"]})],$u.prototype,"type",void 0),$u=_u=n([ve("esri.tasks.support.AlgorithmicColorRamp")],$u);var Du,Ru=$u;let zu=Du=class extends Eu{constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new Du({colorRamps:w(this.colorRamps)})}};n([Lt({type:[Ru],json:{write:!0}})],zu.prototype,"colorRamps",void 0),n([Lt({type:["multipart"]})],zu.prototype,"type",void 0),zu=Du=n([ve("esri.tasks.support.MultipartColorRamp")],zu);var Fu=zu;const Uu={key:"type",base:Eu,typeMap:{algorithmic:Ru,multipart:Fu}};function Lu(t){return t&&t.type?"algorithmic"===t.type?Ru.fromJSON(t):"multipart"===t.type?Fu.fromJSON(t):null:null}var Vu;const Gu=new nl({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),qu=new nl({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),Bu=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"];let Wu=Vu=class extends Yi{constructor(t){super(t),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&"relationship"!==e?"class-breaks-size"===e||"class-breaks-color"===e?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){if(t)return Lu(t)}get fields(){return this.type&&"predominance"!==this.type?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&"relationship"!==this.type?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&"relationship"!==this.type?null:this._get("field2")}set field2(t){this._set("field2",t)}get focus(){return this.type&&"relationship"!==this.type?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&"relationship"!==t&&"class-breaks-size"!==t&&"class-breaks-color"!==t||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;"classed-size"===t?e="class-breaks-size":"classed-color"===t&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){return new Vu({classificationMethod:this.classificationMethod,colorRamp:w(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:w(this.field1),field2:w(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((t=>t.clone())),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme})}};n([Lt({type:Gu.apiValues,value:null,dependsOn:["type"],json:{type:Gu.jsonValues,read:Gu.read,write:Gu.write,origins:{"web-document":{default:"manual",type:Gu.jsonValues,read:Gu.read,write:Gu.write}}}})],Wu.prototype,"classificationMethod",null),n([Lt({types:Uu,json:{write:!0}})],Wu.prototype,"colorRamp",void 0),n([vs("colorRamp")],Wu.prototype,"readColorRamp",null),n([Lt({type:[String],value:null,dependsOn:["type"],json:{write:!0}})],Wu.prototype,"fields",null),n([Lt({type:Mu,value:null,dependsOn:["type"],json:{write:!0}})],Wu.prototype,"field1",null),n([Lt({type:Mu,value:null,dependsOn:["type"],json:{write:!0}})],Wu.prototype,"field2",null),n([Lt({type:["HH","HL","LH","LL"],value:null,dependsOn:["type"],json:{write:!0}})],Wu.prototype,"focus",null),n([Lt({type:Number,value:null,dependsOn:["type"],json:{type:mt,write:!0}})],Wu.prototype,"numClasses",null),n([Lt({type:Bu,json:{type:Bu,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Wu.prototype,"lengthUnit",void 0),n([Lt({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Wu.prototype,"maxSliderValue",void 0),n([Lt({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Wu.prototype,"minSliderValue",void 0),n([Lt({type:Object,value:null,dependsOn:["type","univariateTheme"],json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Wu.prototype,"statistics",null),n([Lt({type:[.25,.33,.5,1],value:null,dependsOn:["classificationMethod","type"],json:{type:[.25,.33,.5,1],write:!0}})],Wu.prototype,"standardDeviationInterval",null),n([Lt({type:qu.apiValues,value:null,json:{type:qu.jsonValues,read:qu.read,write:qu.write}})],Wu.prototype,"type",null),n([Lt({type:[Nu],json:{write:!0}})],Wu.prototype,"visualVariables",void 0),n([Lt({type:["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"],value:null,dependsOn:["type","univariateTheme"],json:{write:!0,origins:{"web-scene":{write:!1}}}})],Wu.prototype,"univariateSymbolStyle",null),n([Lt({type:["high-to-low","above-and-below","above","below","90-10"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Wu.prototype,"univariateTheme",null),Wu=Vu=n([ve("esri.renderers.support.AuthoringInfo")],Wu);var Hu=Wu;const Ju=new nl({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary"},{ignoreUnknown:!0});let Yu=class extends Yi{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const e=new Set;return await this.collectRequiredFields(e,t),Array.from(e).sort()}getSymbol(t,e){}async getSymbolAsync(t,e){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};n([Lt({type:Hu,json:{write:!0}})],Yu.prototype,"authoringInfo",void 0),n([Lt({type:Ju.apiValues,readOnly:!0,json:{type:Ju.jsonValues,read:!1,write:{writer:Ju.write,ignoreOrigin:!0}}})],Yu.prototype,"type",void 0),Yu=n([ve("esri.renderers.Renderer")],Yu);var Qu,Zu=Yu;let Ku=Qu=class extends Yi{constructor(){super(...arguments),this.title=null}clone(){return new Qu({title:this.title})}};n([Lt({type:String,json:{write:!0}})],Ku.prototype,"title",void 0),Ku=Qu=n([ve("esri.renderers.support.LegendOptions")],Ku);var Xu,tc=Ku;let ec=Xu=class extends tc{constructor(){super(...arguments),this.showLegend=null}clone(){return new Xu({title:this.title,showLegend:this.showLegend})}};n([Lt({type:Boolean,json:{write:!0}})],ec.prototype,"showLegend",void 0),ec=Xu=n([ve("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],ec);var rc=ec;const nc=J.getLogger("esri.renderers.visualVariables.VisualVariable"),ic=new nl({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let sc=class extends Yi{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return null==t?t:"function"==typeof t?(nc.error(".field: field must be a string value"),null):K(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};n([Lt()],sc.prototype,"index",void 0),n([Lt({type:ic.apiValues,readOnly:!0,json:{read:ic.read,write:ic.write}})],sc.prototype,"type",void 0),n([Lt({type:String,json:{write:!0}})],sc.prototype,"field",void 0),n([Ms("field")],sc.prototype,"castField",null),n([Lt({type:String,json:{write:!0}})],sc.prototype,"valueExpression",void 0),n([Lt({type:String,json:{write:!0}})],sc.prototype,"valueExpressionTitle",void 0),n([Lt({readOnly:!0,dependsOn:["valueExpression"]})],sc.prototype,"arcadeRequired",null),n([Lt({type:rc,json:{write:!0}})],sc.prototype,"legendOptions",void 0),sc=n([ve("esri.renderers.visualVariables.VisualVariable")],sc);var oc,lc=sc;let ac=oc=class extends Yi{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,r){e[r]=null==t?0:t}clone(){return new oc({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};n([Lt({type:Ua,json:{type:[mt],write:!0}})],ac.prototype,"color",void 0),n([Lt({type:String,json:{write:!0}})],ac.prototype,"label",void 0),n([Lt({type:Number,json:{write:{allowNull:!0}}})],ac.prototype,"value",void 0),n([be("value")],ac.prototype,"writeValue",null),ac=oc=n([ve("esri.renderers.visualVariables.support.ColorStop")],ac);var uc,cc=ac;let hc=uc=class extends lc{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter((t=>!!t))).sort(((t,e)=>t.value-e.value)),this._set("stops",t)}clone(){return new uc({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((t=>t.clone())),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((t=>t.value||0))}};n([Lt({readOnly:!0,dependsOn:["valueExpression","stops"]})],hc.prototype,"cache",null),n([Lt({type:["color"],json:{type:["colorInfo"]}})],hc.prototype,"type",void 0),n([Lt({type:String,json:{write:!0}})],hc.prototype,"normalizationField",void 0),n([Lt({type:[cc],json:{write:!0}})],hc.prototype,"stops",null),hc=uc=n([ve("esri.renderers.visualVariables.ColorVariable")],hc);var dc,fc=hc;function pc(t){const e=tt(100*(1-t));return Math.max(0,Math.min(e,100))}function yc(t){return Math.max(0,Math.min(1-t/100,1))}let mc=dc=class extends Yi{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return yc(e.transparency)}writeOpacity(t,e,r){e[r]=pc(t)}clone(){return new dc({label:this.label,opacity:this.opacity,value:this.value})}};n([Lt({type:String,json:{write:!0}})],mc.prototype,"label",void 0),n([Lt({type:Number,json:{type:mt,write:{target:"transparency"}}})],mc.prototype,"opacity",void 0),n([vs("opacity",["transparency"])],mc.prototype,"readOpacity",null),n([be("opacity")],mc.prototype,"writeOpacity",null),n([Lt({type:Number,json:{write:!0}})],mc.prototype,"value",void 0),mc=dc=n([ve("esri.renderers.visualVariables.support.OpacityStop")],mc);var vc,wc=mc;let bc=vc=class extends lc{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter((t=>!!t))).sort(((t,e)=>t.value-e.value)),this._set("stops",t)}clone(){return new vc({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((t=>t.clone())),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((t=>t.value||0))}};n([Lt({readOnly:!0,dependsOn:["valueExpression","stops"]})],bc.prototype,"cache",null),n([Lt({type:["opacity"],json:{type:["transparencyInfo"]}})],bc.prototype,"type",void 0),n([Lt({type:String,json:{write:!0}})],bc.prototype,"normalizationField",void 0),n([Lt({type:[wc],json:{write:!0}})],bc.prototype,"stops",null),bc=vc=n([ve("esri.renderers.visualVariables.OpacityVariable")],bc);var gc,Sc=bc;let xc=gc=class extends lc{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(t,e,r,n){n&&n.messages&&n.messages.push(new ge("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:`visualVariables[${this.index}].valueExpressionTitle`,context:n}))}clone(){return new gc({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};n([Lt({readOnly:!0,dependsOn:["valueExpression"]})],xc.prototype,"cache",null),n([Lt({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],xc.prototype,"axis",void 0),n([Lt({type:["rotation"],json:{type:["rotationInfo"]}})],xc.prototype,"type",void 0),n([Lt({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],xc.prototype,"rotationType",void 0),n([Lt({type:String,json:{write:!0}})],xc.prototype,"valueExpressionTitle",void 0),n([be("web-scene","valueExpressionTitle")],xc.prototype,"writeValueExpressionTitleWebScene",null),xc=gc=n([ve("esri.renderers.visualVariables.RotationVariable")],xc);var Mc=xc;const jc=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;function Oc(t){return t?t/72*96:0}function kc(t){return t?72*t/96:0}function Ic(t){if("string"==typeof t){if(jc.test(t)){const e=t.match(jc),r=Number(e[1]),n=e[3]&&e[3].toLowerCase(),i="-"===t.charAt(0),s="px"===n?kc(r):r;return i?-s:s}return console.warn("screenUtils.toPt: input not recognized!"),null}return t}function Ac(t=0,e=0){return{x:t,y:e}}function Cc(t){return t}var Tc;let Nc=Tc=class extends Yi{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new Tc({label:this.label,size:this.size,value:this.value})}};n([Lt({type:String,json:{write:!0}})],Nc.prototype,"label",void 0),n([Lt({type:Number,cast:Ic,json:{write:!0}})],Nc.prototype,"size",void 0),n([Lt({type:Number,json:{write:!0}})],Nc.prototype,"value",void 0),Nc=Tc=n([ve("esri.renderers.visualVariables.support.SizeStop")],Nc);var Pc,_c=Nc;let Ec=Pc=class extends rc{constructor(){super(...arguments),this.customValues=null}clone(){return new Pc({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};n([Lt({type:[Number],json:{write:!0}})],Ec.prototype,"customValues",void 0),Ec=Pc=n([ve("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],Ec);var $c=Ec;function Dc(t){return t&&"esri.renderers.visualVariables.SizeVariable"===t.declaredClass}function Rc(t){return null!=t&&!isNaN(t)&&isFinite(t)}function zc(t){return t.valueExpression?"expression":t.field&&"string"==typeof t.field?"field":"unknown"}class Fc{constructor(){this._emitter=new Fc.EventEmitter(this)}emit(t,e){return this._emitter.emit(t,e)}on(t,e){return this._emitter.on(t,e)}once(t,e){return this._emitter.once(t,e)}hasEventListener(t){return this._emitter.hasEventListener(t)}}!function(t){class e{constructor(t=null){this.target=t,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear()}emit(t,e){const r=this._listenersMap&&this._listenersMap.get(t);if(!r)return!1;const n=this.target||this;return[...r].forEach((t=>{t.call(n,e)})),r.length>0}on(t,e){if(Array.isArray(t))return St(t.map((t=>this.on(t,e))));if(t.indexOf(",")>-1)throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const r=this._listenersMap.get(t)||[];return r.push(e),this._listenersMap.set(t,r),{remove:()=>{const r=this._listenersMap&&this._listenersMap.get(t)||[],n=r.indexOf(e);n>=0&&r.splice(n,1)}}}once(t,e){let r;return r=this.on(t,(t=>{r.remove(),e.call(null,t)})),r}hasEventListener(t){const e=this._listenersMap&&this._listenersMap.get(t);return null!=e&&e.length>0}}t.EventEmitter=e,t.EventedMixin=t=>{let r=class extends t{constructor(){super(...arguments),this._emitter=new e}emit(t,e){return this._emitter.emit(t,e)}on(t,e){return this._emitter.on(t,e)}once(t,e){return this._emitter.once(t,e)}hasEventListener(t){return this._emitter.hasEventListener(t)}};return r=n([ve("esri.core.Evented")],r),r};let r=class extends Ei{constructor(){super(...arguments),this._emitter=new Fc.EventEmitter(this)}emit(t,e){return this._emitter.emit(t,e)}on(t,e){return this._emitter.on(t,e)}once(t,e){return this._emitter.once(t,e)}hasEventListener(t){return this._emitter.hasEventListener(t)}};r=n([ve("esri.core.Evented")],r),t.EventedAccessor=r}(Fc||(Fc={}));var Uc,Lc=Fc;const Vc=new pn(class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},void 0,(t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1})),Gc=()=>{};function qc(t){return t?t instanceof Xc?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function Bc(t){if(t&&t.length)return t[0]}function Wc(t,e,r,n){const i=Math.min(t.length-r,e.length-n);let s=0;for(;s<i&&t[r+s]===e[n+s];)s++;return s}function Hc(t,e,r,n){e&&e.forEach(((e,i,s)=>{t.push(e),Hc(t,r.call(n,e,i,s),r,n)}))}const Jc=new Set,Yc=new Set,Qc=new Set,Zc=new Map;let Kc=0,Xc=Uc=class extends Lc.EventedAccessor{constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._timer=null,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Kc++})}static isCollection(t){return null!=t&&t instanceof Uc}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof Uc?{items:t}:t:{}}*[Symbol.iterator](){yield*this.items}get items(){return this._items}set items(t){this._emitBeforeChanges(1)||(this._splice(0,this.length,...qc(t)),this._emitAfterChanges(1))}hasEventListener(t){return"change"===t?this._chgListeners.length>0:this._emitter.hasEventListener(t)}on(t,e){if("change"===t){const t=this._chgListeners,r={removed:!1,callback:e};return t.push(r),this._notifications&&this._notifications.push({listeners:t.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=Gc,r.removed=!0,t.splice(t.indexOf(r),1)}}}return this._emitter.on(t,e)}once(t,e){const r=this.on(t,e);return{remove(){r.remove()}}}add(t,e){if(this._emitBeforeChanges(1))return this;const r=this.getNextIndex(null!=e?e:null);return this._splice(r,0,t),this._emitAfterChanges(1),this}addMany(t,e=this._items.length){if(!t||!t.length)return this;if(this._emitBeforeChanges(1))return this;const r=this.getNextIndex(e);return this._splice(r,0,...qc(t)),this._emitAfterChanges(1),this}removeAll(){if(!this.length||this._emitBeforeChanges(2))return[];const t=this._splice(0,this.length)||[];return this._emitAfterChanges(2),t}clone(){return this._createNewInstance({items:this._items.map(w)})}concat(...t){const e=t.map(qc);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(!this.length||this._emitBeforeChanges(2))return;const r=this._splice(0,this.length),n=r.length;for(let i=0;i<n;i++)t.call(e,r[i],i,r);this._emitAfterChanges(2)}every(t,e){return this._items.every(t,e)}filter(t,e){let r;return r=2===arguments.length?this._items.filter(t,e):this._items.filter(t),this._createNewInstance({items:r})}find(t,e){return this._items.find(t,e)}findIndex(t,e){return this._items.findIndex(t,e)}flatten(t,e){const r=[];return Hc(r,this,t,e),new Uc(r)}forEach(t,e){return this._items.forEach(t,e)}getItemAt(t){return this._items[t]}getNextIndex(t){const e=this.length;return(t=null==t?e:t)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return this._items.includes(t,e)}indexOf(t,e=0){return this._items.indexOf(t,e)}join(t=","){return this._items.join(t)}lastIndexOf(t,e=this.length-1){return this._items.lastIndexOf(t,e)}map(t,e){const r=this._items.map(t,e);return new Uc({items:r})}reorder(t,e=this.length-1){const r=this.indexOf(t);if(-1!==r){if(e<0?e=0:e>=this.length&&(e=this.length-1),r!==e){if(this._emitBeforeChanges(4))return t;this._splice(r,1),this._splice(e,0,t),this._emitAfterChanges(4)}return t}}pop(){if(!this.length||this._emitBeforeChanges(2))return;const t=Bc(this._splice(this.length-1,1));return this._emitAfterChanges(2),t}push(...t){return this._emitBeforeChanges(1)||(this._splice(this.length,0,...t),this._emitAfterChanges(1)),this.length}reduce(t,e){const r=this._items;return 2===arguments.length?r.reduce(t,e):r.reduce(t)}reduceRight(t,e){const r=this._items;return 2===arguments.length?r.reduceRight(t,e):r.reduceRight(t)}remove(t){return this.removeAt(this.indexOf(t))}removeAt(t){if(t<0||t>=this.length||this._emitBeforeChanges(2))return;const e=Bc(this._splice(t,1));return this._emitAfterChanges(2),e}removeMany(t){if(!t||!t.length||this._emitBeforeChanges(2))return[];const e=t instanceof Uc?t.toArray():t,r=this._items,n=[],i=e.length;for(let t=0;t<i;t++){const i=r.indexOf(e[t]);if(i>-1){const s=1+Wc(e,r,t+1,i+1),o=this._splice(i,s);o&&o.length>0&&n.push.apply(n,o),t+=s-1}}return this._emitAfterChanges(2),n}reverse(){if(this._emitBeforeChanges(4))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,...t)),this._emitAfterChanges(4),this}shift(){if(!this.length||this._emitBeforeChanges(2))return;const t=Bc(this._splice(0,1));return this._emitAfterChanges(2),t}slice(t=0,e=this.length){return this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return this._items.some(t,e)}sort(t){if(!this.length||this._emitBeforeChanges(4))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,...e),this._emitAfterChanges(4),this}splice(t,e,...r){const n=(e?2:0)|(r.length?1:0);if(this._emitBeforeChanges(n))return[];const i=this._splice(t,e,...r)||[];return this._emitAfterChanges(n),i}toArray(){return this._items.slice()}toJSON(){return this.toArray()}toLocaleString(){return this._items.toLocaleString()}toString(){return this._items.toString()}unshift(...t){return!t.length||this._emitBeforeChanges(1)||(this._splice(0,0,...t),this._emitAfterChanges(1)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,...r){const n=this._items,i=this.constructor.prototype.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=pi((()=>this._dispatchChange()))),e){if(o=n.splice(t,e),this.hasEventListener("before-remove")){const e=Vc.acquire();e.target=this,e.cancellable=!0;for(let r=0,i=o.length;r<i;r++)s=o[r],e.reset(s),this.emit("before-remove",e),e.defaultPrevented&&(o.splice(r,1),n.splice(t,0,s),t+=1,r-=1,i-=1);Vc.release(e)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const t=Vc.acquire();t.target=this,t.cancellable=!1;const e=o.length;for(let r=0;r<e;r++)t.reset(o[r]),this.emit("after-remove",t);Vc.release(t)}}if(r&&r.length){if(i){const t=[];for(const e of r){const r=i.ensureType(e);null==r&&null!=e||t.push(r)}r=t}const e=this.hasEventListener("before-add"),s=this.hasEventListener("after-add"),o=t===this.length;if(e||s){const i=Vc.acquire();i.target=this,i.cancellable=!0;const l=Vc.acquire();l.target=this,l.cancellable=!1;for(const a of r)e?(i.reset(a),this.emit("before-add",i),i.defaultPrevented||(o?n.push(a):n.splice(t++,0,a),this._set("length",n.length),s&&(l.reset(a),this.emit("after-add",l)))):(o?n.push(a):n.splice(t++,0,a),this._set("length",n.length),l.reset(a),this.emit("after-add",l));Vc.release(l),Vc.release(i)}else{if(o)for(const t of r)n.push(t);else n.splice(t,0,...r);this._set("length",n.length)}}return(r&&r.length||o&&o.length)&&this._notifyChangeEvent(r,o),o}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const r=Vc.acquire();r.target=this,r.cancellable=!0,r.type=t,this.emit("before-changes",r),e=r.defaultPrevented,Vc.release(r)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=Vc.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),Vc.release(e)}}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const t=e.changes;Jc.clear(),Yc.clear(),Qc.clear();for(const{added:e,removed:r}of t){if(e)if(0===Qc.size&&0===Yc.size)for(const t of e)Jc.add(t);else for(const t of e)Yc.has(t)?(Qc.add(t),Yc.delete(t)):Qc.has(t)||Jc.add(t);if(r)if(0===Qc.size&&0===Jc.size)for(const t of r)Yc.add(t);else for(const t of r)Jc.has(t)?Jc.delete(t):(Qc.delete(t),Yc.add(t))}const r=Un.acquire();Jc.forEach((t=>{r.push(t)}));const n=Un.acquire();Yc.forEach((t=>{n.push(t)}));const i=this._items,s=e.items,o=Un.acquire();if(Qc.forEach((t=>{s.indexOf(t)!==i.indexOf(t)&&o.push(t)})),e.listeners&&(r.length||n.length||o.length)){const t={target:this,added:r,removed:n,moved:o},i=e.listeners.length;for(let r=0;r<i;r++){const n=e.listeners[r];n.removed||n.callback.call(this,t)}}Un.release(r),Un.release(n),Un.release(o)}Jc.clear(),Yc.clear(),Qc.clear()}};Xc.ofType=t=>{if(!t)return Uc;if(Zc.has(t))return Zc.get(t);let e=null;if("function"==typeof t)e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const r in t.typeMap){const n=t.typeMap[r].prototype.declaredClass;e?e+=` | ${n}`:e=n}let r=class extends Uc{};r=n([ve(`esri.core.Collection<${e}>`)],r);const i={Type:t,ensureType:"function"==typeof t?ut(t):yt(t)};return Object.defineProperty(r.prototype,"itemType",{value:i}),Zc.set(t,r),r},n([Lt()],Xc.prototype,"length",void 0),n([Lt()],Xc.prototype,"items",null),Xc=Uc=n([ve("esri.core.Collection")],Xc);var th=Xc;let eh=class extends Yi{constructor(t){super(t),this.type=null}};n([Lt({type:["attachments","custom","fields","media","text"],readOnly:!0,json:{read:!1,write:!0}})],eh.prototype,"type",void 0),eh=n([ve("esri.popup.content.Content")],eh);var rh,nh=eh;let ih=rh=class extends nh{constructor(t){super(t),this.displayType=null,this.type="attachments"}clone(){return new rh({displayType:this.displayType})}};n([Lt({type:["preview","list"],json:{write:!0}})],ih.prototype,"displayType",void 0),n([Lt({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],ih.prototype,"type",void 0),ih=rh=n([ve("esri.popup.content.AttachmentsContent")],ih);var sh,oh=ih;let lh=sh=class extends nh{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new sh({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?w(this.outFields):null})}};n([Lt()],lh.prototype,"creator",void 0),n([Lt()],lh.prototype,"destroyer",void 0),n([Lt()],lh.prototype,"outFields",void 0),n([Lt({type:["custom"],readOnly:!0})],lh.prototype,"type",void 0),lh=sh=n([ve("esri.popup.content.CustomContent")],lh);var ah=lh;const uh=il()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});var ch,hh,dh;let fh;uh.toJSON.bind(uh),uh.fromJSON.bind(uh);const ph=null!=(ch=null==(hh=i.esriConfig)?void 0:hh.locale)?ch:null==(dh=i.dojoConfig)?void 0:dh.locale;function yh(){var t,e;return null!=(t=null!=ph?ph:null==(e=i.navigator)?void 0:e.language)?t:"en"}function mh(){return void 0===fh&&(fh=yh()),fh}const vh=[];function wh(t){return vh.push(t),{remove(){vh.splice(vh.indexOf(t),1)}}}const bh=[];function gh(t){return bh.push(t),{remove(){vh.splice(bh.indexOf(t),1)}}}null==i.addEventListener||i.addEventListener("languagechange",(function(){const t=yh();fh!==t&&(fh=t,[...bh].forEach((e=>{e.call(null,t)})),[...vh].forEach((e=>{e.call(null,t)})))}));const Sh={year:"numeric",month:"numeric",day:"numeric"},xh={year:"numeric",month:"long",day:"numeric"},Mh={year:"numeric",month:"short",day:"numeric"},jh={year:"numeric",month:"long",weekday:"long",day:"numeric"},Oh={hour:"numeric",minute:"numeric"},kh={...Oh,second:"numeric"},Ih={"short-date":Sh,"short-date-short-time":{...Sh,...Oh},"short-date-short-time-24":{...Sh,...Oh,hour12:!1},"short-date-long-time":{...Sh,...kh},"short-date-long-time-24":{...Sh,...kh,hour12:!1},"short-date-le":Sh,"short-date-le-short-time":{...Sh,...Oh},"short-date-le-short-time-24":{...Sh,...Oh,hour12:!1},"short-date-le-long-time":{...Sh,...kh},"short-date-le-long-time-24":{...Sh,...kh,hour12:!1},"long-month-day-year":xh,"long-month-day-year-short-time":{...xh,...Oh},"long-month-day-year-short-time-24":{...xh,...Oh,hour12:!1},"long-month-day-year-long-time":{...xh,...kh},"long-month-day-year-long-time-24":{...xh,...kh,hour12:!1},"day-short-month-year":Mh,"day-short-month-year-short-time":{...Mh,...Oh},"day-short-month-year-short-time-24":{...Mh,...Oh,hour12:!1},"day-short-month-year-long-time":{...Mh,...kh},"day-short-month-year-long-time-24":{...Mh,...kh,hour12:!1},"long-date":jh,"long-date-short-time":{...jh,...Oh},"long-date-short-time-24":{...jh,...Oh,hour12:!1},"long-date-long-time":{...jh,...kh},"long-date-long-time-24":{...jh,...kh,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Oh,"long-time":kh},Ah=il()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),Ch=(Ah.toJSON.bind(Ah),Ah.fromJSON.bind(Ah),{ar:"ar-u-nu-latn-ca-gregory"});let Th=new WeakMap,Nh=Ih["short-date-short-time"];function Ph(t){return Ih[t]||null}function _h(t,e){return function(t){const e=t||Nh;if(!Th.has(e)){const t=mh(),r=Ch[mh()]||t;Th.set(e,new Intl.DateTimeFormat(r,e))}return Th.get(e)}(e).format(t)}gh((()=>{Th=new WeakMap,Nh=Ih["short-date-short-time"]}));const Eh={ar:"ar-u-nu-latn"};let $h=new WeakMap,Dh={};function Rh(t={}){const e={};return null!=t.digitSeparator&&(e.useGrouping=t.digitSeparator),null!=t.places&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function zh(t,e){return function(t){const e=t||Dh;if(!$h.has(e)){const r=mh(),n=Eh[mh()]||r;$h.set(e,new Intl.NumberFormat(n,t))}return $h.get(e)}(e).format(t)}var Fh;gh((()=>{$h=new WeakMap,Dh={}}));let Uh=Fh=class extends Yi{constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}clone(){return new Fh({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(t){return this.dateFormat?_h(t,Ph(this.dateFormat)):zh(t,Rh(this))}};n([xl(uh)],Uh.prototype,"dateFormat",void 0),n([Lt({type:Boolean,json:{write:!0}})],Uh.prototype,"digitSeparator",void 0),n([Lt({type:mt,json:{write:!0}})],Uh.prototype,"places",void 0),Uh=Fh=n([ve("esri.popup.support.FieldInfoFormat")],Uh);var Lh,Vh=Uh;let Gh=Lh=class extends Yi{constructor(t){super(t),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new Lh({fieldName:this.fieldName,format:this.format?w(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};n([Lt({type:String,json:{write:!0}})],Gh.prototype,"fieldName",void 0),n([Lt({type:Vh,json:{write:!0}})],Gh.prototype,"format",void 0),n([Lt({type:Boolean,json:{write:!0,default:!1}})],Gh.prototype,"isEditable",void 0),n([Lt({type:String,json:{write:!0}})],Gh.prototype,"label",void 0),n([xl(new nl({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Gh.prototype,"stringFieldOption",void 0),n([Lt({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Gh.prototype,"statisticType",void 0),n([Lt({type:String,json:{write:!0}})],Gh.prototype,"tooltip",void 0),n([Lt({type:Boolean,json:{write:!0}})],Gh.prototype,"visible",void 0),Gh=Lh=n([ve("esri.popup.FieldInfo")],Gh);var qh,Bh=Gh;let Wh=qh=class extends nh{constructor(t){super(t),this.fieldInfos=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map((t=>t.toJSON()))}clone(){return new qh({fieldInfos:Array.isArray(this.fieldInfos)?w(this.fieldInfos):null})}};n([Lt({type:[Bh]})],Wh.prototype,"fieldInfos",void 0),n([be("fieldInfos")],Wh.prototype,"writeFieldInfos",null),n([Lt({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Wh.prototype,"type",void 0),Wh=qh=n([ve("esri.popup.content.FieldsContent")],Wh);var Hh=Wh;let Jh=class extends Yi{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};n([Lt({type:String,json:{write:!0}})],Jh.prototype,"altText",void 0),n([Lt({type:String,json:{write:!0}})],Jh.prototype,"caption",void 0),n([Lt({type:String,json:{write:!0}})],Jh.prototype,"title",void 0),n([Lt({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Jh.prototype,"type",void 0),Jh=n([ve("esri.popup.content.mixins.MediaInfo")],Jh);var Yh,Qh=Jh;function Zh(t,e){return Lt({aliasOf:e?{...e,source:t}:t})}let Kh=Yh=class extends Ei{constructor(t){super(t),this.tooltip=null,this.value=null,this.x=null,this.y=null}clone(){return new Yh({tooltip:this.tooltip,value:this.value})}};n([Lt()],Kh.prototype,"tooltip",void 0),n([Lt()],Kh.prototype,"value",void 0),n([Zh("value")],Kh.prototype,"x",void 0),n([Zh("tooltip")],Kh.prototype,"y",void 0),Kh=Yh=n([ve("esri.popup.content.support.ChartMediaInfoValueSeries")],Kh);var Xh,td=Kh;let ed=Xh=class extends Yi{constructor(t){super(t),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new Xh({fields:w(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};n([Lt({type:[String],json:{write:!0}})],ed.prototype,"fields",void 0),n([Lt({type:String,json:{write:!0}})],ed.prototype,"normalizeField",void 0),n([Lt({type:[td],json:{read:!1}})],ed.prototype,"series",void 0),n([Lt({type:String,json:{write:!0}})],ed.prototype,"tooltipField",void 0),ed=Xh=n([ve("esri.popup.content.support.ChartMediaInfoValue")],ed);var rd=ed;let nd=class extends Qh{constructor(t){super(t),this.type=null,this.value=null}};n([Lt({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],nd.prototype,"type",void 0),n([Lt({type:rd,json:{write:!0}})],nd.prototype,"value",void 0),nd=n([ve("esri.popup.content.mixins.ChartMediaInfo")],nd);var id=nd;const sd=il()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var od;let ld=od=class extends id{constructor(t){super(t),this.type="bar-chart"}clone(){return new od({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};n([Lt({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:sd.write}})],ld.prototype,"type",void 0),ld=od=n([ve("esri.popup.content.BarChartMediaInfo")],ld);var ad,ud=ld;let cd=ad=class extends id{constructor(t){super(t),this.type="column-chart"}clone(){return new ad({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};n([Lt({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:sd.write}})],cd.prototype,"type",void 0),cd=ad=n([ve("esri.popup.content.ColumnChartMediaInfo")],cd);var hd,dd=cd;let fd=hd=class extends Yi{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new hd({linkURL:this.linkURL,sourceURL:this.sourceURL})}};n([Lt({type:String,json:{write:!0}})],fd.prototype,"linkURL",void 0),n([Lt({type:String,json:{write:!0}})],fd.prototype,"sourceURL",void 0),fd=hd=n([ve("esri.popup.content.support.ImageMediaInfoValue")],fd);var pd,yd=fd;let md=pd=class extends Qh{constructor(t){super(t),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new pd({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};n([Lt({type:Number,json:{write:!0}})],md.prototype,"refreshInterval",void 0),n([Lt({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],md.prototype,"type",void 0),n([Lt({type:yd,json:{write:!0}})],md.prototype,"value",void 0),md=pd=n([ve("esri.popup.content.ImageMediaInfo")],md);var vd,wd=md;let bd=vd=class extends id{constructor(t){super(t),this.type="line-chart"}clone(){return new vd({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};n([Lt({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:sd.write}})],bd.prototype,"type",void 0),bd=vd=n([ve("esri.popup.content.LineChartMediaInfo")],bd);var gd,Sd=bd;let xd=gd=class extends id{constructor(t){super(t),this.type="pie-chart"}clone(){return new gd({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};n([Lt({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:sd.write}})],xd.prototype,"type",void 0),xd=gd=n([ve("esri.popup.content.PieChartMediaInfo")],xd);var Md=xd;const jd={base:Qh,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":ud,"column-chart":dd,"line-chart":Sd,"pie-chart":Md,image:wd}};var Od;let kd=Od=class extends nh{constructor(t){super(t),this.activeMediaInfoIndex=null,this.mediaInfos=null,this.type="media"}readMediaInfos(t){return t&&t.map((t=>"image"===t.type?wd.fromJSON(t):"barchart"===t.type?ud.fromJSON(t):"columnchart"===t.type?dd.fromJSON(t):"linechart"===t.type?Sd.fromJSON(t):"piechart"===t.type?Md.fromJSON(t):void 0)).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map((t=>t.toJSON()))}clone(){return new Od({activeMediaInfoIndex:this.activeMediaInfoIndex,mediaInfos:this.mediaInfos?w(this.mediaInfos):null})}};n([Lt()],kd.prototype,"activeMediaInfoIndex",void 0),n([Lt({types:[jd]})],kd.prototype,"mediaInfos",void 0),n([vs("mediaInfos")],kd.prototype,"readMediaInfos",null),n([be("mediaInfos")],kd.prototype,"writeMediaInfos",null),n([Lt({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],kd.prototype,"type",void 0),kd=Od=n([ve("esri.popup.content.MediaContent")],kd);var Id,Ad=kd;let Cd=Id=class extends nh{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new Id({text:this.text})}};n([Lt({type:String,json:{write:!0}})],Cd.prototype,"text",void 0),n([Lt({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Cd.prototype,"type",void 0),Cd=Id=n([ve("esri.popup.content.TextContent")],Cd);var Td=Cd;const Nd={base:null,key:"type",typeMap:{attachment:oh,media:Ad,text:Td,field:Hh}};var Pd;let _d=Pd=class extends Yi{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new Pd({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};n([Lt({type:String,json:{write:!0}})],_d.prototype,"name",void 0),n([Lt({type:String,json:{write:!0}})],_d.prototype,"title",void 0),n([Lt({type:String,json:{write:!0}})],_d.prototype,"expression",void 0),n([Lt({type:["string","number"],json:{write:!0}})],_d.prototype,"returnType",void 0),_d=Pd=n([ve("esri.popup.ExpressionInfo")],_d);var Ed,$d=_d;let Dd=Ed=class extends Yi{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new Ed({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};n([Lt({type:Boolean,json:{write:!0}})],Dd.prototype,"returnTopmostRaster",void 0),n([Lt({type:Boolean,json:{write:!0}})],Dd.prototype,"showNoDataRecords",void 0),Dd=Ed=n([ve("esri.popup.LayerOptions")],Dd);var Rd,zd=Dd;let Fd=Rd=class extends Yi{constructor(t){super(t),this.field=null,this.order=null}clone(){return new Rd({field:this.field,order:this.order})}};n([Lt({type:String,json:{write:!0}})],Fd.prototype,"field",void 0),n([Lt({type:["asc","desc"],json:{write:!0}})],Fd.prototype,"order",void 0),Fd=Rd=n([ve("esri.popup.support.RelatedRecordsInfoFieldOrder")],Fd);var Ud,Ld=Fd;let Vd=Ud=class extends Yi{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new Ud({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?w(this.orderByFields):null})}};n([Lt({type:Boolean,json:{write:!0}})],Vd.prototype,"showRelatedRecords",void 0),n([Lt({type:[Ld],json:{write:!0}})],Vd.prototype,"orderByFields",void 0),Vd=Ud=n([ve("esri.popup.RelatedRecordsInfo")],Vd);var Gd=Vd;let qd=0;const Bd=t=>{let e=class extends t{constructor(...t){super(...t),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+qd++})}};return e=n([ve("esri.core.Identifiable")],e),e};let Wd=class extends(Bd(class{})){};var Hd;Wd=n([ve("esri.core.Identifiable")],Wd);let Jd=Hd=class extends(Bd(Ei)){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new Hd({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};n([Lt()],Jd.prototype,"active",void 0),n([Lt()],Jd.prototype,"className",void 0),n([Lt()],Jd.prototype,"disabled",void 0),n([Lt()],Jd.prototype,"id",void 0),n([Lt()],Jd.prototype,"indicator",void 0),n([Lt()],Jd.prototype,"title",void 0),n([Lt()],Jd.prototype,"type",void 0),n([Lt()],Jd.prototype,"visible",void 0),Jd=Hd=n([ve("esri.support.actions.ActionBase")],Jd);var Yd,Qd=Jd;let Zd=Yd=class extends Qd{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new Yd({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};n([Lt()],Zd.prototype,"image",void 0),Zd=Yd=n([ve("esri.support.Action.ActionButton")],Zd);var Kd,Xd=Zd;let tf=Kd=class extends Qd{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new Kd({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};n([Lt()],tf.prototype,"image",void 0),n([Lt()],tf.prototype,"value",void 0),tf=Kd=n([ve("esri.support.Action.ActionToggle")],tf);var ef,rf=tf;const nf=th.ofType({key:"type",defaultKeyValue:"button",base:Qd,typeMap:{button:Xd,toggle:rf}}),sf={base:nh,key:"type",typeMap:{media:Ad,custom:ah,text:Td,attachments:oh,fields:Hh}},of=J.getLogger("esri.PopupTemplate"),lf=["attachments","fields","media","text"];let af=ef=class extends Yi{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null}castContent(t){return Array.isArray(t)?t.map((t=>yt(sf,t))):"string"==typeof t||"function"==typeof t||t instanceof HTMLElement||rn(t)?t:(of.error("content error","unsupported content value",{value:t}),null)}readContent(t,e){const{popupElements:r}=e;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(e):this._readPopupInfo(e)}writeContent(t,e){"string"!=typeof t?Array.isArray(t)&&(e.popupElements=t.filter((t=>-1!==lf.indexOf(t.type))).map((t=>t&&t.toJSON())),e.popupElements.forEach((t=>{"attachments"===t.type?this._writeAttachmentContent(e):"media"===t.type?this._writeMediaContent(t,e):"text"===t.type&&this._writeTextContent(t,e)}))):e.description=t}writeFieldInfos(t,e){const{content:r}=this,n=Array.isArray(r)?r:null;if(t){const r=!!n&&n.some((t=>"fields"===t.type&&(!t.fieldInfos||0===t.fieldInfos.length)));e.fieldInfos=t.filter(Boolean).map((t=>{const e=t.toJSON();return r||(e.visible=!1),e}))}if(n)for(const t of n)"fields"===t.type&&this._writeFieldsContent(t,e)}writeLayerOptions(t,e){e.layerOptions=!t||null===t.showNoDataRecords&&null===t.returnTopmostRaster?null:t.toJSON()}writeTitle(t,e){e.title=t||""}clone(){const{actions:t}=this,e=t?w(t.toArray()):[];return new ef({actions:e,content:Array.isArray(this.content)?w(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?w(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?w(this.fieldInfos):null,layerOptions:this.layerOptions?w(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?w(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?w(this.relatedRecordsInfo):null})}async collectRequiredFields(t,e){await this._collectExpressionInfoFields(t,e,this.expressionInfos),Jl(t,e,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const e=new Set;return await this.collectRequiredFields(e,t),[...e].sort()}_writeFieldsContent(t,e){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const r=w(t.fieldInfos);Array.isArray(e.fieldInfos)?r.forEach((t=>{const r=e.fieldInfos.find((e=>e.fieldName.toLowerCase()===t.fieldName.toLowerCase()));r?r.visible=!0:e.fieldInfos.push(t)})):e.fieldInfos=r}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeTextContent(t,e){!e.description&&t.text&&(e.description=t.text)}_writeMediaContent(t,e){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const r=w(t.mediaInfos);e.mediaInfos=Array.isArray(e.mediaInfos)?[...e.mediaInfos,...r]:r}_readPopupInfoElements({description:t,mediaInfos:e,popupElements:r}){const n={description:!1,mediaInfos:!1};return r.map((r=>"media"===r.type?(r.mediaInfos||!e||n.mediaInfos||(r.mediaInfos=e,n.mediaInfos=!0),Ad.fromJSON(r)):"text"===r.type?(r.text||!t||n.description||(r.text=t,n.description=!0),Td.fromJSON(r)):"attachments"===r.type?oh.fromJSON(r):"fields"===r.type?Hh.fromJSON(r):void 0)).filter(Boolean)}_readPopupInfo({description:t,mediaInfos:e,showAttachments:r}){const n=[];return n.push(t?new Td({text:t}):new Hh),Array.isArray(e)&&e.length&&n.push(Ad.fromJSON({mediaInfos:e})),r&&n.push(oh.fromJSON({displayType:"list"})),n.length?n:t}_getContentElementFields(t){return t&&"attachments"!==t.type?"custom"===t.type?t.outFields||[]:"fields"===t.type?this._getFieldInfoFields(t.fieldInfos||this.fieldInfos):"media"===t.type?(t.mediaInfos||[]).reduce(((t,e)=>[...t,...this._getMediaInfoFields(e)]),[]):"text"===t.type?this._extractFieldNames(t.text):void 0:[]}_getMediaInfoFields(t){const{caption:e,title:r,value:n}=t,i=n||{},{fields:s=[],normalizeField:o,tooltipField:l,sourceURL:a,linkURL:u}=i,c=[...this._extractFieldNames(r),...this._extractFieldNames(e),...this._extractFieldNames(a),...this._extractFieldNames(u),...s];return o&&c.push(o),l&&c.push(l),c}_getContentFields(t){return"string"==typeof t?this._extractFieldNames(t):Array.isArray(t)?t.reduce(((t,e)=>[...t,...this._getContentElementFields(e)]),[]):[]}async _collectExpressionInfoFields(t,e,r){r&&await $r(r.map((r=>Kl(t,e,r.expression))))}_getFieldInfoFields(t){return t?t.filter((t=>void 0===t.visible||!!t.visible)).map((t=>t.fieldName)).filter((t=>-1===t.indexOf("relationships/")&&-1===t.indexOf("expression/"))):[]}_getActionsFields(t){return t?t.toArray().reduce(((t,e)=>[...t,...this._getActionFields(e)]),[]):[]}_getActionFields(t){const{className:e,title:r,type:n}=t,i="button"===n||"toggle"===n?t.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(e),...this._extractFieldNames(i)]}_getTitleFields(t){return"string"==typeof t?this._extractFieldNames(t):[]}_extractFieldNames(t){if(!t||"string"!=typeof t)return[];const e=t.match(/{[^}]*}/g);if(!e)return[];const r=/\{(\w+):.+\}/,n=e.filter((t=>!(0===t.indexOf("{relationships/")||0===t.indexOf("{expression/")))).map((t=>t.replace(r,"{$1}")));return n?n.map((t=>t.slice(1,-1))):[]}};n([Lt({type:nf})],af.prototype,"actions",void 0),n([Lt()],af.prototype,"content",void 0),n([Ms("content")],af.prototype,"castContent",null),n([vs("content",["description","popupElements","mediaInfos","showAttachments"])],af.prototype,"readContent",null),n([be("content",{popupElements:{type:th.ofType(Nd)},showAttachments:{type:Boolean},mediaInfos:{type:th.ofType(jd)},description:{type:String}})],af.prototype,"writeContent",null),n([Lt({type:[$d],json:{write:!0}})],af.prototype,"expressionInfos",void 0),n([Lt({type:[Bh]})],af.prototype,"fieldInfos",void 0),n([be("fieldInfos")],af.prototype,"writeFieldInfos",null),n([Lt({type:zd})],af.prototype,"layerOptions",void 0),n([be("layerOptions")],af.prototype,"writeLayerOptions",null),n([Lt({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],af.prototype,"lastEditInfoEnabled",void 0),n([Lt()],af.prototype,"outFields",void 0),n([Lt()],af.prototype,"overwriteActions",void 0),n([Lt()],af.prototype,"returnGeometry",void 0),n([Lt({json:{type:String}})],af.prototype,"title",void 0),n([be("title")],af.prototype,"writeTitle",null),n([Lt({type:Gd,json:{write:!0}})],af.prototype,"relatedRecordsInfo",void 0),af=ef=n([ve("esri.PopupTemplate")],af);var uf=af;let cf=class extends Yi{constructor(t){super(t),this.enabled=!0,this.type=null}writeEnabled(t,e,r){t||(e[r]=t)}};n([Lt({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],cf.prototype,"enabled",void 0),n([be("enabled")],cf.prototype,"writeEnabled",null),n([Lt({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],cf.prototype,"type",void 0),cf=n([ve("esri.symbols.Symbol3DLayer")],cf);var hf=cf;const df={type:Ua,json:{type:[mt],default:null,read:{source:["color","transparency"],reader:function(t,e){const r=null!=e.transparency?yc(e.transparency):1,n=e.color;return n&&Array.isArray(n)?new Ua([n[0]||0,n[1]||0,n[2]||0,r]):null}},write:{target:{color:{type:[mt]},transparency:{type:mt}},writer:function(t,e){e.color=t.toJSON().slice(0,3);const r=pc(t.a);0!==r&&(e.transparency=r)}}}},ff={type:Number,cast:Ic,json:{write:!0}},pf={type:[Number],cast:t=>null!=t?t:Array.isArray(t)?t.map(Ic):null,json:{read:!1,write:!1}};let yf=class extends Yi{constructor(t){super(t),this.color=new Ua([0,0,0,1]),this.extensionLength=0,this.size=kc(1)}clone(){}cloneProperties(){return{color:w(this.color),size:this.size,extensionLength:this.extensionLength}}};n([Lt({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],yf.prototype,"type",void 0),n([Lt(df)],yf.prototype,"color",void 0),n([Lt({...ff,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],yf.prototype,"extensionLength",void 0),n([Lt(ff)],yf.prototype,"size",void 0),yf=n([ve("esri.symbols.edges.Edges3D")],yf);var mf,vf=yf;let wf=mf=class extends vf{constructor(t){super(t),this.type="sketch"}clone(){return new mf(this.cloneProperties())}};n([xl({sketch:"sketch"},{readOnly:!0})],wf.prototype,"type",void 0),wf=mf=n([ve("esri.symbols.edges.SketchEdges3D")],wf);var bf,gf=wf;let Sf=bf=class extends vf{constructor(t){super(t),this.type="solid"}clone(){return new bf(this.cloneProperties())}};n([xl({solid:"solid"},{readOnly:!0})],Sf.prototype,"type",void 0),Sf=bf=n([ve("esri.symbols.support.SolidEdges3D")],Sf);const xf={types:{key:"type",base:vf,typeMap:{solid:Sf,sketch:gf}},json:{write:!0}};var Mf;let jf=Mf=class extends Yi{constructor(){super(...arguments),this.color=null}clone(){return new Mf({color:x(this.color)?this.color.clone():null})}};n([Lt(df)],jf.prototype,"color",void 0),jf=Mf=n([ve("esri.symbols.support.Symbol3DMaterial")],jf);var Of,kf=jf;let If=Of=class extends hf{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new Of({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:x(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};n([xl({Extrude:"extrude"},{readOnly:!0})],If.prototype,"type",void 0),n([Lt({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],If.prototype,"size",void 0),n([Lt({type:kf,json:{write:!0}})],If.prototype,"material",void 0),n([Lt({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],If.prototype,"castShadows",void 0),n([Lt(xf)],If.prototype,"edges",void 0),If=Of=n([ve("esri.symbols.ExtrudeSymbol3DLayer")],If);var Af=If;let Cf=class extends Ba{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};n([xl({esriSLS:"simple-line"},{readOnly:!0})],Cf.prototype,"type",void 0),n([Lt({type:Number,cast:Ic,json:{write:!0}})],Cf.prototype,"width",void 0),Cf=n([ve("esri.symbols.LineSymbol")],Cf);var Tf,Nf=Cf;let Pf=Tf=class extends Yi{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,r,n){e[r]="web-map"===(null==n?void 0:n.origin)?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t&&null!=t[0]?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,r,n){"web-map"===(null==n?void 0:n.origin)||(e[r]=t)}clone(){return new Tf({color:w(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${null==(t=this.color)?void 0:t.hash()}.${this.style}`}};n([Lt({type:["begin","end","begin-end"],json:{default:"begin-end",write:!0}})],Pf.prototype,"placement",void 0),n([xl({"line-marker":"line-marker"},{readOnly:!0}),Lt({json:{origins:{"web-map":{write:!1}}}})],Pf.prototype,"type",void 0),n([Lt({type:["arrow","circle","square","diamond","cross","x"]})],Pf.prototype,"style",void 0),n([be("style")],Pf.prototype,"writeStyle",null),n([Lt({type:Ua,value:null,json:{write:{allowNull:!0}}})],Pf.prototype,"color",null),n([vs("color")],Pf.prototype,"readColor",null),n([be("color")],Pf.prototype,"writeColor",null),Pf=Tf=n([ve("esri.symbols.LineSymbolMarker")],Pf);var _f,Ef=Pf;const $f=new nl({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Df=_f=class extends Nf{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,r,n,i,s){if(t&&"string"!=typeof t)return t;const o={};return null!=t&&(o.style=t),null!=e&&(o.color=e),null!=r&&(o.width=Ic(r)),null!=n&&(o.cap=n),null!=i&&(o.join=i),null!=s&&(o.miterLimit=Ic(s)),o}clone(){var t;return new _f({color:w(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:null==(t=this.marker)?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${null==(t=this.color)?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${null==(e=this.marker)?void 0:e.hash()}`}};n([xl({esriSLS:"simple-line"},{readOnly:!0})],Df.prototype,"type",void 0),n([Lt({type:$f.apiValues,json:{read:$f.read,write:$f.write}})],Df.prototype,"style",void 0),n([Lt({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,r)=>({enabled:"round"!==t&&(null==r||null==r.origin)})}}})],Df.prototype,"cap",void 0),n([Lt({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,r)=>({enabled:"round"!==t&&(null==r||null==r.origin)})}}})],Df.prototype,"join",void 0),n([Lt({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":Ef}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Df.prototype,"marker",void 0),n([Lt({type:Number,json:{read:!1,write:!1}})],Df.prototype,"miterLimit",void 0),Df=_f=n([ve("esri.symbols.SimpleLineSymbol")],Df);var Rf=Df;let zf=class extends Ba{constructor(t){super(t),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};n([Lt({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Rf}},json:{default:null,write:!0}})],zf.prototype,"outline",void 0),n([Lt({type:["simple-fill","picture-fill"],readOnly:!0})],zf.prototype,"type",void 0),zf=n([ve("esri.symbols.FillSymbol")],zf);var Ff=zf;let Uf=class extends Yi{constructor(t){super(t)}clone(){}};n([Lt({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Uf.prototype,"type",void 0),Uf=n([ve("esri.symbols.patterns.Pattern3D")],Uf);var Lf,Vf=Uf;let Gf=Lf=class extends Vf{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new Lf({style:this.style})}};n([Lt({type:["style"]})],Gf.prototype,"type",void 0),n([Lt({type:["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"],json:{read:!0,write:!0}})],Gf.prototype,"style",void 0),Gf=Lf=n([ve("esri.symbols.patterns.StylePattern3D")],Gf);var qf=Gf;const Bf={types:{key:"type",base:Vf,typeMap:{style:qf}},json:{read:function(t,e,r){if(!t)return t;switch(t.type){case"style":{const e=new qf;return e.read(t,r),e}}},write:!0}},Wf=new Ua("white"),Hf=(new Ua("black"),new Ua([255,255,255,0]));var Jf;let Yf=Jf=class extends kf{clone(){return new Jf({color:x(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode})}};n([xl({multiply:"multiply",replace:"replace",tint:"tint"})],Yf.prototype,"colorMixMode",void 0),Yf=Jf=n([ve("esri.symbols.support.Symbol3DFillMaterial")],Yf);var Qf,Zf=Yf;let Kf=Qf=class extends Yi{constructor(){super(...arguments),this.color=new Ua([0,0,0,1]),this.size=kc(1),this.stipplePattern=null,this.stippleOffColor=null}clone(){return new Qf({color:x(this.color)?this.color.clone():null,size:this.size,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?this.stippleOffColor.clone():null})}};n([Lt(df)],Kf.prototype,"color",void 0),n([Lt(ff)],Kf.prototype,"size",void 0),n([Lt(pf)],Kf.prototype,"stipplePattern",void 0),n([Lt({type:Ua})],Kf.prototype,"stippleOffColor",void 0),Kf=Qf=n([ve("esri.symbols.support.Symbol3DOutline")],Kf);var Xf,tp=Kf;let ep=Xf=class extends hf{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){return new Xf({edges:x(this.edges)?this.edges.clone():null,enabled:this.enabled,material:x(this.material)?this.material.clone():null,pattern:x(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:x(this.outline)?this.outline.clone():null})}static fromSimpleFillSymbol(t){return new Xf({material:{color:(t.color||Hf).clone()},pattern:t.style&&"solid"!==t.style?new qf({style:t.style}):null,outline:t.outline?new tp({size:t.outline.width||0,color:(t.outline.color||Wf).clone()}):null})}};n([xl({Fill:"fill"},{readOnly:!0})],ep.prototype,"type",void 0),n([Lt({type:Zf,json:{write:!0}})],ep.prototype,"material",void 0),n([Lt(Bf)],ep.prototype,"pattern",void 0),n([Lt({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ep.prototype,"castShadows",void 0),n([Lt({type:tp,json:{write:!0}})],ep.prototype,"outline",void 0),n([Lt(xf)],ep.prototype,"edges",void 0),ep=Xf=n([ve("esri.symbols.FillSymbol3DLayer")],ep);var rp,np=ep;let ip=rp=class extends Yi{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return Ic(t)}clone(){return new rp({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};n([Lt({type:["underline","line-through","none"],json:{default:"none",write:!0}})],ip.prototype,"decoration",void 0),n([Lt({type:String,json:{write:!0}})],ip.prototype,"family",void 0),n([Lt({type:Number,json:{write:{overridePolicy:(t,e,r)=>({enabled:!r||!r.textSymbol3D})}}})],ip.prototype,"size",void 0),n([Ms("size")],ip.prototype,"castSize",null),n([Lt({type:["normal","italic","oblique"],json:{default:"normal",write:!0}})],ip.prototype,"style",void 0),n([Lt({type:["normal","bold","bolder","lighter"],json:{default:"normal",write:!0}})],ip.prototype,"weight",void 0),ip=rp=n([ve("esri.symbols.Font")],ip);var sp=ip;function op(t,e){const r=e&&e.url&&e.url.path;if(t&&r&&(t=Ze(t,r,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const r=Ke(t,e.portalItem.itemUrl);hp.test(r)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(r).path)}return fp(t,e&&e.portal)}function lp(t,e){if(!t)return t;!rr(t)&&e&&e.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let r=Ze(t);if(e){const n=e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.rootPath||e.url&&e.url.path;if(n){const i=fp(n,e.portal);r=Ke(fp(r,e.portal),i,i),r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=function(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?vr(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}(r,e&&e.portal),rr(r)&&(r=Xe(r)),r}function ap(t,e,r){return op(t,r)}function up(t,e,r,n){const i=lp(t,n);void 0!==i&&(e[r]=i)}const cp=/\/items\/([^\/]+)\/resources\//,hp=/^\.\/resources\//;function dp(t){const e=x(t)?t.match(cp):null;return x(e)?e[1]:null}function fp(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const r=`${e.urlKey}.${e.customBaseUrl}`;return Je(_e,`${_e.scheme}://${r}`)?vr(t,e.portalHostname,r):vr(t,r,e.portalHostname)}var pp,yp=Object.freeze({__proto__:null,fromJSON:op,toJSON:lp,read:ap,write:up,itemIdFromResourceUrl:dp});const mp=il()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let vp=pp=class extends Yi{constructor(t){super(t)}readHref(t,e,r){return t?op(t,r):e.dataURI}writeHref(t,e,r,n){t&&(ir(t)?e.dataURI=t:(e.href=lp(t,n),rr(e.href)&&(e.href=Xe(e.href))))}clone(){return new pp({href:this.href,primitive:this.primitive})}};n([Lt({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],vp.prototype,"href",void 0),n([vs("href")],vp.prototype,"readHref",null),n([be("href",{href:{type:String},dataURI:{type:String}})],vp.prototype,"writeHref",null),n([xl(mp)],vp.prototype,"primitive",void 0),vp=pp=n([ve("esri.symbols.support.IconSymbol3DLayerResource")],vp);const wp="circle";var bp,gp=vp;let Sp=bp=class extends Ei{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new bp({x:this.x,y:this.y})}};n([Lt({type:Number})],Sp.prototype,"x",void 0),n([Lt({type:Number})],Sp.prototype,"y",void 0),Sp=bp=n([ve("esri.symbols.support.Symbol3DAnchorPosition2D")],Sp);var xp,Mp=Sp;const jp=J.getLogger("esri.symbols.IconSymbol3DLayer");let Op=xp=class extends hf{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0}clone(){return new xp({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:x(this.material)?this.material.clone():null,outline:x(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(t){const e=t.color||Wf,r=kp(t),n=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||Wf).clone()}:null;return new xp({size:t.size,resource:{primitive:Cp(t.style)},material:{color:e},outline:n,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(t){const e=!t.color||function(t){return 0===t.r&&0===t.g&&0===t.b}(t.color)?Wf:t.color,r=kp(t);return new xp({size:t.width<=t.height?t.height:t.width,resource:{href:t.url},material:{color:e.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(t){return new xp({resource:{href:ar({mediaType:"application/json",data:JSON.stringify(t.data)})}})}};function kp(t){const e="width"in t?t.width:t.size,r="height"in t?t.height:t.size,n=Ip(t.xoffset),i=Ip(t.yoffset);return(n||i)&&e&&r?{x:-n/e,y:i/r}:null}function Ip(t){return isFinite(t)?t:0}n([Lt({type:kf,json:{write:!0}})],Op.prototype,"material",void 0),n([Lt({type:gp,json:{write:!0}})],Op.prototype,"resource",void 0),n([xl({Icon:"icon"},{readOnly:!0})],Op.prototype,"type",void 0),n([Lt(ff)],Op.prototype,"size",void 0),n([xl({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),Lt({json:{default:"center"}})],Op.prototype,"anchor",void 0),n([Lt({type:Sp,json:{type:[Number],read:{reader:t=>new Sp({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],Op.prototype,"anchorPosition",void 0),n([Lt({type:tp,json:{write:!0}})],Op.prototype,"outline",void 0),Op=xp=n([ve("esri.symbols.IconSymbol3DLayer")],Op);const Ap={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Cp(t){return Ap[t]||(jp.warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}var Tp,Np=Op;let Pp=Tp=class extends hf{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=kc(1),this.stipplePattern=null,this.stippleOffColor=null}clone(){return new Tp({enabled:this.enabled,material:x(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?this.stippleOffColor.clone():null})}static fromSimpleLineSymbol(t){return new Tp({size:t.width||1,cap:t.cap||"butt",join:t.join||"miter",material:{color:(t.color||Wf).clone()}})}};n([Lt({type:kf,json:{write:!0}})],Pp.prototype,"material",void 0),n([xl({Line:"line"},{readOnly:!0})],Pp.prototype,"type",void 0),n([Lt({type:["miter","bevel","round"],json:{write:!0,default:"miter"}})],Pp.prototype,"join",void 0),n([Lt({type:["butt","square","round"],json:{write:!0,default:"butt"}})],Pp.prototype,"cap",void 0),n([Lt(ff)],Pp.prototype,"size",void 0),n([Lt(pf)],Pp.prototype,"stipplePattern",void 0),n([Lt({type:Ua})],Pp.prototype,"stippleOffColor",void 0),Pp=Tp=n([ve("esri.symbols.LineSymbol3DLayer")],Pp);var _p,Ep=Pp;const $p=il()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Dp=_p=class extends Yi{clone(){return new _p({href:this.href,primitive:this.primitive})}};n([Lt({type:String,json:{read:ap,write:up}})],Dp.prototype,"href",void 0),n([xl($p)],Dp.prototype,"primitive",void 0),Dp=_p=n([ve("esri.symbols.support.ObjectSymbol3DLayerResource")],Dp);const Rp="sphere";var zp,Fp=Dp;let Up=zp=class extends Ei{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new zp({x:this.x,y:this.y,z:this.z})}};var Lp;n([Lt({type:Number})],Up.prototype,"x",void 0),n([Lt({type:Number})],Up.prototype,"y",void 0),n([Lt({type:Number})],Up.prototype,"z",void 0),Up=zp=n([ve("esri.symbols.support.Symbol3DAnchorPosition3D")],Up);let Vp=Lp=class extends hf{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new Lp({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:x(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||"string"!=typeof this.resource.href}};n([Lt({type:kf,json:{write:!0}})],Vp.prototype,"material",void 0),n([Lt({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Vp.prototype,"castShadows",void 0),n([Lt({type:Fp,json:{write:!0}})],Vp.prototype,"resource",void 0),n([xl({Object:"object"},{readOnly:!0})],Vp.prototype,"type",void 0),n([Lt({type:Number,json:{write:!0}})],Vp.prototype,"width",void 0),n([Lt({type:Number,json:{write:!0}})],Vp.prototype,"height",void 0),n([Lt({type:Number,json:{write:!0}})],Vp.prototype,"depth",void 0),n([xl({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),Lt({json:{default:"origin"}})],Vp.prototype,"anchor",void 0),n([Lt({type:Up,json:{type:[Number],read:{reader:t=>new Up({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],Vp.prototype,"anchorPosition",void 0),n([Lt({type:Number,json:{write:!0}})],Vp.prototype,"heading",void 0),n([Lt({type:Number,json:{write:!0}})],Vp.prototype,"tilt",void 0),n([Lt({type:Number,json:{write:!0}})],Vp.prototype,"roll",void 0),n([Lt({readOnly:!0,dependsOn:["resource","resource.href"]})],Vp.prototype,"isPrimitive",null),Vp=Lp=n([ve("esri.symbols.ObjectSymbol3DLayer")],Vp);var Gp,qp=Vp;let Bp=Gp=class extends hf{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}get size(){return this.width&&this.height?this.width===this.height?this.width:void 0:this.width?this.width:this.height?this.height:void 0}set size(t){this.width=t,this.height=t}readSize(t,e){return e.height||e.width?t:e.size}clone(){return new Gp({enabled:this.enabled,material:x(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};n([Lt({type:kf,json:{write:!0}})],Bp.prototype,"material",void 0),n([Lt({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Bp.prototype,"castShadows",void 0),n([xl({Path:"path"},{readOnly:!0})],Bp.prototype,"type",void 0),n([Lt({type:Number})],Bp.prototype,"size",null),n([vs("size")],Bp.prototype,"readSize",null),n([Lt({type:["circle","quad"],json:{write:!0,default:"circle"}})],Bp.prototype,"profile",void 0),n([Lt({type:["miter","bevel","round"],json:{write:!0,default:"miter"}})],Bp.prototype,"join",void 0),n([Lt({type:["none","butt","square","round"],json:{write:!0,default:"butt"}})],Bp.prototype,"cap",void 0),n([Lt({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Bp.prototype,"width",void 0),n([Lt({type:Number,json:{write:!0}})],Bp.prototype,"height",void 0),n([Lt({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Bp.prototype,"anchor",void 0),n([Lt({type:["heading","all"],json:{write:!0,default:"all"}})],Bp.prototype,"profileRotation",void 0),Bp=Gp=n([ve("esri.symbols.PathSymbol3DLayer")],Bp);var Wp,Hp=Bp;let Jp=Wp=class extends Yi{constructor(){super(...arguments),this.color=new Ua([0,0,0,1]),this.size=0}clone(){return new Wp({color:w(this.color),size:this.size})}};n([Lt(df)],Jp.prototype,"color",void 0),n([Lt(ff)],Jp.prototype,"size",void 0),Jp=Wp=n([ve("esri.symbols.support.Symbol3DHalo")],Jp);var Yp,Qp=Jp;let Zp=Yp=class extends hf{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.material=null,this.text=void 0,this.type="text"}get font(){return this._get("font")||null}set font(t){t&&this._userSize&&(t.size=this._userSize),this._set("font",t)}writeFont(t,e,r,n){const i={...n,textSymbol3D:!0};e.font=t.write({},i),delete e.font.size}get size(){return null!=this._userSize?this._userSize:this.font&&null!=this.font.size?this.font.size:9}set size(t){this._userSize=t,this.font&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){return new Yp({enabled:this.enabled,font:this.font&&w(this.font),halo:this.halo&&w(this.halo),material:x(this.material)?this.material.clone():null,size:this.size,text:this.text})}static fromTextSymbol(t){const e=function(t,e){return t&&e>0?{color:w(t),size:e}:null}(t.haloColor,t.haloSize),r=t.font?t.font.clone():new sp;return new Yp({size:r.size,font:r,halo:e,material:t.color?{color:t.color.clone()}:null,text:t.text})}};n([Lt({type:sp,json:{write:!0}})],Zp.prototype,"font",null),n([be("font")],Zp.prototype,"writeFont",null),n([Lt({type:Qp,json:{write:!0}})],Zp.prototype,"halo",void 0),n([Lt({type:kf,json:{write:!0}})],Zp.prototype,"material",void 0),n([Lt(ff),Lt({dependsOn:["font.size"]})],Zp.prototype,"size",null),n([Lt({type:String,json:{write:!0}})],Zp.prototype,"text",void 0),n([xl({Text:"text"},{readOnly:!0})],Zp.prototype,"type",void 0),Zp=Yp=n([ve("esri.symbols.TextSymbol3DLayer")],Zp);var Kp,Xp=Zp;let ty=Kp=class extends hf{constructor(t){super(t),this.color=ey.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new Kp({color:w(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};n([Lt({type:Ua,nonNullable:!0,json:{type:[mt],write:(t,e,r)=>e[r]=t.toArray(1),default:()=>ey.clone(),defaultEquals:t=>t.toCss(!0)===ey.toCss(!0)}})],ty.prototype,"color",void 0),n([xl({Water:"water"},{readOnly:!0})],ty.prototype,"type",void 0),n([Lt({type:["small","medium","large"],json:{write:!0,default:"medium"}})],ty.prototype,"waterbodySize",void 0),n([Lt({type:Number,json:{write:!0,default:null}})],ty.prototype,"waveDirection",void 0),n([Lt({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],ty.prototype,"waveStrength",void 0),ty=Kp=n([ve("esri.symbols.WaterSymbol3DLayer")],ty);const ey=new Ua([0,119,190]);var ry=ty;function ny(t,e,r=th){return e||(e=new r),e===t||(e.removeAll(),function(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}(t)?e.addMany(t):t&&e.add(t)),e}function iy(t){return t}const sy=J.getLogger("esri.intl");function oy(t,e,r={}){const{format:n={}}=r;return G(t,(t=>function(t,e,r){let n,i;const s=t.indexOf(":");if(-1===s?n=t.trim():(n=t.slice(0,s).trim(),i=t.slice(s+1).trim()),!n)return"";const o=R(n,e);if(null==o)return"";const l=r[i]||r[n];return l?function(t,e){switch(e.type){case"date":return _h(t,e.intlOptions);case"number":return zh(t,e.intlOptions);default:return sy.warn("missing format descriptor for key {key}"),ly(t)}}(o,l):i?function(t,e){switch(e.toLowerCase()){case"dateformat":return _h(t);case"numberformat":return zh(t);default:return sy.warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?_h(t):/^numberformat/i.test(e)?zh(t):ly(t)}}(o,i):ly(o)}(t,e,n)))}function ly(t){switch(typeof t){case"string":return t;case"number":return zh(t);case"boolean":return""+t;default:return t instanceof Date?_h(t):""}}const ay=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,uy=new Set(["ar","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"]),cy=[],hy=new Map;async function dy(t){const e=mh();hy.has(t)||hy.set(t,async function(t,e){const r=[];for(const n of cy)if(fy(n.pattern,t))try{return await n.fetchMessageBundle(t,e)}catch(t){r.push(t)}if(r.length)throw new ge("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:r});throw new ge("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}(t,e));const r=hy.get(t);return await py.add(r),r}function fy(t,e){return"string"==typeof t?e.startsWith(t):t.test(e)}gh((()=>{hy.clear()}));const py=new class{constructor(){this._numLoading=0}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Yr())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}};async function yy(t){return x(vy.fetchBundleAsset)?vy.fetchBundleAsset(t):(await ru(t,{responseType:"json"})).data}class my{constructor({base:t="",pattern:e,location:r=new URL(window.location.href)}){let n;n="string"==typeof r?t=>new URL(t,new URL(r,i.location)).href:r instanceof URL?t=>new URL(t,r).href:r,this.pattern="string"==typeof e?new RegExp(`^${e}`):e,this.getAssetUrl=n,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,e){return async function(t,e,r,n){const i=e.exec(r);if(!i)throw new ge("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${e}"`);const s=i[1]?`${i[1]}/`:"",o=i[2],l=function(t){if(!ay.test(t))return null;const[,e,r]=ay.exec(t),n=e+(r?"-"+r.toUpperCase():"");return uy.has(n)?n:uy.has(e)?e:null}(n),a=`${s}${o}.json`,u=l?`${s}${o}_${l}.json`:a;let c;try{c=await yy(t(u))}catch(e){if(u===a)throw e;try{c=await yy(t(a))}catch{throw new ge("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:e})}}return c}(this.getAssetUrl,this.matcher,t,e)}}const vy={};function wy(t){return tr(W.assetsPath,t)}!function(t){if(!cy.includes(t)){for(const e of hy.keys())fy(t.pattern,e)&&hy.delete(e);cy.unshift(t)}}(new my({pattern:"esri/",location:wy}));class by{constructor(t){this.instance=t,this._resolver=Yr(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then((()=>{this._status=1,this._cleanUp()}),(()=>{this._status=2,this._cleanUp()}))}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return 1===this._status}isRejected(){return 2===this._status}isFulfilled(){return 0!==this._status}abort(){this._resolver.reject(Rr())}when(t,e){return this._resolver.promise.then(t,e)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const t=Yr(),e=[...this._resolvingPromises,t.promise],r=this._allPromise=$r(e);r.then((()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve(this.instance)}),(t=>{this.isFulfilled()||this._allPromise!==r||Hr(t)||this._resolver.reject(t)})),t.resolve()}}const gy=t=>{let e=class extends t{constructor(...t){super(...t),this._promiseProps=new by(this),this.addResolvingPromise(tn())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(t,e){return Dr(((t,e)=>{this._promiseProps.when(t,e)})).then(t,e)}catch(t){return this.when(null,t)}addResolvingPromise(t){t&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in t?t.when():t)}};return e=n([ve("esri.core.Promise")],e),e};let Sy=class extends(gy(Ei)){};Sy=n([ve("esri.core.Promise")],Sy);const xy=t=>{let e=class extends t{constructor(...t){super(...t),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise((t=>{const e=this.load.bind(this);this.load=r=>{const n=new Promise(((t,e)=>{const n=Br(r,e);this.destroyed&&e(new ge("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(t,e).finally((()=>{n&&n.remove()}))}));if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const t=this._loadController=zr();e({signal:t.signal}),qr(t.signal,(()=>{this._promiseProps.abort()}))}return t(),n}}))),this.when((()=>{this._set("loadStatus","loaded"),this._loadController=null}),(t=>{this._set("loadStatus","failed"),this._set("loadError",t),this._loadController=null}))}get loaded(){return"loaded"===this.loadStatus}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var t;return this.isFulfilled()||(this._set("loadError",new ge("load:cancelled","Cancelled")),null==(t=this._loadController)||t.abort()),this}};return n([Lt({readOnly:!0,dependsOn:["loadStatus"]})],e.prototype,"loaded",null),n([Lt({readOnly:!0})],e.prototype,"loadError",void 0),n([Lt()],e.prototype,"loadStatus",void 0),n([Lt({type:[Bt],readOnly:!0})],e.prototype,"loadWarnings",null),e=n([ve("esri.core.Loadable")],e),e};let My=class extends(xy(Sy)){};My=n([ve("esri.core.Loadable")],My),function(t){t.LoadableMixin=xy,t.isLoadable=function(t){return!(!t||!t.load)}}(My||(My={}));var jy,Oy=My;const ky=new nl({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Iy=jy=class extends Ei{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){"asc"!==t&&"desc"!==t||this._set("sortOrder",t)}clone(){return new jy({categories:this.categories?w(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let r,n;if(this.categories&&(r=this.categories.map((t=>Array.isArray(t)?JSON.stringify(t):t))),this.extent){const t=Es(this.extent,ms.WGS84);t&&(n=`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`)}let i=this.query;!this.disableExtraQuery&&t.extraQuery&&(i="("+i+")"+t.extraQuery);const s={categories:r,bbox:n,q:i,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map((t=>ky.toJSON(t.trim()))).join(","),s.sortOrder=this.sortOrder),{query:{...e,...s}}}};n([Lt()],Iy.prototype,"categories",void 0),n([Lt()],Iy.prototype,"disableExtraQuery",void 0),n([Lt({type:bo})],Iy.prototype,"extent",void 0),n([Lt()],Iy.prototype,"num",void 0),n([Lt()],Iy.prototype,"query",void 0),n([Lt()],Iy.prototype,"sortField",void 0),n([Lt()],Iy.prototype,"sortOrder",null),n([Lt()],Iy.prototype,"start",void 0),Iy=jy=n([ve("esri.portal.PortalQueryParams")],Iy);var Ay=Iy;let Cy=class extends Ei{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};n([Lt()],Cy.prototype,"nextQueryParams",void 0),n([Lt()],Cy.prototype,"queryParams",void 0),n([Lt()],Cy.prototype,"results",void 0),n([Lt()],Cy.prototype,"total",void 0),Cy=n([ve("esri.portal.PortalQueryResult")],Cy);var Ty=Cy;let Ny=class extends Yi{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new ge("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};n([Lt({type:Date})],Ny.prototype,"created",void 0),n([Lt()],Ny.prototype,"id",void 0),n([Lt()],Ny.prototype,"portal",void 0),n([Lt()],Ny.prototype,"title",void 0),n([Lt({dependsOn:["portal.restUrl"],readOnly:!0})],Ny.prototype,"url",null),n([Lt()],Ny.prototype,"username",void 0),Ny=n([ve("esri.portal.PortalFolder")],Ny);var Py=Ny;let _y=class extends Yi{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal._normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){const t=this.get("portal.restUrl");return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal._request(this.url+"/categorySchema",t).then((e=>{const r=e.categorySchema||[];return r.some((t=>"contentCategorySetsGroupQuery.LivingAtlas"===t.source))?this._fetchCategorySchemaSet("LivingAtlas",t):r}))}fetchMembers(t){return this.portal._request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new ge("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(t,e){let r=ut(Ay,t);return parseFloat(this.portal.currentVersion)>5?(r=r||new Ay,this.portal._queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",e)):(r=r?r.clone():new Ay,r.query="group:"+this.id+(r.query?" "+r.query:""),this.portal.queryItems(r,e))}_fetchCategorySchemaSet(t,e){return this.portal._fetchSelf(this.portal.authMode,!0,e).then((t=>{const r=t.contentCategorySetsGroupQuery;if(r){const t=new Ay;return t.disableExtraQuery=!0,t.num=1,t.query=r,this.portal.queryGroups(t,e)}throw new ge("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((r=>{if(r.total){const n=r.results[0],i=new Ay;return i.num=1,i.query=`typekeywords:"${t}"`,n.queryItems(i,e)}throw new ge("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((t=>t.total?t.results[0].fetchData("json",e).then((t=>{const e=t&&t.categorySchema;return e&&e.length?e:[]})):[]))}};n([Lt()],_y.prototype,"access",void 0),n([Lt({type:Date})],_y.prototype,"created",void 0),n([Lt()],_y.prototype,"description",void 0),n([Lt()],_y.prototype,"id",void 0),n([Lt()],_y.prototype,"isInvitationOnly",void 0),n([Lt({type:Date})],_y.prototype,"modified",void 0),n([Lt()],_y.prototype,"owner",void 0),n([Lt()],_y.prototype,"portal",void 0),n([Lt()],_y.prototype,"snippet",void 0),n([Lt()],_y.prototype,"sortField",void 0),n([Lt()],_y.prototype,"sortOrder",void 0),n([Lt()],_y.prototype,"tags",void 0),n([Lt()],_y.prototype,"thumbnail",void 0),n([Lt({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],_y.prototype,"thumbnailUrl",null),n([Lt()],_y.prototype,"title",void 0),n([Lt({dependsOn:["portal.restUrl"],readOnly:!0})],_y.prototype,"url",null),_y=n([ve("esri.portal.PortalGroup")],_y);var Ey=_y;const $y=Object.freeze({__proto__:null,default:Ey});var Dy;let Ry=Dy=class extends Yi{constructor(...t){super(...t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal._normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}`:null}get url(){const t=this.get("portal.restUrl");return t?`${t}/community/users/${this.username}`:null}addItem(t){const e=t&&t.item,r=t&&t.data,n=t&&t.folder,i={method:"post"};e&&(i.query=e.createPostQuery(),null!=r&&("string"==typeof r?i.query.text=r:"object"==typeof r&&(i.query.text=JSON.stringify(r))));let s=this.userContentUrl;return n&&(s+="/"+("string"==typeof n?n:n.id)),this.portal._request(s+"/addItem",i).then((t=>(e.id=t.id,e.portal=this.portal,e.loaded?e.reload():e.load())))}deleteItem(t){let e=this.userContentUrl;return t.ownerFolder&&(e+="/"+t.ownerFolder),this.portal._request(e+`/items/${t.id}/delete`,{method:"post"}).then((()=>{t.id=null,t.portal=null}))}deleteItems(t){const e=this.userContentUrl+"/deleteItems",r=t.map((t=>t.id));if(r.length){const n={method:"post",query:{items:r.join(",")}};return this.portal._request(e,n).then((()=>{t.forEach((t=>{t.id=null,t.portal=null}))}))}return tn(void 0)}fetchFolders(){return this.portal._request(this.userContentUrl,{query:{num:1}}).then((t=>{let e;return e=t&&t.folders?t.folders.map((t=>{const e=Py.fromJSON(t);return e.portal=this.portal,e})):[],e}))}fetchGroups(){return this.portal._request(this.url).then((t=>{let e;return e=t&&t.groups?t.groups.map((t=>{const e=Ey.fromJSON(t);return e.portal=this.portal,e})):[],e}))}fetchItems(t){t||(t={});let e,r=this.userContentUrl;return t.folder&&(r+="/"+t.folder.id),import("./p-540c739d.js").then((({default:n})=>(e=n,this.portal._request(r,{query:{folders:!1,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"}})))).then((t=>{let r;return t&&t.items?(r=t.items.map((t=>{const r=e.fromJSON(t);return r.portal=this.portal,r})),$r(r.map((t=>t.load()))).catch((t=>t)).then((()=>({items:r,nextStart:t.nextStart,total:t.total})))):{items:[],nextStart:-1,total:0}}))}fetchTags(){return this.portal._request(this.url+"/tags").then((t=>t.tags))}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new Ey({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Xr(new ge("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new ge("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new Dy;return e.sourceJSON=t,e.read(t),e}};n([Lt()],Ry.prototype,"access",void 0),n([Lt({type:Date})],Ry.prototype,"created",void 0),n([Lt()],Ry.prototype,"culture",void 0),n([Lt()],Ry.prototype,"description",void 0),n([Lt()],Ry.prototype,"email",void 0),n([Lt()],Ry.prototype,"favGroupId",void 0),n([Lt()],Ry.prototype,"fullName",void 0),n([Lt({type:Date})],Ry.prototype,"modified",void 0),n([Lt()],Ry.prototype,"orgId",void 0),n([Lt()],Ry.prototype,"portal",void 0),n([Lt()],Ry.prototype,"preferredView",void 0),n([Lt()],Ry.prototype,"privileges",void 0),n([Lt()],Ry.prototype,"region",void 0),n([Lt()],Ry.prototype,"role",void 0),n([Lt()],Ry.prototype,"roleId",void 0),n([Lt()],Ry.prototype,"sourceJSON",void 0),n([Lt()],Ry.prototype,"thumbnail",void 0),n([Lt({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],Ry.prototype,"thumbnailUrl",null),n([Lt()],Ry.prototype,"units",void 0),n([Lt({dependsOn:["portal.restUrl"],readOnly:!0})],Ry.prototype,"userContentUrl",null),n([Lt({dependsOn:["portal.restUrl"],readOnly:!0})],Ry.prototype,"url",null),n([Lt()],Ry.prototype,"username",void 0),n([Lt()],Ry.prototype,"userType",void 0),Ry=Dy=n([ve("esri.portal.PortalUser")],Ry);var zy=Ry;const Fy=Object.freeze({__proto__:null,default:zy});var Uy;let Ly;const Vy={PortalGroup:()=>Promise.resolve().then((function(){return $y})),PortalItem:()=>import("./p-540c739d.js"),PortalUser:()=>Promise.resolve().then((function(){return Fy}))};let Gy=Uy=class extends(Wi(Oy)){constructor(t){super(t),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=W.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return"string"==typeof t?{url:t}:t}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(t){if(t)for(const e of t)-1===W.request.trustedServers.indexOf(e)&&W.request.trustedServers.push(e);return t}readDefaultBasemap(t){if(t){const e=Ly.fromJSON(t);return e.portalItem={portal:this},e}return null}readDefaultVectorBasemap(t){if(t){const e=Ly.fromJSON(t);return e.portalItem={portal:this},e}return null}get extraQuery(){return this.id&&this.user&&this.user.orgId&&!this.canSearchPublic?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let t=this.url;if(t){const e=t.indexOf("/sharing");t=e>0?t.substring(0,e):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,e=this.thumbnail;return t&&e?this._normalizeSSL(t+"/portals/self/resources/"+e):null}readUrlKey(t){return t?t.toLowerCase():t}readUser(t){let e=null;return t&&(e=zy.fromJSON(t),e.portal=this),e}load(t){const e=import("./p-71546ce1.js").then((function(t){return t.B})).then((({default:e})=>{Fr(t),Ly=e})).then((()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,t))).then((t=>{if(Qa){const t=Qa;this.credential=t.findCredential(this.restUrl),this.credential||this.authMode!==Uy.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=t.on("credential-create",(()=>{t.findCredential(this.restUrl)&&this._signIn()})))}this.sourceJSON=t,this.read(t)}));return this.addResolvingPromise(e),tn(this)}async createClosestFacilityTask(){await this.load();const t=this._getHelperServiceUrl("closestFacility");return new((await import("./p-66e33b1b.js")).default)(t)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),e=(await import("./p-7da88ccd.js")).default;return t?t.map((t=>new e({id:t.id,url:t.url}))):[]}async createGeometryService(){await this.load();const t=this._getHelperServiceUrl("geometry");return new((await import("./p-85c0a55f.js")).default)({url:t})}async createPrintTask(){await this.load();const t=this._getHelperServiceUrl("printTask");return new((await import("./p-4d7948c6.js")).default)(t)}async createRouteTask(){await this.load();const t=this._getHelperServiceUrl("route");return new((await import("./p-3e9e683b.js")).default)(t)}async createServiceAreaTask(){await this.load();const t=this._getHelperServiceUrl("serviceArea");return new((await import("./p-e20d030d.js")).default)(t)}fetchBasemaps(t,e){const r=new Ay;return r.query=t||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0,this.queryGroups(r,e).then((t=>{if(r.num=100,r.query='type:"Web Map" -type:"Web Application"',t.total){const n=t.results[0];return r.sortField=n.sortField||"name",r.sortOrder=n.sortOrder||"desc",n.queryItems(r,e)}return null})).then((t=>{let e;return e=t&&t.total?t.results.filter((t=>"Web Map"===t.type)).map((t=>new Ly({portalItem:t}))):[],e}))}fetchCategorySchema(t){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",t).then((t=>t.categorySchema)):Lr(t)?Xr(Rr()):tn([])}fetchFeaturedGroups(t){const e=this.featuredGroups,r=new Ay;if(r.num=100,r.sortField="title",e&&e.length){const n=[];for(const t of e)n.push(`(title:"${t.title}" AND owner:${t.owner})`);return r.query=n.join(" OR "),this.queryGroups(r,t).then((t=>t.results))}return Lr(t)?Xr(Rr()):tn([])}fetchRegions(t){const e=this.user&&this.user.culture||this.culture||mh();return this._request(this.restUrl+"/portals/regions",{...t,query:{culture:e}})}static getDefault(){return Uy._default&&!Uy._default.destroyed||(Uy._default=new Uy),Uy._default}queryGroups(t,e){return this._queryPortal("/community/groups",t,"PortalGroup",e)}queryItems(t,e){return this._queryPortal("/search",t,"PortalItem",e)}queryUsers(t,e){return t.sortField||(t.sortField="username"),this._queryPortal("/community/users",t,"PortalUser",e)}toJSON(){throw new ge("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Uy({sourceJSON:t})}_getHelperService(t){const e=this.helperServices&&this.helperServices[t];if(!e)throw new ge("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return e}_getHelperServiceUrl(t){const e=this._getHelperService(t);if(!e.url)throw new ge("portal:service-url-not-found",`The \`helperServices\` entry "${t}" does not include a \`url\` value`);return e.url}_fetchSelf(t=this.authMode,e=!1,r){const n=this.restUrl+"/portals/self",i={authMode:t,query:{culture:mh().toLowerCase()},...r};return"auto"===i.authMode&&(i.authMode="no-prompt"),e&&(i.query.default=!0),this._request(n,i)}_queryPortal(t,e,r,n){const i=ut(Ay,e),s=e=>this._request(this.restUrl+t,{...i.toRequestOptions(this),...n}).then((t=>{const r=i.clone();return r.start=t.nextStart,new Ty({nextQueryParams:r,queryParams:i,total:t.total,results:Uy._resultsToTypedArray(e,{portal:this},t,n)})})).then((t=>$r(t.results.map((e=>"function"==typeof e.when?e.when():t))).then((()=>t),(e=>(Vr(e),t)))));return r&&Vy[r]?Vy[r]().then((({default:t})=>(Fr(n),s(t)))):s()}_signIn(){if(this.authMode===Uy.AUTH_MODE_ANONYMOUS)return Xr(new ge("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Xr(this.loadError);const t=t=>tn().then((()=>"not-loaded"===this.loadStatus?(t||(this.authMode="immediate"),this.load().then((()=>null))):"loading"===this.loadStatus?this.load().then((()=>this.credential?null:(this.credential=t,this._fetchSelf("immediate")))):this.user&&this.credential===t?null:(this.credential=t,this._fetchSelf("immediate")))).then((t=>{t&&(this.sourceJSON=t,this.read(t))}));return Qa?Qa.getCredential(this.restUrl).then((e=>t(e))):t(this.credential)}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(t){const e=this.credential&&this.credential.token;return this._normalizeSSL(e?t+(t.indexOf("?")>-1?"&":"?")+"token="+e:t)}_requestToTypedArray(t,e,r){return this._request(t,e).then((t=>{const e=Uy._resultsToTypedArray(r,{portal:this},t);return $r(e.map((e=>"function"==typeof e.when?e.when():t))).then((()=>e),(()=>e))}))}_request(t,e={}){const r={f:"json",...e.query},{authMode:n=(this.authMode===Uy.AUTH_MODE_ANONYMOUS?"anonymous":"auto"),body:i=null,cacheBust:s=!1,method:o="auto",responseType:l="json",signal:a}=e,u={authMode:n,body:i,cacheBust:s,method:o,query:r,responseType:l,timeout:0,signal:a};return ru(this._normalizeSSL(t),u).then((t=>t.data))}static _resultsToTypedArray(t,e,r,n){let i;if(r){const s=x(n)?n.signal:null;i=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(t||e)&&(i=i.map((r=>{const n=g(t?t.fromJSON(r):r,e);return"function"==typeof n.load&&n.load(s),n})))}else i=[];return i}};Gy.AUTH_MODE_ANONYMOUS="anonymous",Gy.AUTH_MODE_AUTO="auto",Gy.AUTH_MODE_IMMEDIATE="immediate",n([Lt()],Gy.prototype,"access",void 0),n([Lt()],Gy.prototype,"allSSL",void 0),n([Lt()],Gy.prototype,"authMode",void 0),n([Lt()],Gy.prototype,"authorizedCrossOriginDomains",void 0),n([vs("authorizedCrossOriginDomains")],Gy.prototype,"readAuthorizedCrossOriginDomains",null),n([Lt()],Gy.prototype,"basemapGalleryGroupQuery",void 0),n([Lt()],Gy.prototype,"bingKey",void 0),n([Lt()],Gy.prototype,"canListApps",void 0),n([Lt()],Gy.prototype,"canListData",void 0),n([Lt()],Gy.prototype,"canListPreProvisionedItems",void 0),n([Lt()],Gy.prototype,"canProvisionDirectPurchase",void 0),n([Lt()],Gy.prototype,"canSearchPublic",void 0),n([Lt()],Gy.prototype,"canShareBingPublic",void 0),n([Lt()],Gy.prototype,"canSharePublic",void 0),n([Lt()],Gy.prototype,"canSignInArcGIS",void 0),n([Lt()],Gy.prototype,"canSignInIDP",void 0),n([Lt()],Gy.prototype,"colorSetsGroupQuery",void 0),n([Lt()],Gy.prototype,"commentsEnabled",void 0),n([Lt({type:Date})],Gy.prototype,"created",void 0),n([Lt()],Gy.prototype,"credential",void 0),n([Lt()],Gy.prototype,"culture",void 0),n([Lt()],Gy.prototype,"currentVersion",void 0),n([Lt()],Gy.prototype,"customBaseUrl",void 0),n([Lt()],Gy.prototype,"defaultBasemap",void 0),n([vs("defaultBasemap")],Gy.prototype,"readDefaultBasemap",null),n([Lt({type:bo})],Gy.prototype,"defaultExtent",void 0),n([Lt()],Gy.prototype,"defaultVectorBasemap",void 0),n([vs("defaultVectorBasemap")],Gy.prototype,"readDefaultVectorBasemap",null),n([Lt()],Gy.prototype,"description",void 0),n([Lt()],Gy.prototype,"eueiEnabled",void 0),n([Lt({dependsOn:["user","id","canSearchPublic"],readOnly:!0})],Gy.prototype,"extraQuery",null),n([Lt()],Gy.prototype,"featuredGroups",void 0),n([Lt()],Gy.prototype,"featuredItemsGroupQuery",void 0),n([Lt()],Gy.prototype,"galleryTemplatesGroupQuery",void 0),n([Lt()],Gy.prototype,"livingAtlasGroupQuery",void 0),n([Lt()],Gy.prototype,"hasCategorySchema",void 0),n([Lt()],Gy.prototype,"helpBase",void 0),n([Lt()],Gy.prototype,"helperServices",void 0),n([Lt()],Gy.prototype,"helpMap",void 0),n([Lt()],Gy.prototype,"homePageFeaturedContent",void 0),n([Lt()],Gy.prototype,"homePageFeaturedContentCount",void 0),n([Lt()],Gy.prototype,"httpPort",void 0),n([Lt()],Gy.prototype,"httpsPort",void 0),n([Lt()],Gy.prototype,"id",void 0),n([Lt()],Gy.prototype,"ipCntryCode",void 0),n([Lt({dependsOn:["access"],readOnly:!0})],Gy.prototype,"isOrganization",null),n([Lt()],Gy.prototype,"isPortal",void 0),n([Lt()],Gy.prototype,"isReadOnly",void 0),n([Lt()],Gy.prototype,"layerTemplatesGroupQuery",void 0),n([Lt()],Gy.prototype,"maxTokenExpirationMinutes",void 0),n([Lt({type:Date})],Gy.prototype,"modified",void 0),n([Lt()],Gy.prototype,"name",void 0),n([Lt()],Gy.prototype,"portalHostname",void 0),n([Lt()],Gy.prototype,"portalMode",void 0),n([Lt()],Gy.prototype,"portalProperties",void 0),n([Lt()],Gy.prototype,"region",void 0),n([Lt({dependsOn:["url"],readOnly:!0})],Gy.prototype,"restUrl",null),n([Lt()],Gy.prototype,"rotatorPanels",void 0),n([Lt()],Gy.prototype,"showHomePageDescription",void 0),n([Lt()],Gy.prototype,"sourceJSON",void 0),n([Lt()],Gy.prototype,"staticImagesUrl",void 0),n([Lt()],Gy.prototype,"stylesGroupQuery",void 0),n([Lt()],Gy.prototype,"supportsHostedServices",void 0),n([Lt()],Gy.prototype,"symbolSetsGroupQuery",void 0),n([Lt()],Gy.prototype,"templatesGroupQuery",void 0),n([Lt()],Gy.prototype,"thumbnail",void 0),n([Lt({dependsOn:["restUrl","thumbnail"],readOnly:!0})],Gy.prototype,"thumbnailUrl",null),n([Lt()],Gy.prototype,"units",void 0),n([Lt()],Gy.prototype,"url",void 0),n([Lt()],Gy.prototype,"urlKey",void 0),n([vs("urlKey")],Gy.prototype,"readUrlKey",null),n([Lt()],Gy.prototype,"user",void 0),n([vs("user")],Gy.prototype,"readUser",null),n([Lt()],Gy.prototype,"useStandardizedQuery",void 0),n([Lt()],Gy.prototype,"useVectorBasemaps",void 0),n([Lt()],Gy.prototype,"vectorBasemapGalleryGroupQuery",void 0),Gy=Uy=n([ve("esri.portal.Portal")],Gy);var qy,By=Gy;let Wy=qy=class extends Ei{constructor(){super(...arguments),this.portal=null}clone(){return new qy({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};n([Lt({type:String})],Wy.prototype,"name",void 0),n([Lt({type:String})],Wy.prototype,"styleUrl",void 0),n([Lt({type:String})],Wy.prototype,"styleName",void 0),n([Lt({type:By})],Wy.prototype,"portal",void 0),Wy=qy=n([ve("esri.symbols.support.StyleOrigin")],Wy);var Hy,Jy=Wy;let Yy=Hy=class extends Ei{clone(){return new Hy({url:this.url})}};n([Lt({type:String})],Yy.prototype,"url",void 0),Yy=Hy=n([ve("esri.symbols.support.Thumbnail")],Yy);var Qy=Yy;const Zy={icon:Np,object:qp,line:Ep,path:Hp,fill:np,extrude:Af,text:Xp,water:ry},Ky=th.ofType({base:hf,key:"type",typeMap:Zy,errorContext:"symbol-layer"}),Xy=J.getLogger("esri.symbols.Symbol3D");let tm=class extends Ba{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const e=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers;this._set("symbolLayers",new(e&&e.type||th))}get color(){return null}set color(t){Xy.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){ny(t,this._get("symbolLayers"))}readStyleOrigin(t,e,r){if(t.styleUrl&&t.name){const e=op(t.styleUrl,r);return new Jy({styleUrl:e,name:t.name})}if(t.styleName&&t.name)return new Jy({portal:r&&r.portal||By.getDefault(),styleName:t.styleName,name:t.name});r&&r.messages&&r.messages.push(new Bt("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:t}))}writeStyleOrigin(t,e,r,n){if(t.styleUrl&&t.name){let r=lp(t.styleUrl,n);rr(r)&&(r=Xe(r)),e.styleOrigin={styleUrl:r,name:t.name}}else t.styleName&&t.name&&(t.portal&&n&&n.portal&&!We(t.portal.restUrl,n.portal.restUrl)?n&&n.messages&&n.messages.push(new Bt("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):e.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof hf||t&&Zy[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};n([Lt({json:{read:!1,write:!1}})],tm.prototype,"color",null),n([Lt({type:Ky,nonNullable:!0,json:{write:!0}}),Ms(iy)],tm.prototype,"symbolLayers",null),n([Lt({type:Jy})],tm.prototype,"styleOrigin",void 0),n([vs("styleOrigin")],tm.prototype,"readStyleOrigin",null),n([be("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],tm.prototype,"writeStyleOrigin",null),n([Lt({type:Qy,json:{read:!1}})],tm.prototype,"thumbnail",void 0),n([Lt({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],tm.prototype,"type",void 0),tm=n([ve("esri.symbols.Symbol3D")],tm);var em,rm=tm;let nm=em=class extends Yi{constructor(){super(...arguments),this.color=new Ua("white")}clone(){return new em({color:w(this.color)})}};n([Lt(df)],nm.prototype,"color",void 0),nm=em=n([ve("esri.symbols.callouts.LineCallout3DBorder")],nm);var im=nm;Object.freeze({__proto__:null,get LineCallout3DBorder(){return nm},default:im});let sm=class extends Yi{constructor(t){super(t),this.visible=!0}clone(){}};n([Lt({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],sm.prototype,"type",void 0),n([Lt({readOnly:!0})],sm.prototype,"visible",void 0),sm=n([ve("esri.symbols.callouts.Callout3D")],sm);var om,lm=sm;let am=om=class extends lm{constructor(t){super(t),this.type="line",this.color=new Ua([0,0,0,1]),this.size=kc(1),this.border=null}get visible(){return this.size>0&&x(this.color)&&this.color.a>0}clone(){return new om({color:w(this.color),size:this.size,border:w(this.border)})}};n([xl({line:"line"},{readOnly:!0})],am.prototype,"type",void 0),n([Lt(df)],am.prototype,"color",void 0),n([Lt(ff)],am.prototype,"size",void 0),n([Lt({type:im,json:{write:!0}})],am.prototype,"border",void 0),n([Lt({dependsOn:["size","color"],readOnly:!0})],am.prototype,"visible",null),am=om=n([ve("esri.symbols.callouts.LineCallout3D")],am);var um,cm=am;let hm=um=class extends Yi{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0}clone(){return new um({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};n([Lt(ff)],hm.prototype,"screenLength",void 0),n([Lt({type:Number,json:{write:!0,default:0}})],hm.prototype,"minWorldLength",void 0),n([Lt({type:Number,json:{write:!0}})],hm.prototype,"maxWorldLength",void 0),hm=um=n([ve("esri.symbols.support.Symbol3DVerticalOffset")],hm);var dm=hm;function fm(t){if(!t)return!1;const e=t.verticalOffset;return!!e&&!(e.screenLength<=0||e.maxWorldLength<=0)}function pm(t){if(!t)return!1;if(!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!e&&!!e.visible&&!!fm(t)}const ym={types:{key:"type",base:lm,typeMap:{line:cm}},json:{write:!0}};var mm;const vm=th.ofType({base:null,key:"type",typeMap:{text:Xp}});let wm=mm=class extends rm{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new vm,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return pm(this)}hasVisibleVerticalOffset(){return fm(this)}clone(){return new mm({styleOrigin:w(this.styleOrigin),symbolLayers:w(this.symbolLayers),thumbnail:w(this.thumbnail),callout:w(this.callout),verticalOffset:w(this.verticalOffset)})}static fromTextSymbol(t){return new mm({symbolLayers:[Xp.fromTextSymbol(t)]})}};n([Lt({type:dm,json:{write:!0}})],wm.prototype,"verticalOffset",void 0),n([Lt(ym)],wm.prototype,"callout",void 0),n([Lt({json:{read:!1,write:!1}})],wm.prototype,"styleOrigin",void 0),n([Lt({type:vm})],wm.prototype,"symbolLayers",void 0),n([xl({LabelSymbol3D:"label-3d"},{readOnly:!0})],wm.prototype,"type",void 0),wm=mm=n([ve("esri.symbols.LabelSymbol3D")],wm);var bm,gm=wm;const Sm=th.ofType({base:null,key:"type",typeMap:{line:Ep,path:Hp}}),xm=th.ofType({base:null,key:"type",typeMap:{line:Ep,path:Hp}});let Mm=bm=class extends rm{constructor(t){super(t),this.symbolLayers=new Sm,this.type="line-3d"}clone(){return new bm({styleOrigin:w(this.styleOrigin),symbolLayers:w(this.symbolLayers),thumbnail:w(this.thumbnail)})}static fromSimpleLineSymbol(t){return new bm({symbolLayers:[Ep.fromSimpleLineSymbol(t)]})}};n([Lt({type:Sm,json:{type:xm}})],Mm.prototype,"symbolLayers",void 0),n([xl({LineSymbol3D:"line-3d"},{readOnly:!0})],Mm.prototype,"type",void 0),Mm=bm=n([ve("esri.symbols.LineSymbol3D")],Mm);var jm=Mm;let Om=class extends Ba{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};n([Lt({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Om.prototype,"angle",void 0),n([Lt({type:["simple-marker","picture-marker"],readOnly:!0})],Om.prototype,"type",void 0),n([Lt({type:Number,cast:Ic,json:{write:!0}})],Om.prototype,"xoffset",void 0),n([Lt({type:Number,cast:Ic,json:{write:!0}})],Om.prototype,"yoffset",void 0),n([Lt({type:Number,cast:t=>"auto"===t?t:Ic(t),json:{write:!0}})],Om.prototype,"size",void 0),Om=n([ve("esri.symbols.MarkerSymbol")],Om);var km,Im=Om;const Am=th.ofType({base:null,key:"type",typeMap:{fill:np}});let Cm=km=class extends rm{constructor(t){super(t),this.symbolLayers=new Am,this.type="mesh-3d"}clone(){return new km({styleOrigin:w(this.styleOrigin),symbolLayers:w(this.symbolLayers),thumbnail:w(this.thumbnail)})}};n([Lt({type:Am})],Cm.prototype,"symbolLayers",void 0),n([xl({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Cm.prototype,"type",void 0),Cm=km=n([ve("esri.symbols.MeshSymbol3D")],Cm);var Tm=Cm;function Nm(t,e){return function(t){return t&&("service"===t.origin||"portal-item"===t.origin)&&t.layer&&("feature"===t.layer.type||"stream"===t.layer.type)}(e)&&!rr(t)&&e.layer.parsedUrl?tr(e.layer.parsedUrl.path,"images",t):op(t,e)}const Pm={json:{read:{source:["imageData","url"],reader:function(t,e,r){return e.imageData?ar({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):Nm(e.url,r)}},write:{writer(t,e,r,n){!function(t,e,r,n){if(ir(t)){const i=lr(t);e.contentType=i.mediaType,e.imageData=i.data,r&&r.imageData===e.imageData&&r.url&&up(r.url,e,"url",n)}else up(t,e,"url",n)}(t,e,this.source,n)}}}},_m={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,r){const n={};return e.imageData&&(n.imageData=e.imageData),e.contentType&&(n.contentType=e.contentType),e.url&&(n.url=Nm(e.url,r)),n}}}};var Em;let $m=Em=class extends Ff{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,r,n){if(t&&"string"!=typeof t&&null==t.imageData)return t;const i={};return t&&(i.url=t),e&&(i.outline=e),null!=r&&(i.width=Ic(r)),null!=n&&(i.height=Ic(n)),i}clone(){const t=new Em({color:w(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",w(this.source)),t}hash(){var t;return`${super.hash()}.${null==(t=this.color)?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};n([xl({esriPFS:"picture-fill"},{readOnly:!0})],$m.prototype,"type",void 0),n([Lt(Pm)],$m.prototype,"url",void 0),n([Lt({type:Number,json:{write:!0}})],$m.prototype,"xscale",void 0),n([Lt({type:Number,json:{write:!0}})],$m.prototype,"yscale",void 0),n([Lt({type:Number,cast:Ic,json:{write:!0}})],$m.prototype,"width",void 0),n([Lt({type:Number,cast:Ic,json:{write:!0}})],$m.prototype,"height",void 0),n([Lt({type:Number,cast:Ic,json:{write:!0}})],$m.prototype,"xoffset",void 0),n([Lt({type:Number,cast:Ic,json:{write:!0}})],$m.prototype,"yoffset",void 0),n([Lt(_m)],$m.prototype,"source",void 0),$m=Em=n([ve("esri.symbols.PictureFillSymbol")],$m);var Dm,Rm=$m;let zm=Dm=class extends Im{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,r){if(t&&"string"!=typeof t&&null==t.imageData)return t;const n={};return t&&(n.url=t),null!=e&&(n.width=Ic(e)),null!=r&&(n.height=Ic(r)),n}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new Dm({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",w(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};n([Lt({json:{write:!1}})],zm.prototype,"color",void 0),n([xl({esriPMS:"picture-marker"},{readOnly:!0})],zm.prototype,"type",void 0),n([Lt(Pm)],zm.prototype,"url",void 0),n([Lt(_m)],zm.prototype,"source",void 0),n([Lt({type:Number,cast:Ic,json:{write:!0}})],zm.prototype,"height",void 0),n([vs("height",["height","size"])],zm.prototype,"readHeight",null),n([Lt({type:Number,cast:Ic,json:{write:!0}})],zm.prototype,"width",void 0),n([Lt({json:{write:!1}})],zm.prototype,"size",void 0),zm=Dm=n([ve("esri.symbols.PictureMarkerSymbol")],zm);var Fm,Um=zm;const Lm=th.ofType({base:null,key:"type",typeMap:{icon:Np,object:qp,text:Xp}}),Vm=th.ofType({base:null,key:"type",typeMap:{icon:Np,object:qp}});let Gm=Fm=class extends rm{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new Lm,this.type="point-3d"}writeSymbolLayers(t,e,r,n){const i=t.filter((t=>"text"!==t.type));if(n&&n.messages&&i.length<t.length){const e=t.find((t=>"text"===t.type));n.messages.push(new ge("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:e}))}e[r]=i.map((t=>t.write({},n))).toArray()}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return pm(this)}hasVisibleVerticalOffset(){return fm(this)}clone(){return new Fm({verticalOffset:w(this.verticalOffset),callout:w(this.callout),styleOrigin:w(this.styleOrigin),symbolLayers:w(this.symbolLayers),thumbnail:w(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new Fm({symbolLayers:[Np.fromSimpleMarkerSymbol(t)]})}static fromPictureMarkerSymbol(t){return new Fm({symbolLayers:[Np.fromPictureMarkerSymbol(t)]})}static fromCIMSymbol(t){return new Fm({symbolLayers:[Np.fromCIMSymbol(t)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}})}static fromTextSymbol(t){return new Fm({symbolLayers:[Xp.fromTextSymbol(t)]})}};n([Lt({type:dm,json:{write:!0}})],Gm.prototype,"verticalOffset",void 0),n([Lt(ym)],Gm.prototype,"callout",void 0),n([Lt({type:Lm,json:{type:Vm,origins:{"web-scene":{type:Vm}}}})],Gm.prototype,"symbolLayers",void 0),n([be("web-scene","symbolLayers")],Gm.prototype,"writeSymbolLayers",null),n([xl({PointSymbol3D:"point-3d"},{readOnly:!0})],Gm.prototype,"type",void 0),Gm=Fm=n([ve("esri.symbols.PointSymbol3D")],Gm);var qm,Bm=Gm;const Wm=th.ofType({base:null,key:"type",typeMap:{extrude:Af,fill:np,icon:Np,line:Ep,object:qp,text:Xp,water:ry}}),Hm=th.ofType({base:null,key:"type",typeMap:{extrude:Af,fill:np,icon:Np,line:Ep,object:qp,water:ry}});let Jm=qm=class extends rm{constructor(t){super(t),this.type="polygon-3d"}writeSymbolLayers(t,e,r,n){const i=t.filter((t=>"text"!==t.type));if(n&&n.messages&&i.length<t.length){const e=t.find((t=>"text"===t.type));n.messages.push(new ge("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:e}))}e[r]=i.map((t=>t.write({},n))).toArray()}clone(){return new qm({styleOrigin:w(this.styleOrigin),symbolLayers:w(this.symbolLayers),thumbnail:w(this.thumbnail)})}static fromJSON(t){const e=new qm;if(e.read(t),2===e.symbolLayers.length&&"fill"===e.symbolLayers.getItemAt(0).type&&"line"===e.symbolLayers.getItemAt(1).type){const r=e.symbolLayers.getItemAt(0),n=e.symbolLayers.getItemAt(1);!n.enabled||t.symbolLayers&&t.symbolLayers[1]&&!1===t.symbolLayers[1].enable||(r.outline={size:n.size,color:x(n.material)?n.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new qm({symbolLayers:[np.fromSimpleFillSymbol(t)]})}};n([Lt({type:Wm,json:{type:Hm}})],Jm.prototype,"symbolLayers",void 0),n([be("web-scene","symbolLayers")],Jm.prototype,"writeSymbolLayers",null),n([xl({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Jm.prototype,"type",void 0),Jm=qm=n([ve("esri.symbols.PolygonSymbol3D")],Jm);var Ym,Qm=Jm;const Zm=new nl({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Km=Ym=class extends Ff{constructor(...t){super(...t),this.color=new Ua([0,0,0,.25]),this.outline=new Rf,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,r){if(t&&"string"!=typeof t)return t;const n={};return t&&(n.style=t),e&&(n.outline=e),r&&(n.color=r),n}clone(){return new Ym({color:w(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};n([Lt()],Km.prototype,"color",void 0),n([Lt()],Km.prototype,"outline",void 0),n([xl({esriSFS:"simple-fill"},{readOnly:!0})],Km.prototype,"type",void 0),n([Lt({type:Zm.apiValues,json:{read:Zm.read,write:Zm.write}})],Km.prototype,"style",void 0),Km=Ym=n([ve("esri.symbols.SimpleFillSymbol")],Km);var Xm,tv=Km;const ev=new nl({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let rv=Xm=class extends Im{constructor(...t){super(...t),this.color=new Ua([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Rf}normalizeCtorArgs(t,e,r,n){if(t&&"string"!=typeof t)return t;const i={};return t&&(i.style=t),null!=e&&(i.size=Ic(e)),r&&(i.outline=r),n&&(i.color=n),i}writeColor(t,e){t&&"x"!==this.style&&"cross"!==this.style&&(e.color=t.toJSON()),null===t&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new Xm({angle:this.angle,color:w(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${null==(t=this.outline)?void 0:t.hash()}`}};n([Lt()],rv.prototype,"color",void 0),n([be("color")],rv.prototype,"writeColor",null),n([xl({esriSMS:"simple-marker"},{readOnly:!0})],rv.prototype,"type",void 0),n([Lt()],rv.prototype,"size",void 0),n([Lt({type:ev.apiValues,json:{read:ev.read,write:ev.write}})],rv.prototype,"style",void 0),n([Lt({type:String,json:{write:!0}})],rv.prototype,"path",null),n([Lt({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Rf}},json:{default:null,write:!0}})],rv.prototype,"outline",void 0),rv=Xm=n([ve("esri.symbols.SimpleMarkerSymbol")],rv);var nv,iv=rv;let sv=nv=class extends Ba{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new sp,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment=null,this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,r){if(t&&"string"!=typeof t)return t;const n={};return t&&(n.text=t),e&&(n.font=e),r&&(n.color=r),n}writeLineWidth(t,e,r,n){n&&"string"!=typeof n||(e[r]=t)}castLineWidth(t){return Ic(t)}writeLineHeight(t,e,r,n){n&&"string"!=typeof n||(e[r]=t)}clone(){return new nv({angle:this.angle,backgroundColor:w(this.backgroundColor),borderLineColor:w(this.borderLineColor),borderLineSize:this.borderLineSize,color:w(this.color),font:this.font&&this.font.clone(),haloColor:w(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};n([Lt({type:Ua,json:{write:!0}})],sv.prototype,"backgroundColor",void 0),n([Lt({type:Ua,json:{write:!0}})],sv.prototype,"borderLineColor",void 0),n([Lt({type:Number,json:{write:!0}})],sv.prototype,"borderLineSize",void 0),n([Lt({type:sp,json:{write:!0}})],sv.prototype,"font",void 0),n([Lt({type:["left","right","center","justify"],json:{write:!0}})],sv.prototype,"horizontalAlignment",void 0),n([Lt({type:Boolean,json:{write:!0}})],sv.prototype,"kerning",void 0),n([Lt({type:Ua,json:{write:!0}})],sv.prototype,"haloColor",void 0),n([Lt({type:Number,cast:Ic,json:{write:!0}})],sv.prototype,"haloSize",void 0),n([Lt({type:Boolean,json:{write:!0}})],sv.prototype,"rightToLeft",void 0),n([Lt({type:Boolean,json:{write:!0}})],sv.prototype,"rotated",void 0),n([Lt({type:String,json:{write:!0}})],sv.prototype,"text",void 0),n([xl({esriTS:"text"},{readOnly:!0})],sv.prototype,"type",void 0),n([Lt({type:["baseline","top","middle","bottom"],json:{write:!0}})],sv.prototype,"verticalAlignment",void 0),n([Lt({type:Number,cast:Ic,json:{write:!0}})],sv.prototype,"xoffset",void 0),n([Lt({type:Number,cast:Ic,json:{write:!0}})],sv.prototype,"yoffset",void 0),n([Lt({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],sv.prototype,"angle",void 0),n([Lt({type:Number,json:{write:!0}})],sv.prototype,"width",void 0),n([Lt({type:Number})],sv.prototype,"lineWidth",void 0),n([be("lineWidth")],sv.prototype,"writeLineWidth",null),n([Ms("lineWidth")],sv.prototype,"castLineWidth",null),n([Lt({type:Number})],sv.prototype,"lineHeight",void 0),n([be("lineHeight")],sv.prototype,"writeLineHeight",null),sv=nv=n([ve("esri.symbols.TextSymbol")],sv);var ov,lv=sv;const av=J.getLogger("esri.symbols.WebStyleSymbol");let uv=ov=class extends Ba{constructor(t){super(t),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}read(t,e){this.portal=e?e.portal:void 0,super.read(t,e)}clone(){return new ov({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,e){const r=await import("./p-46a6b4f6.js");Fr(e);const n=r.resolveWebStyleSymbol(this,{portal:this.portal},t,e);return n.catch((t=>{av.error("#fetchSymbol()","Failed to create symbol from style",t)})),n}};n([Lt({json:{write:!1}})],uv.prototype,"color",void 0),n([Lt({type:String,json:{write:!0}})],uv.prototype,"styleName",void 0),n([Lt({type:By,json:{write:!1}})],uv.prototype,"portal",void 0),n([Lt({type:String,json:{read:ap,write:up}})],uv.prototype,"styleUrl",void 0),n([Lt({type:Qy,json:{read:!1}})],uv.prototype,"thumbnail",void 0),n([Lt({type:String,json:{write:!0}})],uv.prototype,"name",void 0),n([xl({styleSymbolReference:"web-style"},{readOnly:!0})],uv.prototype,"type",void 0),uv=ov=n([ve("esri.symbols.WebStyleSymbol")],uv);var cv=uv;function hv(t,e,r,n){const i=function(t,e,r){if(!t)return null;if(r&&"web-scene"===r.origin&&!(t instanceof rm)&&!(t instanceof cv)){const n="cim"!==t.type?function(t,e=!1,r=!1,n=!0){if(!t)return{symbol:null};let i;if(pv(t)||t instanceof cv)i=t.clone();else if("cim"===t.type)i=Bm.fromCIMSymbol(t);else if(t instanceof Rf)i=jm.fromSimpleLineSymbol(t);else if(t instanceof iv)i=Bm.fromSimpleMarkerSymbol(t);else if(t instanceof Um)i=Bm.fromPictureMarkerSymbol(t);else if(t instanceof tv)i=Qm.fromSimpleFillSymbol(t);else{if(!(t instanceof lv))return{error:new ge("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};i=n?gm.fromTextSymbol(t):Bm.fromTextSymbol(t)}if(e&&(i.id=t.id),r&&pv(i))for(let t=0;t<i.symbolLayers.length;++t)i.symbolLayers.getItemAt(t)._ignoreDrivers=!0;return{symbol:i}}(t):{symbol:null,error:new ge("symbol-conversion:unsupported-cim-symbol","CIM symbol is unsupported in web scenes",{symbol:t})};return n.symbol?n.symbol.write(e,r):(r.messages&&r.messages.push(new ge("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:r,error:n.error})),null)}return r&&"web-map"===r.origin&&"web-style"===t.type?(r.messages&&r.messages.push(new ge("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:t,context:r})),null):t.write(e,r)}(t,{},n);i&&(e[r]=i)}function dv(t,e){return mv(t,null,e)}function fv(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function pv(t){if(!t)return!1;switch(t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const yv={base:Ba,key:"type",typeMap:{"simple-fill":tv,"picture-fill":Rm,"picture-marker":Um,"simple-line":Rf,"simple-marker":iv,text:lv,"label-3d":gm,"line-3d":jm,"mesh-3d":Tm,"point-3d":Bm,"polygon-3d":Qm,"web-style":cv,cim:Ha},errorContext:"symbol"},mv=Yt({types:yv}),vv={base:Ba,key:"type",typeMap:{"simple-fill":tv,"picture-fill":Rm,"picture-marker":Um,"simple-line":Rf,"simple-marker":iv,text:lv,"line-3d":jm,"mesh-3d":Tm,"point-3d":Bm,"polygon-3d":Qm,"web-style":cv,cim:Ha},errorContext:"symbol"},wv={base:Ba,key:"type",typeMap:{text:lv,"label-3d":gm},errorContext:"symbol"},bv={base:Ba,key:"type",typeMap:{"line-3d":jm,"mesh-3d":Tm,"point-3d":Bm,"polygon-3d":Qm,"web-style":cv},errorContext:"symbol"},gv={base:Ba,key:"type",typeMap:{"label-3d":gm},errorContext:"symbol"},Sv=yt(yv);let xv=0;function Mv(){return xv++}var jv;let Ov=jv=class extends Yi{constructor(...t){super(...t),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Mv(),configurable:!0})}normalizeCtorArgs(t,e,r,n){return t&&!t.declaredClass?t:{geometry:t,symbol:e,attributes:r,popupTemplate:n}}set attributes(t){const e=this._get("attributes");e!==t&&(this._set("attributes",t),this._notifyLayer("attributes",e,t))}set geometry(t){const e=this._get("geometry");e!==t&&(this._set("geometry",t),this._notifyLayer("geometry",e,t))}set symbol(t){const e=this._get("symbol");e!==t&&(this._set("symbol",t),this._notifyLayer("symbol",e,t))}set visible(t){const e=this._get("visible");e!==t&&(this._set("visible",t),this._notifyLayer("visible",e,t))}getEffectivePopupTemplate(t=!1){return this.popupTemplate?this.popupTemplate:this.sourceLayer?"popupTemplate"in this.sourceLayer&&this.sourceLayer.popupTemplate?this.sourceLayer.popupTemplate:t&&"defaultPopupTemplate"in this.sourceLayer&&x(this.sourceLayer.defaultPopupTemplate)?this.sourceLayer.defaultPopupTemplate:null:null}getAttribute(t){return this.attributes&&this.attributes[t]}setAttribute(t,e){if(this.attributes){const r=this.getAttribute(t);this.attributes[t]=e,this._notifyLayer("attributes",r,e,t)}else this.attributes={[t]:e},this._notifyLayer("attributes",void 0,e,t)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{geometry:x(this.geometry)?this.geometry.toJSON():null,symbol:x(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}clone(){return new jv(this.cloneProperties())}cloneProperties(){return{attributes:w(this.attributes),geometry:w(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:w(this.symbol),visible:this.visible}}_notifyLayer(t,e,r,n){if(!this.layer||!("graphicChanged"in this.layer))return;const i={graphic:this,property:t,oldValue:e,newValue:r};"attributes"===t&&(i.attributeName=n),this.layer.graphicChanged(i)}};n([Lt({value:null})],Ov.prototype,"attributes",null),n([Lt({value:null,types:ml,json:{read:dl}})],Ov.prototype,"geometry",null),n([Lt({type:Boolean})],Ov.prototype,"isAggregate",void 0),n([Lt()],Ov.prototype,"layer",void 0),n([Lt({type:uf})],Ov.prototype,"popupTemplate",void 0),n([Lt()],Ov.prototype,"sourceLayer",void 0),n([Lt({value:null,types:yv})],Ov.prototype,"symbol",null),n([Lt({type:Boolean,value:!0})],Ov.prototype,"visible",null),Ov=jv=n([ve("esri.Graphic")],Ov),(Ov||(Ov={})).generateUID=Mv;var kv=Ov;function Iv(t){return new ms({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${t.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const Av=Iv(Os),Cv=Iv(ks),Tv=Iv(Is),Nv=new ms({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${Os.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function Pv(t){return as(t)?ks:cs(t)?Is:Os}const _v=39.37,Ev=Os.radius*Math.PI/200,$v=/UNIT\[([^\]]+)\]\]$/i,Dv=Qi,Rv=/UNIT\[([^\]]+)\]/i,zv=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),Fv=il()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Uv=t=>t*t,Lv=t=>t*t*t,Vv={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Uv(.001)},"square-centimeters":{inBaseUnits:Uv(.01)},"square-decimeters":{inBaseUnits:Uv(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Uv(1e3)},"square-inches":{inBaseUnits:Uv(.0254)},"square-feet":{inBaseUnits:Uv(.3048)},"square-yards":{inBaseUnits:Uv(.9144)},"square-miles":{inBaseUnits:Uv(1609.344)},"square-us-feet":{inBaseUnits:Uv(1200/3937)},acres:{inBaseUnits:.0015625*Uv(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Lv(.001)},"cubic-centimeters":{inBaseUnits:1e3*Lv(.01)},"cubic-decimeters":{inBaseUnits:1e3*Lv(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Lv(1e3)},"cubic-inches":{inBaseUnits:1e3*Lv(.0254)},"cubic-feet":{inBaseUnits:1e3*Lv(.3048)},"cubic-yards":{inBaseUnits:1e3*Lv(.9144)},"cubic-miles":{inBaseUnits:1e3*Lv(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},Gv=function(){const t={};for(const e in Vv)for(const r in Vv[e].units)t[r]=e;return t}();function qv(t){const e=Gv[t];if(e)return e;throw new Error("unknown measure")}function Bv(t,e=null){return e=e||qv(t),Vv[e].baseUnit===t}function Wv(t,e,r){if(e===r)return t;const n=qv(e);if(n!==qv(r))throw new Error("incompatible units");const i=Bv(e,n)?t:function(t,e,r){return t*Vv[r].units[e].inBaseUnits}(t,e,n);return Bv(r,n)?i:function(t,e,r){return t/Vv[r].units[e].inBaseUnits}(i,r,n)}function Hv(t){return Fv.fromJSON(t.toLowerCase())||null}function Jv(t){if(t&&"object"==typeof t&&!function(t){return!(us(t)||hs(t))}(t))return 1;const e=Qv(t);return e>1e5?1:e}function Yv(t){return Qv(t)>=(t instanceof ms?function(t){return t&&(us(t)||t===Cv)?ks:t&&(hs(t)||t===Tv)?Is:Os}(t).metersPerDegree:1e5)?"meters":Zv(t)}function Qv(t,e=Os.metersPerDegree){return function(t,e=!1){let r,n,i=null;if(null!=t&&("object"==typeof t?(r=t.wkid,n=t.wkt):"number"==typeof t?r=t:"string"==typeof t&&(n=t)),r){if(as(r))return ks.metersPerDegree;if(cs(r))return Is.metersPerDegree;i=Dv.values[Dv[r]],!i&&e&&zv.has(r)&&(i=Ev)}else if(n)if(-1!==n.search(/^PROJCS/i)){const t=$v.exec(n);t&&t[1]&&(i=parseFloat(t[1].split(",")[1]))}else if(-1!==n.search(/^GEOCCS/i)){const t=Rv.exec(n);t&&t[1]&&(i=parseFloat(t[1].split(",")[1]))}return i}(t,!0)||e}function Zv(t){let e,r,n=null;if(null!=t&&("object"==typeof t?(e=t.wkid,r=t.wkt):"number"==typeof t?e=t:"string"==typeof t&&(r=t)),e)n=Dv.units[Dv[e]];else if(r&&-1!==r.search(/^PROJCS/i)){let t=$v.exec(r);t&&t[1]&&(t=/[\\"\\']{1}([^\\"\\']+)/.exec(t[1]),n=t&&t[1])}return n?Hv(n):null}const Kv={inches:Wv(1,"meters","inches"),feet:Wv(1,"meters","feet"),"us-feet":Wv(1,"meters","us-feet"),yards:Wv(1,"meters","yards"),miles:Wv(1,"meters","miles"),"nautical-miles":Wv(1,"meters","nautical-miles"),millimeters:Wv(1,"meters","millimeters"),centimeters:Wv(1,"meters","centimeters"),decimeters:Wv(1,"meters","decimeters"),meters:Wv(1,"meters","meters"),kilometers:Wv(1,"meters","kilometers"),"decimal-degrees":1/function(t,e,r){return Wv(1,"meters","meters")/(r*Math.PI/180)}(0,0,Os.radius)},Xv=J.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),tw=new kv,ew=Math.PI,rw=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function nw(t,e,r){const n="visualVariables"in t&&t.visualVariables?t.visualVariables.filter((t=>"color"===t.type))[0]:t;if(!n)return;if("esri.renderers.visualVariables.ColorVariable"!==n.declaredClass)return void Xv.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const i="number"==typeof e,s=i?null:e,o=s&&s.attributes;let l=i?e:null;const a=n.field,{ipData:u,hasExpression:c}=n.cache;let h=n.cache.compiledFunc;if(!a&&!c){const t=n.stops;return t&&t[0]&&t[0].color}if("number"!=typeof l)if(c){if(!x(r)||!x(r.arcade))return void Xv.error("Use of arcade expressions requires an arcade context");const t=r.arcade.arcadeUtils,e=t.getViewInfo({viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference}),i=t.createExecContext(s,e);if(!h){const e=t.createSyntaxTree(n.valueExpression);h=t.createFunction(e),n.cache.compiledFunc=h}l=t.executeFunction(h,i)}else o&&(l=o[a]);const d=n.normalizationField,f=o?parseFloat(o[d]):void 0;if(null!=l&&(!d||i||!isNaN(f)&&0!==f)){isNaN(f)||i||(l/=f);const t=cw(l,u);if(t){const e=t[0],i=t[1],s=e===i?n.stops[e].color:Ua.blendColors(n.stops[e].color,n.stops[i].color,t[2],x(r)?r.color:void 0);return new Ua(s)}}}function iw(t,e,r){const n="visualVariables"in t&&t.visualVariables?t.visualVariables.filter((t=>"opacity"===t.type))[0]:t;if(!n)return;if("esri.renderers.visualVariables.OpacityVariable"!==n.declaredClass)return void Xv.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const i="number"==typeof e,s=i?null:e,o=s&&s.attributes;let l=i?e:null;const a=n.field,{ipData:u,hasExpression:c}=n.cache;let h=n.cache.compiledFunc;if(!a&&!c){const t=n.stops;return t&&t[0]&&t[0].opacity}if("number"!=typeof l)if(c){if(M(r)||M(r.arcade))return void Xv.error("Use of arcade expressions requires an arcade context");const t=r.arcade.arcadeUtils,e=t.getViewInfo({viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference}),i=t.createExecContext(s,e);if(!h){const e=t.createSyntaxTree(n.valueExpression);h=t.createFunction(e),n.cache.compiledFunc=h}l=t.executeFunction(h,i)}else o&&(l=o[a]);const d=n.normalizationField,f=o?parseFloat(o[d]):void 0;if(null!=l&&(!d||i||!isNaN(f)&&0!==f)){isNaN(f)||i||(l/=f);const t=cw(l,u);if(t){const e=t[0],r=t[1];if(e===r)return n.stops[e].opacity;{const i=n.stops[e].opacity;return i+(n.stops[r].opacity-i)*t[2]}}}}function sw(t,e,r){const n="visualVariables"in t&&t.visualVariables?t.visualVariables.filter((t=>"rotation"===t.type))[0]:t;if(!n)return;if("esri.renderers.visualVariables.RotationVariable"!==n.declaredClass)return void Xv.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const i=n.axis||"heading",s="heading"===i&&"arithmetic"===n.rotationType?90:0,o="heading"===i&&"arithmetic"===n.rotationType?-1:1,l="number"==typeof e?null:e,a=l&&l.attributes,u=n.field,{hasExpression:c}=n.cache;let h=n.cache.compiledFunc,d=0;if(!u&&!c)return d;if(c){if(M(r)||M(r.arcade))return void Xv.error("Use of arcade expressions requires an arcade context");const t=r.arcade.arcadeUtils,e=t.getViewInfo({viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference}),i=t.createExecContext(l,e);if(!h){const e=t.createSyntaxTree(n.valueExpression);h=t.createFunction(e),n.cache.compiledFunc=h}d=t.executeFunction(h,i)}else a&&(d=a[u]||0);return d="number"!=typeof d||isNaN(d)?null:s+o*d,d}function ow(t,e,r){const n="visualVariables"in t&&t.visualVariables?t.visualVariables.filter((t=>"size"===t.type))[0]:t;if(!n)return;if("esri.renderers.visualVariables.SizeVariable"!==n.declaredClass)return void Xv.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const i=function(t,e,r,n,i){switch(e.transformationType){case"additive":return function(t,e,r,n){return t+(lw(e.minSize,r,n)||e.minDataValue)}(t,e,r,n);case"constant":return function(t,e,r){const n=t.stops;let i=n&&n.length&&n[0].size;return null==i&&(i=t.minSize),lw(i,e,r)}(e,r,n);case"clamped-linear":return function(t,e,r,n){const i=(t-e.minDataValue)/(e.maxDataValue-e.minDataValue),s=lw(e.minSize,r,n),o=lw(e.maxSize,r,n),l=x(n)?n.shape:void 0;if(t<=e.minDataValue)return s;if(t>=e.maxDataValue)return o;if("area"===e.scaleBy&&l){const t="circle"===l,e=t?ew*Math.pow(s/2,2):s*s,r=e+i*((t?ew*Math.pow(o/2,2):o*o)-e);return t?2*Math.sqrt(r/ew):Math.sqrt(r)}return s+i*(o-s)}(t,e,r,n);case"proportional":return function(t,e,r,n){const i=x(n)?n.shape:void 0,s=t/e.minDataValue,o=lw(e.minSize,r,n),l=lw(e.maxSize,r,n);let a=null;return a="circle"===i?2*Math.sqrt(s*Math.pow(o/2,2)):"square"===i||"diamond"===i||"image"===i?Math.sqrt(s*Math.pow(o,2)):s*o,aw(a,o,l)}(t,e,r,n);case"stops":return function(t,e,r,n,i){const[s,o,l]=cw(t,i);if(s===o)return lw(e.stops[s].size,r,n);{const t=lw(e.stops[s].size,r,n);return t+(lw(e.stops[o].size,r,n)-t)*l}}(t,e,r,n,i);case"real-world-size":return function(t,e,r,n){const i=(x(n)&&n.resolution?n.resolution:1)*Kv[e.valueUnit],s=lw(e.minSize,r,n),o=lw(e.maxSize,r,n),{valueRepresentation:l}=e;let a=null;return a="area"===l?2*Math.sqrt(t/ew)/i:"radius"===l||"distance"===l?2*t/i:t/i,aw(a,s,o)}(t,e,r,n);case"identity":return t;case"unknown":return null}}(function(t,e,r){const n="number"==typeof e,i=n?null:e,s=i&&i.attributes;let o=n?e:null;const{isScaleDriven:l}=t.cache;let a=t.cache.compiledFunc;if(l){const e=x(r)?r.scale:void 0,n=x(r)?r.view:void 0;o=null==e||"3d"===n?function(t){let e=null,r=null;const n=t.stops;return n?(e=n[0].value,r=n[n.length-1].value):(e=t.minDataValue||0,r=t.maxDataValue||0),(e+r)/2}(t):e}else if(!n)switch(t.inputValueType){case"expression":{if(M(r)||M(r.arcade))return void Xv.error("Use of arcade expressions requires an arcade context");const e=r.arcade.arcadeUtils,n=e.getViewInfo({viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference}),s=e.createExecContext(i,n);if(!a){const r=e.createSyntaxTree(t.valueExpression);a=e.createFunction(r),t.cache.compiledFunc=a}o=e.executeFunction(a,s);break}case"field":s&&(o=s[t.field]);break;case"unknown":o=null}if(!Rc(o))return null;if(n||!t.normalizationField)return o;const u=s?parseFloat(s[t.normalizationField]):null;return Rc(u)&&0!==u?o/u:null}(n,e,r),n,e,r,n.cache.ipData);return null==i||isNaN(i)?0:i}function lw(t,e,r){return null==t?null:Dc(t)?ow(t,e,r):Rc(t)?t:null}function aw(t,e,r){return Rc(r)&&t>r?r:Rc(e)&&t<e?e:t}function uw(t,e,r){const{isScaleDriven:n}=t.cache;if(!(n&&"3d"===r||e))return null;const i={scale:e,view:r};let s=lw(t.minSize,tw,i),o=lw(t.maxSize,tw,i);if(null!=s||null!=o){if(s>o){const t=o;o=s,s=t}return{minSize:s,maxSize:o}}}function cw(t,e){if(!e)return;let r=0,n=e.length-1;return e.some(((e,i)=>t<e?(n=i,!0):(r=i,!1))),[r,n,(t-e[r])/(e[n]-e[r])]}function hw(t,e,r){const n=["proportional","proportional","proportional"];for(const i of t){const t=i.useSymbolValue?"symbol-value":ow(i,e,r);switch(i.axis){case"width":n[0]=t;break;case"depth":n[1]=t;break;case"height":n[2]=t;break;case"width-and-depth":n[0]=t,n[1]=t;break;case"all":case void 0:case null:n[0]=t,n[1]=t,n[2]=t}}return n}var dw;const fw=J.getLogger("esri.renderers.visualVariables.SizeVariable"),pw=new nl({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),yw=new nl({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function mw(t){if(null!=t)return"string"==typeof t||"number"==typeof t?Ic(t):"size"===t.type?Dc(t)?t:(delete(t={...t}).type,new ww(t)):void 0}function vw(t,e,r){if("object"!=typeof t)return t;const n=new ww;return n.read(t,r),n}let ww=dw=class extends lc{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:rw.test(this.valueExpression)}}set expression(t){fw.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===t?(this.valueExpression="$view.scale",this._set("expression",t)):this._set("expression",null)}set index(t){Dc(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),Dc(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return zc(this)}set maxDataValue(t){t&&this.stops&&(fw.warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(fw.warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return mw(t)}readMaxSize(t,e,r){return vw(t,0,r)}set minDataValue(t){t&&this.stops&&(fw.warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(fw.warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return mw(t)}readMinSize(t,e,r){return vw(t,0,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired}set stops(t){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?t&&Array.isArray(t)&&(t=t.filter((t=>!!t))).sort(((t,e)=>t.value-e.value)):t&&(fw.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return function(t,e){return"unknown"===(e||zc(t))?"constant":t.stops?"stops":null!=t.minSize&&null!=t.maxSize&&null!=t.minDataValue&&null!=t.maxDataValue?"clamped-linear":"unknown"===(t.valueUnit||"unknown")?null!=t.minSize&&null!=t.minDataValue?t.minSize&&t.minDataValue?"proportional":"additive":"identity":"real-world-size"}(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,r,n){if("$view.scale"===t){if(n&&n.messages){const t=this.index;n.messages.push(new ge("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:("string"==typeof t?t:`visualVariables[${t}]`)+".valueExpression",context:n}))}}else e[r]=t}readValueUnit(t){return t?yw.read(t):null}clone(){return new dw({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Dc(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Dc(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map((t=>t.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if("clamped-linear"===this.transformationType){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if("stops"===this.transformationType){const t=this.stops,e=t.map((t=>t.size)).reverse(),r=t.length;for(let n=0;n<r;n++)t[n].size=e[n];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((t=>t.value||0))}};n([Lt({readOnly:!0,dependsOn:["valueExpression","stops"]})],ww.prototype,"cache",null),n([Lt({type:pw.apiValues,json:{type:pw.jsonValues,origins:{"web-map":{read:!1}},read:pw.read,write:pw.write}})],ww.prototype,"axis",void 0),n([Lt({type:String,value:null,json:{read:!1}})],ww.prototype,"expression",null),n([Lt()],ww.prototype,"index",null),n([Lt({type:String,readOnly:!0,dependsOn:["field","valueExpression"]})],ww.prototype,"inputValueType",null),n([Lt({type:$c,json:{write:!0}})],ww.prototype,"legendOptions",void 0),n([Lt({type:Number,value:null,json:{write:!0}})],ww.prototype,"maxDataValue",null),n([Lt({type:Number,value:null,json:{write:!0}})],ww.prototype,"maxSize",null),n([Ms("maxSize")],ww.prototype,"castMaxSize",null),n([vs("maxSize")],ww.prototype,"readMaxSize",null),n([Lt({type:Number,value:null,json:{write:!0}})],ww.prototype,"minDataValue",null),n([Lt({type:Number,value:null,json:{write:!0}})],ww.prototype,"minSize",null),n([Ms("minSize")],ww.prototype,"castMinSize",null),n([vs("minSize")],ww.prototype,"readMinSize",null),n([Lt({type:String,json:{write:!0}})],ww.prototype,"normalizationField",void 0),n([Lt({readOnly:!0,dependsOn:["valueExpression","minSize.arcadeRequired","maxSize.arcadeRequired"]})],ww.prototype,"arcadeRequired",null),n([Lt({type:String})],ww.prototype,"scaleBy",void 0),n([Lt({type:[_c],value:null,json:{write:!0}})],ww.prototype,"stops",null),n([Lt({type:["outline"],json:{write:!0}})],ww.prototype,"target",void 0),n([Lt({type:String,readOnly:!0,dependsOn:["minDataValue","maxDataValue","minSize","maxSize","valueUnit","inputValueType","stops"]})],ww.prototype,"transformationType",null),n([Lt({type:["size"],json:{type:["sizeInfo"]}})],ww.prototype,"type",void 0),n([Lt({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],ww.prototype,"useSymbolValue",void 0),n([Lt({type:String,json:{write:!0}})],ww.prototype,"valueExpression",void 0),n([vs("valueExpression",["valueExpression","expression"])],ww.prototype,"readValueExpression",null),n([be("web-scene","valueExpression")],ww.prototype,"writeValueExpressionWebScene",null),n([Lt({type:["radius","diameter","area","width","distance"],json:{write:!0}})],ww.prototype,"valueRepresentation",void 0),n([Lt({type:yw.apiValues,json:{write:yw.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],ww.prototype,"valueUnit",void 0),n([vs("valueUnit")],ww.prototype,"readValueUnit",null),ww=dw=n([ve("esri.renderers.visualVariables.SizeVariable")],ww);var bw=ww;const gw=J.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),Sw={color:fc,size:bw,opacity:Sc,rotation:Mc},xw=new nl({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),Mw=/^\[([^\]]+)\]$/i;let jw=class extends Ei{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),(t=t&&t.filter((t=>!!t)))&&t.length){for(const e of t)switch(e.type){case"color":this.colorVariables.push(e);break;case"opacity":this.opacityVariables.push(e);break;case"rotation":this.rotationVariables.push(e);break;case"size":this.sizeVariables.push(e)}this.sizeVariables.length&&this.sizeVariables.some((t=>!!t.target))&&t.sort(((t,e)=>{let r=null;return r=t.target===e.target?0:t.target?1:-1,r}));for(let e=0;e<t.length;e++)t[e].index=e;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,e,r){const{rotationExpression:n,rotationType:i}=e,s=n&&n.match(Mw),o=s&&s[1];if(o&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:i,field:o})),t)return t.map((t=>{const e=xw.read(t.type),n=Sw[e];n||(gw.warn(`Unknown variable type: ${e}`),r&&r.messages&&r.messages.push(new Bt("visual-variable:unsupported",`visualVariable of type '${e}' is not supported`,{definition:t,context:r})));const i=new n;return i.read(t,r),i}))}writeVariables(t,e){const r=[];for(const n of t){const t=n.toJSON(e);t&&r.push(t)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};n([Lt()],jw.prototype,"visualVariables",null),jw=n([ve("esri.renderers.visualVariables.VisualVariableFactory")],jw);var Ow=jw;const kw={base:lc,key:"type",typeMap:{opacity:Sc,color:fc,rotation:Mc,size:bw}},Iw=t=>{let e=class extends t{constructor(){super(...arguments),this._vvFactory=new Ow}set visualVariables(t){this._vvFactory.visualVariables=t,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(t,e,r){return this._vvFactory.readVariables(t,e,r)}writeVisualVariables(t,e,r,n){e[r]=this._vvFactory.writeVariables(t,n)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const t of this.visualVariables)if(t.arcadeRequired)return!0;return!1}hasVisualVariables(t,e){return t?!!this.getVisualVariablesForType(t,e):!!(this.getVisualVariablesForType("size",e)||this.getVisualVariablesForType("color",e)||this.getVisualVariablesForType("opacity",e)||this.getVisualVariablesForType("rotation",e))}getVisualVariablesForType(t,e){const r=this.visualVariables;if(!r)return;const n=r.filter((r=>r.type===t&&("string"==typeof e?r.target===e:!1!==e||!r.target)));return n&&0===n.length?void 0:n}async collectVVRequiredFields(t,e){let r=[];this.visualVariables&&(r=r.concat(this.visualVariables));for(const n of r)n&&(n.field&&Yl(t,e,n.field),n.normalizationField&&Yl(t,e,n.normalizationField),n.valueExpression&&await Kl(t,e,n.valueExpression))}};return n([Lt({types:[kw],value:null,json:{write:!0}})],e.prototype,"visualVariables",null),n([vs("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null),n([be("visualVariables")],e.prototype,"writeVisualVariables",null),e=n([ve("esri.renderers.mixins.VisualVariablesMixin")],e),e};class Aw{constructor(t,e,r){this._namespace=t,this._storage=e,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this)}put(t,e,r,n=0){this._storage.put(this._namespace+t,e,r,n)}get(t){const e=this._storage.get(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}pop(t){const e=this._storage.pop(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}updateSize(t,e,r){this._storage.updateSize(this._namespace+t,e,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class Cw{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=[],this._users=new oi}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs=this._removeFuncs.filter((e=>e[0]!==t))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,e,r,n){const i=this._db.get(t);if(i&&(this._size-=i.size,this._db.delete(t),i.entry!==e&&this._notifyRemoved(t,i.entry)),r>this._maxSize)return void this._notifyRemoved(t,e);if(void 0===e)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const s=1+Math.max(n,-3)- -3;this._db.set(t,{entry:e,size:r,lifetime:s,lives:s}),this._size+=r,this._checkSizeLimit()}updateSize(t,e,r){const n=this._db.get(t);n&&n.entry===e&&(this._size-=n.size,r>this._maxSize?this._notifyRemoved(t,e):(n.size=r,this._size+=r,this._checkSizeLimit()))}pop(t){const e=this._db.get(t);if(e)return this._size-=e.size,this._db.delete(t),++this._hit,e.entry;++this._miss}get(t){const e=this._db.get(t);if(void 0!==e)return this._db.delete(t),e.lives=e.lifetime,this._db.set(t,e),++this._hit,e.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},r=new Array;this._db.forEach(((t,n)=>{const i=t.lifetime;r[i]=(r[i]||0)+t.size,this._users.forAll((r=>{const i=r.namespace;n.startsWith(i)&&(e[i]=(e[i]||0)+t.size)}))}));const n={};this._users.forAll((t=>{const r=t.namespace;!isNaN(t.hitRate)&&t.hitRate>0?(e[r]=e[r]||0,n[r]=Math.round(100*t.hitRate)+"%"):n[r]="0%"}));const i=Object.keys(e);i.forEach((t=>e[t]=e[t]/this._size*100)),i.sort(((t,r)=>e[r]-e[t])),i.forEach((r=>t[r]=Math.round(e[r])+"% / "+n[r]));for(let e=r.length-1;e>=0;--e){const n=r[e];n&&(t["Priority "+(e+-3-1)]=Math.round(n/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){this._db.forEach(((e,r)=>{r.startsWith(t)&&(this._size-=e.size,this._db.delete(r),this._notifyRemoved(r,e.entry))}))}clearAll(){this._db.forEach(((t,e)=>this._notifyRemoved(e,t.entry))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(t,e){this._removeFuncs.forEach((r=>{t.startsWith(r[0])&&r[1](e)}))}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,e]of this._db)if(this._db.delete(t),e.lives<=1?(this._size-=e.size,this._notifyRemoved(t,e.entry)):(--e.lives,this._db.set(t,e)),this._size<=.9*this.maxSize)return}}class Tw{constructor(t,e){this._storage=new Cw,this._storage.maxSize=t,e&&this._storage.registerRemoveFunc("",e)}put(t,e,r){this._storage.put(t,e,r,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}var Nw;const Pw=J.getLogger("esri.renderers.DictionaryRenderer");let _w=Nw=class extends(Iw(Zu)){constructor(t){super(t),this._ongoingRequests=new Map,this._symbolCache=new Tw(100),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,r,n){null!=n&&n.origin||super.writeVisualVariables(t,e,r,n)}clone(){return new Nw({config:w(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:w(this.fieldMap),url:w(this.url),visualVariables:w(this.visualVariables)})}async getSymbolAsync(t,e){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(e));try{r=await this._dictionaryPromise}catch(t){if(Hr(t))return this._dictionaryPromise=null,null}const n={};if(this.fieldMap)for(const e of this._symbolFields){const r=this.fieldMap[e];n[e]=r&&null!=t.attributes[r]?""+t.attributes[r]:""}const i=r(n,e);if(!i||"string"!=typeof i)return null;const s=B(i).toString(),o=this._symbolCache.get(s);if(o)return o.catch((()=>{this._symbolCache.pop(s)})),o;const l=i.split(";"),a=[],u=[];for(const t of l)if(t&&0!==t.length)if(-1===t.indexOf("po:"))if(-1!==t.indexOf("|"))for(const e of t.split("|"))this._itemNames.has(e)&&a.push(e);else this._itemNames.has(t)&&a.push(t);else{const e=t.substr(3).split("|");if(3===e.length){const t=e[0],r=e[1];let n=e[2];if("DashTemplate"===r)n=n.split(" ").map((t=>Number(t)));else if("Color"===r){const t=new Ua(n).toRgba();n=[t[0],t[1],t[2],255*t[3]]}else n=Number(n);u.push({primitiveName:t,propertyName:r,value:n})}}const c=this._cimPartsToCIMSymbol(a,u,e);return this._symbolCache.put(s,c,1),c}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await Kl(t,e,this.scaleExpression);const r=e.map((t=>t.name));for(const e in this.fieldMap)r.indexOf(this.fieldMap[e])<0||t.add(this.fieldMap[e])}get arcadeRequired(){return!0}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void Pw.error("no valid URL!");const e=x(t)?t.abortOptions:null,r=ru(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},...e}),[{data:n}]=await $r([r,wl()]);if(!n)throw this._dictionaryPromise=null,new ge("esri.renderers.DictionaryRenderer","Bad dictionary data!");const i=n.expression,s=n.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+n.cimRefTemplateUrl,this._itemNames=new Set(n.itemsNames),this._symbolFields=s.symbol;const o={};if(this.config){const t=this.config;for(const e in t)o[e]=t[e]}for(const t of s.configuration)o.hasOwnProperty(t.name)||(o[t.name]=t.value);const l=[];if(x(t)&&t.fields&&this.fieldMap)for(const e of this._symbolFields){const r=this.fieldMap[e],n=t.fields.filter((t=>t.name===r));n.length>0&&l.push({...n[0],name:e})}return this._dictionaryPromise=((t,e,r,n)=>Sl.create(t,e,r,n,["$feature","$view"]))(i,x(t)?t.spatialReference:null,l,o).then((t=>{const e={scale:0};return(r,n)=>{const i=t.repurposeFeature({geometry:null,attributes:r});return e.scale=x(n)?n.scale:void 0,t.evaluate({$feature:i,$view:e})}})).catch((t=>(Pw.error("Creating dictinoary expression failed:",t),null))),this._dictionaryPromise}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((t,e)=>t+e.getAttributeHash()),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._symbolFields}async _getSymbolPart(t,e){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then((t=>t.data));const r=ru(this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),{responseType:"json",query:{f:"json"},...e});this._ongoingRequests.set(t,r);try{return(await r).data}catch(e){return this._ongoingRequests.delete(t),Xr(e)}}_combineSymbolParts(t,e){if(!t||0===t.length)return null;if(1===t.length)return{type:"CIMSymbolReference",symbol:t[0],primitiveOverrides:e};const r={...t[0]};r.symbolLayers=[];for(const e of t)r.symbolLayers.unshift(...e.symbolLayers);return{type:"CIMSymbolReference",symbol:r,primitiveOverrides:e}}async _cimPartsToCIMSymbol(t,e,r){const n=new Array(t.length);for(let e=0;e<t.length;e++)n[e]=this._getSymbolPart(t[e],r);const i=await $r(n);return new Ha({data:this._combineSymbolParts(i,e)})}};n([Lt({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],_w.prototype,"config",void 0),n([Lt({type:Object,json:{write:!0}})],_w.prototype,"fieldMap",void 0),n([Lt({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],_w.prototype,"scaleExpression",void 0),n([be("scaleExpression")],_w.prototype,"writeData",null),n([Lt({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],_w.prototype,"scaleExpressionTitle",void 0),n([Lt({type:String,json:{write:!0}})],_w.prototype,"url",void 0),n([be("visualVariables")],_w.prototype,"writeVisualVariables",null),_w=Nw=n([ve("esri.renderers.DictionaryRenderer")],_w);var Ew=_w;const $w=Object.freeze({__proto__:null,default:Ew});function Dw(t,e,r){return Qr(t.map(((t,n)=>e.apply(r,[t,n])))).then((t=>t.map((t=>t.value))))}function Rw(t){return t.then((t=>({ok:!0,value:t}))).catch((t=>({ok:!1,error:t})))}function zw(){return[0,0,0]}function Fw(t){return[t[0],t[1],t[2]]}function Uw(t,e,r){return[t,e,r]}function Lw(t){const e=[0,0,0],r=Math.min(3,t.length);for(let n=0;n<r;++n)e[n]=t[n];return e}function Vw(t,e){return new Float64Array(t,e,3)}function Gw(){return Uw(1,1,1)}function qw(){return Uw(1,0,0)}function Bw(){return Uw(0,1,0)}function Ww(){return Uw(0,0,1)}const Hw=[0,0,0],Jw=Gw(),Yw=qw(),Qw=Bw(),Zw=Ww();Object.freeze({__proto__:null,create:zw,clone:Fw,fromValues:Uw,fromArray:Lw,createView:Vw,zeros:function(){return[0,0,0]},ones:Gw,unitX:qw,unitY:Bw,unitZ:Ww,ZEROS:Hw,ONES:Jw,UNIT_X:Yw,UNIT_Y:Qw,UNIT_Z:Zw});class Kw{constructor(t,e){this._storage=new Cw,this._storage.maxSize=t,e&&this._storage.registerRemoveFunc("",e)}put(t,e){this._storage.put(t,e,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.clearAll()}}function Xw(t,e,r,n){return function(t){return"function"==typeof t}(t)?t(e,r,n):t}function tb(t){return[t.r,t.g,t.b,t.a]}function eb(t,e,r){const n=t=>{let e=t.length;for(;e--;)if(-1===" /-,\n".indexOf(t.charAt(e)))return!1;return!0},i=[];let s=0,o=-1;do{if(o=e.indexOf("[",s),o>=s){if(o>s){const t=e.substr(s,o-s);i.push([t,null,n(t)])}if(s=o+1,o=e.indexOf("]",s),o>=s){if(o>s){const r=t[e.substr(s,o-s)];r&&i.push([null,r,!1])}s=o+1}}}while(-1!==o);if(s<e.length-1){const t=e.substr(s);i.push([t,null,n(t)])}return t=>{let e="",n=null;for(const r of i){const[i,s,o]=r;if(i)o?n=i:(n&&(e+=n,n=null),e+=i);else{const r=t.attributes[s];r&&(n&&(e+=n,n=null),e+=r)}}return rb(e,r)}}function rb(t,e){switch("string"!=typeof t&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function nb(t,e,r,n,i,s,o=!0){const l=e/i,a=r/s,u=Math.ceil(l/2),c=Math.ceil(a/2);for(let r=0;r<s;r++)for(let h=0;h<i;h++){const d=4*(h+(o?s-r-1:r)*i);let f=0,p=0,y=0,m=0,v=0,w=0,b=0;const g=(r+.5)*a;for(let n=Math.floor(r*a);n<(r+1)*a;n++){const r=Math.abs(g-(n+.5))/c,i=(h+.5)*l,s=r*r;for(let r=Math.floor(h*l);r<(h+1)*l;r++){let o=Math.abs(i-(r+.5))/u;const l=Math.sqrt(s+o*o);l>=-1&&l<=1&&(f=2*l*l*l-3*l*l+1,f>0&&(o=4*(r+n*e),b+=f*t[o+3],y+=f,t[o+3]<255&&(f=f*t[o+3]/250),m+=f*t[o],v+=f*t[o+1],w+=f*t[o+2],p+=f))}}n[d]=m/p,n[d+1]=v/p,n[d+2]=w/p,n[d+3]=b/y}}function ib(t){return t?{r:t[0],g:t[1],b:t[2],a:t[3]/255}:{r:0,g:0,b:0,a:0}}function sb(t){var e;return null==(e=t.data)?void 0:e.symbol}function ob(t){return"CIMVectorMarker"===t.type||"CIMPictureMarker"===t.type||"CIMBarChartMarker"===t.type||"CIMCharacterMarker"===t.type||"CIMPieChartMarker"===t.type||"CIMStackedBarChartMarker"===t.type}function lb(t){return"CIMGradientStroke"===t.type||"CIMPictureStroke"===t.type||"CIMSolidStroke"===t.type}function ab(t){return"CIMGradientFill"===t.type||"CIMHatchFill"===t.type||"CIMPictureFill"===t.type||"CIMSolidFill"===t.type||"CIMWaterFill"===t.type}function ub(t){return"CIMMarkerPlacementAlongLineRandomSize"===t.type||"CIMMarkerPlacementAlongLineSameSize"===t.type||"CIMMarkerPlacementAlongLineVariableSize"===t.type||"CIMMarkerPlacementAtExtremities"===t.type||"CIMMarkerPlacementAtMeasuredUnits"===t.type||"CIMMarkerPlacementAtRatioPositions"===t.type||"CIMMarkerPlacementOnLine"===t.type||"CIMMarkerPlacementOnVertices"===t.type}function cb(t){const e=sb(t);if("CIMTextSymbol"===e.type)return e.height;let r=0;if(e.symbolLayers)for(const t of e.symbolLayers)ob(t)&&t.size>r?r=t.size:lb(t)&&t.width>r?r=t.width:ab(t);return r}function hb(t,e,r){const n=sb(t),i=cb(t);0!==i?db(n,e/i,!1,r):function(t,e){if("CIMTextSymbol"!==t.type){if(t.symbolLayers)for(const r of t.symbolLayers)switch(r.type){case"CIMPictureMarker":case"CIMVectorMarker":r.size=e;break;case"CIMPictureStroke":case"CIMSolidStroke":r.width=e}}else t.height=e}(n,e)}function db(t,e,r,n){if("CIMTextSymbol"!==t.type){if(r&&t.effects)for(const r of t.effects)pb(r,e);if(t.symbolLayers)for(const r of t.symbolLayers)switch(r.type){case"CIMPictureMarker":case"CIMVectorMarker":fb(r,e,n);break;case"CIMPictureStroke":case"CIMSolidStroke":null!=n&&n.preserveOutlineWidth||(r.width*=e);break;case"CIMPictureFill":r.height*=e,r.offsetX*=e,r.offsetY*=e;break;case"CIMHatchFill":db(r.lineSymbol,e,!0,{...n,preserveOutlineWidth:!1}),r.offsetX*=e,r.offsetY*=e,r.separation*=e}}else t.height*=e}function fb(t,e,r){if(t.markerPlacement&&function(t,e){switch(ub(t)&&(t.offset*=e),t.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(t.customEndingOffset*=e,t.offsetAlongLine*=e,t.placementTemplate&&t.placementTemplate.length){const r=t.placementTemplate.map((t=>t*e));t.placementTemplate=r}break;case"CIMMarkerPlacementAlongLineVariableSize":if(t.maxRandomOffset*=e,t.placementTemplate&&t.placementTemplate.length){const r=t.placementTemplate.map((t=>t*e));t.placementTemplate=r}break;case"CIMMarkerPlacementOnLine":t.startPointOffset*=e;break;case"CIMMarkerPlacementAtExtremities":t.offsetAlongLine*=e;break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":t.beginPosition*=e,t.endPosition*=e;break;case"CIMMarkerPlacementPolygonCenter":t.offsetX*=e,t.offsetY*=e;break;case"CIMMarkerPlacementInsidePolygon":t.offsetX*=e,t.offsetY*=e,t.stepX*=e,t.stepY*=e}}(t.markerPlacement,e),t.offsetX*=e,t.offsetY*=e,t.anchorPoint&&"Absolute"===t.anchorPointUnits&&(t.anchorPoint={x:t.anchorPoint.x*e,y:t.anchorPoint.y*e}),t.size*=e,"CIMVectorMarker"===t.type&&t.markerGraphics)for(const n of t.markerGraphics)t.scaleSymbolsProportionally||db(n.symbol,e,!0,r)}function pb(t,e){switch(t.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":t.width*=e;break;case"CIMGeometricEffectBuffer":t.size*=e;break;case"CIMGeometricEffectCut":t.beginCut*=e,t.endCut*=e,t.middleCut*=e;break;case"CIMGeometricEffectDashes":if(t.customEndingOffset*=e,t.offsetAlongLine*=e,t.dashTemplate&&t.dashTemplate.length){const r=t.dashTemplate.map((t=>t*e));t.dashTemplate=r}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":t.length*=e;break;case"CIMGeometricEffectMove":t.offsetX*=e,t.offsetY*=e;break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":t.offset*=e;break;case"CIMGeometricEffectRegularPolygon":t.radius*=e;break;case"CIMGeometricEffectTaperedPolygon":t.fromWidth*=e,t.length*=e,t.toWidth*=e;break;case"CIMGeometricEffectWave":t.amplitude*=e,t.period*=e}}function yb(t){const e=[];return mb(sb(t),e),e.length?new Ua(ib(e[0])):null}function mb(t,e){let r;r="CIMTextSymbol"===t.type?t.symbol:t;const n="CIMPolygonSymbol"===t.type;if(r.symbolLayers)for(const t of r.symbolLayers)if(!(t.colorLocked||n&&(lb(t)||ob(t)&&t.markerPlacement&&ub(t.markerPlacement))))switch(t.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":break;case"CIMVectorMarker":t.markerGraphics.forEach((t=>{mb(t.symbol,e)}));break;case"CIMSolidStroke":case"CIMSolidFill":vb(e,t.color);break;case"CIMHatchFill":mb(t.lineSymbol,e)}}function vb(t,e){for(const r of t)if(r.join(".")===e.join("."))return;t.push(e)}const wb=wy("esri/symbols/patterns/"),bb=new Kw(1e3);function gb(t){const e=t.style;let r=null;if(t)switch(t.type){case"simple-marker":"cross"!==e&&"x"!==e&&(r=t.color);break;case"simple-fill":"solid"===e?r=t.color:"none"!==e&&(r={type:"pattern",x:0,y:0,src:wb+e+".png",width:5,height:5});break;case"picture-fill":r={type:"pattern",src:t.url,width:Oc(t.width)*t.xscale,height:Oc(t.height)*t.yscale,x:Oc(t.xoffset),y:Oc(t.yoffset)};break;case"text":r=t.color;break;case"cim":r=yb(t)}return r}function Sb(t,e){const r=t+"-"+e;return void 0!==bb.get(r)?tn(bb.get(r)):ru(t,{responseType:"image"}).then((t=>{const n=t.data,i=n.naturalWidth,s=n.naturalHeight,o=document.createElement("canvas");o.width=i,o.height=s;const l=o.getContext("2d");l.fillStyle=e,l.fillRect(0,0,i,s),l.globalCompositeOperation="destination-in",l.drawImage(n,0,0);const a=o.toDataURL();return bb.put(r,a),a}))}function xb(t){if(!t)return null;let e;switch(t.type){case"simple-fill":case"picture-fill":case"simple-marker":e=xb(t.outline);break;case"simple-line":{const r=Oc(t.width);"none"!==t.style&&0!==r&&(e={color:t.color,style:Mb(t.style),width:r,cap:t.cap,join:"miter"===t.join?Oc(t.miterLimit):t.join});break}default:e=null}return e}const Mb=function(){const t={};return function(e){if(t[e])return t[e];const r=e.replace(/-/g,"");return t[e]=r,r}}(),jb=new Ua([128,128,128]),Ob=/\/resource\/(.*?)\.svg$/;function kb(t){if(!t||!t.symbolLayers)return!1;switch(t.type){case"point-3d":return t.symbolLayers.some((t=>"object"===t.type));case"line-3d":return t.symbolLayers.some((t=>"path"===t.type));case"polygon-3d":return t.symbolLayers.some((t=>"object"===t.type||"extrude"===t.type));default:return!1}}function Ib(t,e){const r=e.resource.href;return!c("esri-canvas-svg-support")&&t.styleOrigin&&Ob.test(r)?r.replace(Ob,"/resource/png/$1.png"):r}async function Ab(t,e){const r=t.symbolLayers;r&&await function(t,e){return Qr(t.map(((t,r)=>e.apply(undefined,[t,r]))))}(r,(async t=>async function(t,e){switch(t.type){case"extrude":!function(t,e){t.size="number"==typeof e[2]?e[2]:0}(t,e);break;case"icon":case"line":case"text":!function(t,e){const r=Cb(e);x(r)&&(t.size=r)}(t,e);break;case"path":!function(t,e){const r=Tb(e,Jw,[t.width,void 0,t.height]);t.width=Nb(e[0],t.width,1,r),t.height=Nb(e[2],t.height,1,r)}(t,e);break;case"object":await async function(t,e){const{resourceSize:r,symbolSize:n}=await async function(t){const e=await import("./p-2e61d9bf.js"),r=await e.computeObjectLayerResourceSize(t,10),{width:n,height:i,depth:s}=t,o=[n,s,i];let l=1;for(let t=0;t<3;t++)if(null!=o[t]){l=o[t]/r[t];break}for(let t=0;t<3;t++)null==o[t]&&(o[t]=r[t]*l);return{resourceSize:r,symbolSize:o}}(t),i=Tb(e,r,n);t.width=Nb(e[0],n[0],r[0],i),t.depth=Nb(e[1],n[1],r[1],i),t.height=Nb(e[2],n[2],r[2],i)}(t,e)}}(t,e)))}function Cb(t){for(const e of t)if("number"==typeof e)return e;return null}function Tb(t,e,r){for(let n=0;n<3;n++){const i=t[n];switch(i){case"symbol-value":return null!=r[n]?r[n]/e[n]:1;case"proportional":break;default:if(i&&e[n])return i/e[n]}}return 1}function Nb(t,e,r,n){switch(t){case"proportional":return r*n;case"symbol-value":return null!=e?e:r;default:return t}}async function Pb(t,e){if(t&&e)return pv(t)?Ab(t,e):void(fv(t)&&function(t,e){const r=Cb(e);if(!M(r))switch(t.type){case"simple-marker":t.size=r;break;case"picture-marker":{const e=t.width/t.height;e>1?(t.width=r,t.height=r*e):(t.width=r*e,t.height=r);break}case"simple-line":t.width=r;break;case"text":t.font.size=r}}(t,e))}function _b(t,e,r){if(t&&null!=e)if(pv(t)){const n=t.symbolLayers;n&&n.forEach((t=>{if(t&&"object"===t.type)switch(r){case"tilt":t.tilt=e;break;case"roll":t.roll=e;break;default:t.heading=e}}))}else fv(t)&&("simple-marker"!==t.type&&"picture-marker"!==t.type&&"text"!==t.type||(t.angle=e))}async function Eb(t,e){switch(t.type){case"web-style":{const{previewWebStyleSymbol:r}=await import("./p-5b7ff923.js");return r(t,Eb,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:r}=await import("./p-a4504926.js");return r(t,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:r}=await import("./p-2e2198a4.js");return r(t,e)}case"cim":{const{previewCIMSymbol:r}=await import("./p-9f163c7f.js");return r(t,e)}default:return}}new Ua("white");const $b=(t,e,r)=>[e,r],Db=(t,e,r)=>[e,r,t[2]],Rb=(t,e,r)=>[e,r,t[2],t[3]];function zb(t){return t?{originPosition:"upper-left"===t.originPosition?"upperLeft":"lower-left"===t.originPosition?"lowerLeft":t.originPosition,scale:[t.tolerance,t.tolerance],translate:[t.extent.xmin,t.extent.ymax]}:null}function Fb({scale:t,translate:e},r){return r*t[0]+e[0]}function Ub({scale:t,translate:e},r){return e[1]-r*t[1]}function Lb(t,e,r){const n=new Array(r.length);if(!r.length)return n;const[i,s]=t.scale;let o=Fb(t,r[0][0]),l=Ub(t,r[0][1]);n[0]=e(r[0],o,l);for(let t=1;t<r.length;t++){const a=r[t];o+=a[0]*i,l-=a[1]*s,n[t]=e(a,o,l)}return n}function Vb(t,e,r){const n=new Array(r.length);for(let i=0;i<r.length;i++)n[i]=Lb(t,e,r[i]);return n}function Gb(t,e,r,n,i){const s=t.referencesGeometry()&&i?function(t,e,r){const{transform:n,hasZ:i,hasM:s}=r;qb.has(e)||qb.set(e,function(t){const e={};switch(t){case"esriGeometryPoint":return(t,r,n,i)=>function(t,e,r,n,i){return e.x=Fb(t,r.x),e.y=Ub(t,r.y),e!==r&&(n&&(e.z=r.z),i&&(e.m=r.m)),e}(r,e,t,n,i);case"esriGeometryPolygon":return(t,r,n,i)=>function(t,e,r,n,i){return e.rings=function(t,e,r,n){return Vb(t,r?n?Rb:Db:n?Db:$b,e)}(t,r.rings,n,i),e}(r,e,t,n,i);case"esriGeometryPolyline":return(t,r,n,i)=>function(t,e,r,n,i){return e.paths=function(t,e,r,n){return Vb(t,r?n?Rb:Db:n?Db:$b,e)}(t,r.paths,n,i),e}(r,e,t,n,i);case"esriGeometryMultipoint":return(t,r,n,i)=>function(t,e,r,n,i){return e.points=function(t,e,r,n){return Lb(t,r?n?Rb:Db:n?Db:$b,e)}(t,r.points,n,i),e}(r,e,t,n,i);default:return J.getLogger("esri.views.2d.support.arcadeOnDemand").error(new ge("mapview-arcade",`Unable to handle geometryType: ${t}`)),t=>t}}(e));const o=qb.get(e)(t.geometry,n,i,s);return{...t,geometry:o}}(e,n,i):e,o=t.repurposeFeature(s);try{return t.evaluate({...r,$feature:o})}catch(t){return J.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",t),null}}const qb=new Map;class Bb{constructor(t){this.styleUrl=null,this.uiUrl=null,this.styleUrl=t.styleUrl,this.uiUrl=t.uiUrl,this._uiFieldCurrentValue=new Map,this._uiFieldCurrentDomain=new Map,this._dynamicSymbolFieldMap=new Map,this._dynamicUIFieldMap=new Map,this._uiFieldSubdomainsMap=new Map,this._uiFieldDefaultValueMap=new Map,this._groupExpandStatus=new Map}async fetchResources(){this.styleUrl=this.styleUrl;const[t,e]=await Promise.all([fetch(this.styleUrl+"/resources/styles/dictionary-info.json").then((t=>t.json())),fetch(this.uiUrl).then((t=>t.json()))]),r=t.authoringInfo;var n;this._configDomains=r.configuration,this._symbols=r.symbol,this._texts=r.text,this._domains=e.domains,this._symbolValueFromUIFields=e.symbolValueFromUIFields,this._uiFields=e.uiFields,this._renderer?this._fieldMap=this._renderer.fieldMap:(this._fieldMap=this._getDefaultFieldMap(this._symbols,this._texts),this._renderer=new Ew({url:this.styleUrl,fieldMap:this._fieldMap,config:this._getDefaultConfig(this._configDomains)})),this._reverseFieldMap=(n=this._fieldMap,Object.keys(n).reduce(((t,e)=>(t[n[e]]=e,t)),{}));let i=e.uiFieldsFromSymbolValues;const s=this._getUIFeatureFields(this._uiFields);let o=[];if(Object.keys(this._symbolValueFromUIFields).forEach((t=>{o.push(Sl.create(this._symbolValueFromUIFields[t],{wkid:102100},s,null,["$feature"]).then((e=>{this._dynamicSymbolFieldMap.set(t,e)})))})),o.push.apply(o,this._processUIFields(this._uiFields,{wkid:102100},s)),i){let t=[];Object.keys(this._fieldMap).forEach((e=>{i=i.split("$feature."+e).join("$feature."+this._fieldMap[e]),t.push({alias:"HAS_NO_ALIAS",editable:!0,length:-1,name:this._fieldMap[e],nullable:!0,type:"esriFieldTypeString"})})),o.push(Sl.create(i,{wkid:102100},t,null,["$feature"]).then((t=>{this._uiFieldsFromSymbolValues=t})))}return Promise.all(o)}getFeature(){const t={},e=this._getUIFeature();return this._symbols.forEach((r=>{t[this._fieldMap[r]]=this._symbolValueFromUIFields[r]?Gb(this._dynamicSymbolFieldMap.get(r),e,null,null,null):e.attributes[r]})),this._texts.forEach((r=>{t[this._fieldMap[r]]=e.attributes[r]})),{attributes:t}}async createPreviewImage(){const t=this.getFeature();return this._renderer.getSymbolAsync(t).then((e=>Eb(e,{feature:t,fieldMap:this._fieldMap,size:30,style:"preview"}))).then((t=>t))}updateCurrentValue(t,e){this._uiFieldCurrentValue.set(t,e),this._resetSubdomainFields(t)}getUIFields(){return this.getUIFieldsInternal(this._uiFields)}getTreeNodeNamesByValue(t,e){let r=t;for(;r;){const t=[];if(t.push(r.name),r.code===e)return t;const n=this.getTreeNodeNamesByValue(r.children,e);if(n.length>0)return t.concat(n);r=r.peer}return[]}featureToUIFields(t){this._resetFields();const e=t.attributes;if(Object.keys(e).forEach((t=>{this._uiFieldCurrentValue.set(this._reverseFieldMap[t],e[t])})),this._uiFieldsFromSymbolValues){const e=Gb(this._uiFieldsFromSymbolValues,t,null,null,null),r=e?e.attributes:{};Object.keys(r).forEach((t=>{this._uiFieldCurrentValue.set(t,r[t])}))}}search(t){let e=[...this._uiFields];return this._searchUIFields(t,e,null)}_processUIFields(t,e,r){const n=[];return t.forEach((t=>{"group"===t.type&&(this._groupExpandStatus.set(t.key,"true"),n.push.apply(n,this._processUIFields(t.uiFields,e,r))),"expression"===t.type&&n.push(Sl.create(t.expression,e,r,null,["$feature"]).then((e=>{this._dynamicUIFieldMap.set(t.key,e)}))),t.default&&this._uiFieldDefaultValueMap.set(t.key,t.default)})),n}_getUIFeatureFields(t){let e=[];return t.forEach((t=>{"group"===t.type?e.push.apply(e,this._getUIFeatureFields(t.uiFields)):e.push({alias:"HAS_NO_ALIAS",editable:!0,length:-1,name:t.key,nullable:!0,type:"esriFieldTypeString"})})),e}_getDefaultFieldMap(t,e){const r={};return t&&t.forEach((t=>{r[t]=t})),e&&e.forEach((t=>{r[t]=t})),r}_getDefaultConfig(t){const e={};return t&&t.forEach((t=>{e[t.name]=t.value})),e}_initializeField(t,e,r){if(null!=r)return;const n=null!=t.default?t.default:this._uiFieldDefaultValueMap.get(t.key);this._uiFieldCurrentValue.set(t.key,null!=n?n:e.codedValues[0].code)}_resetFields(){this._uiFieldCurrentValue.clear(),this._uiFieldCurrentDomain.clear(),this._uiFieldSubdomainsMap.clear()}_resetSubdomainFields(t){this._uiFieldSubdomainsMap.has(t)&&this._uiFieldSubdomainsMap.get(t).forEach((t=>{this._uiFieldCurrentValue.set(t,null),this._resetSubdomainFields(t)}))}_getUIFeature(){const t={};return this._uiFieldCurrentValue.forEach(((e,r)=>{t[r]=e})),{attributes:t}}_searchUIFields(t,e,r){if(!e||0===e.length)return null;let n=[...e],i=new Array(5),s=-1/0;for(;n.length;){let e=n.pop();if("group"===e.type){n=[...e.uiFields,...n];continue}if("text"===e.type||"expression"===e.type||"inherit"===e.domain)continue;let o=this.getDomain(e.domain).codedValues;for(let n of o){let o=n.code,l=n.name,a=this._getQueryScore(t,l);const u={fieldKey:o,fieldValue:l,uiFieldName:e.name,uiFieldKey:e.key,score:a,parent:r};if(a>s&&(s=this._updateMaxScorer(u,i)),e.subdomains){const r=this._searchUIFields(t,e.subdomains[o],u);if(!r)continue;for(let t=0;t<r.length;t++)r[t]&&r[t].score>s&&(s=this._updateMaxScorer(r[t],i))}}}return i}_getQueryScore(t,e){let r=0,n=0,i=t.toLowerCase(),s=e.toLowerCase();for(let t=0;t<i.length;t++){let e=t,r=0;for(let t=0;t<s.length;t++)i[e]===s[t]&&(e++,r++);if(r>n&&(n=r),n===s.length)break}return r=n*n/(e.length>t.length?e.length:t.length),r}_updateMaxScorer(t,e){let r,n=1/0;for(let t=0;t<e.length;t++)if(e[t]&&e[t].score<n)n=e[t].score,r=t;else if(!e[t]){n=-1/0,r=t;break}return null!=r&&t.score>n&&(e[r]=t),n}getUIFieldsInternal(t){let e=[],r=[];t.forEach(((t,n)=>{if("group"===t.type){const r={type:"group",key:t.key,name:t.name,uiFields:[]};r.uiFields=this.getUIFieldsInternal(t.uiFields),e.push(r)}else if("expression"===t.type)e.push({type:"expression",key:t.key,name:t.name,expression:t.expression,value:""}),r.push(n);else if("text"===t.type&&"inherit"!==t.domain)e.push({type:t.type,name:t.name,key:t.key,domain:t.domain,value:this._uiFieldCurrentValue.get(t.key)});else{if(!("coded-value-domain"===t.type||t.domain.indexOf("$domains.")>-1))throw new Error("UIField type"+t.type+"is not supported.");{const r=t.subdomains,n=this.getDomain(t.domain);if(n&&!r){null==this._uiFieldCurrentValue.get(t.key)&&this._initializeField(t,n,null),this._uiFieldCurrentDomain.get(t.key)&&this._uiFieldCurrentDomain.delete(t.key);let r=null;if("nested-coded-value"===n.type){r={peer:null,children:null};for(let t=0;t<n.codedValues.length;t++){const e=n.codedValues[t],i=e.name.split(":");let s=r;for(let t=0;t<i.length;t++){const e=i[t].trim();s.children?s=this.findOrCreateTreeNode(s.children,e):s.code?(s.children={name:"Default",code:s.code,peer:{name:e,peer:null,children:null},children:null},s.code=null,s=s.children.peer):(s.children={name:e,peer:null,children:null},s=s.children)}s.code=e.code}}e.push({type:"coded-value-domain",key:t.key,name:t.name,domain:n,domainTree:r,value:this._uiFieldCurrentValue.get(t.key)})}n&&r&&e.push.apply(e,this.getUIFieldsFromDomainGroup(t))}}}));for(const t of r){const r=e[t];if("expression"!==r.type)continue;const n=r.key,i=Gb(this._dynamicUIFieldMap.get(n),this._getUIFeature(),null,null,null);r.value=i,this._uiFieldCurrentValue.set(n,i)}return e}findOrCreateTreeNode(t,e){let r=t;for(;r.name!==e;){if(!r.peer){r.peer={name:e,peer:null,children:null},r=r.peer;break}r=r.peer}return r}getUIFieldsFromDomainGroup(t){const e=[],r=t.key,n=this.getDomain(t.domain);let i=this._uiFieldCurrentDomain.get(r);const s=this._uiFieldCurrentValue.get(r);s&&i===t||(this._initializeField(t,n,s),this._uiFieldCurrentDomain.set(r,t));const o=t.subdomains[this._uiFieldCurrentValue.get(r)];return this._uiFieldSubdomainsMap.has(r)||this._uiFieldSubdomainsMap.set(r,new Set),e.push({type:"coded-value-domain",key:t.key,name:t.name,domain:n,value:this._uiFieldCurrentValue.get(r)}),o?(o.forEach((t=>{this._uiFieldSubdomainsMap.get(r).add(t.key)})),e.concat(this.getUIFieldsInternal(o))):e}getDomain(t){const e=t.split("$domains.")[1];return this._domains[e]}}const Wb=class{constructor(r){t(this,r),this.symbolChanged=e(this,"symbolChanged",7),this._groupExpandStatus={},this._suggestionList=null,this.symbolObject={uiFields:null,previewImg:null,attributes:null}}watchHandler(t,e){t!==e&&(this.viewModel.featureToUIFields({attributes:t}),this._updateSymbolObject())}connectedCallback(){this._initializeViewModel()}_initializeViewModel(){this.viewModel=new Bb({styleUrl:this.styleurl,uiUrl:this.uiurl}),this.viewModel.fetchResources().then((()=>(this.symbolAttributes&&this.viewModel.featureToUIFields({attributes:this.symbolAttributes}),this._updateSymbolObject())))}_updateSymbolObject(){const t=this.viewModel.getUIFields(),e=this.viewModel.getFeature().attributes;return this.viewModel.createPreviewImage().then((r=>{this.symbolObject={uiFields:t,previewImg:r,attributes:e},this.symbolChanged.emit(this.symbolObject)}))}_handleSearchBlur(t){t.target.value="",this._suggestionList=null}_handleInputChange(t){const e=t.target;this.viewModel.updateCurrentValue(e.parentElement.dataset.id,e.value),this._updateSymbolObject()}_handleTreeInputChange(t){const e=t.target,r=e.value;let n=e["data-tree"],i="",s=!1;for(;n;)if(n.name===r||s){if(null!=n.code){i=n.code;break}n=n.children,s=!0}else n=n.peer;this.viewModel.updateCurrentValue(e.parentElement.dataset.id,i),this._updateSymbolObject()}_handleGroupClick(t){let e=t.target.parentElement;"FIELDSET"!==e.tagName&&(e=e.parentElement);const r=Object.assign({},this._groupExpandStatus);r[e.dataset.id]="false"===e.ariaExpanded,this._groupExpandStatus=r}_handleSearchInputChange(t){this._suggestionList=this.viewModel.search(t.target.value)}_handleClickSuggest(t){const e=t.target,r=e["data-item"];let n=[r],i=r.parent;for(;i;)n.push(i),i=i.parent;for(;n.length;){let t=n.pop();this.viewModel.updateCurrentValue(t.uiFieldKey,t.fieldKey)}this._suggestionList=null,e.parentElement.parentElement.previousElementSibling.children[1].value="",this._updateSymbolObject()}renderSearchBox(t){return r("div",{class:"dictionary-symbol-browser-search-container"},r("div",{key:"searchInput",class:"searchInput","data-id":t},r("div",null,"Search"),r("input",{id:"searchFilter",onInput:this._handleSearchInputChange.bind(this),onBlur:this._handleSearchBlur.bind(this)})),this._suggestionList?this.renderSuggestionList():null)}renderSuggestionList(){let t=0;return r("div",{key:"suggestionList",class:"dictionary-symbol-browser-search-result"},r("ul",null,this._suggestionList.map((e=>r("li",{key:"listItem"+t++,"data-item":e,onMouseDown:this._handleClickSuggest.bind(this)},e.uiFieldName+":"+e.fieldValue)))))}renderForm(t){return r("div",{class:"dictionary-symbol-browser-form",key:"form"},r("form",null,this.renderUIFields(t)))}renderUIFields(t){return t.map((t=>"group"===t.type?this.renderGroup(t):"expression"===t.type?this.renderLabel(t,null,t.value):"text"===t.type?this.renderTextInput(t,t.value):"coded-value-domain"===t.type?this.renderLabel(t,t.domain):void 0))}renderGroup(t){const e=!1!==this._groupExpandStatus[t.key];return r("fieldset",{class:"dictionary-symbol-browser-group",key:t.key,"data-id":t.key,"aria-expanded":!1===e?"false":"true"},r("div",{class:"dictionary-symbol-browser-group-title",onClick:this._handleGroupClick.bind(this)},r("span",{class:e?"point-right":"point-down"},"> "),r("span",null,t.name)),r("div",{class:"dictionary-symbol-browser-group-fields"},e?this.renderUIFields(t.uiFields):null))}renderLabel(t,e,n){return r("label",{key:t.key,"data-id":t.key},t.name,n?r("p",null,n):"nested-coded-value"!==e.type?this.renderDropdown(e,t.value):this.renderDomainTree(t.domainTree,t.value))}renderDropdown(t,e){return t&&t&&t.codedValues?r("select",{onChange:this._handleInputChange.bind(this)},t.codedValues.map(((t,n)=>String(e)===""+t.code?r("option",{value:""+t.code,key:n,selected:!0},t.name):r("option",{value:""+t.code,key:n},t.name)))):r("input",null)}renderDomainTree(t,e){let n=t.children,i=this.viewModel.getTreeNodeNamesByValue(n,e),s=new Array(i.length);for(let t=0;t<s.length;t++){let e,r=i[t];for(;n;)n.name==r&&(e=n.children),s[t]||(s[t]=[]),s[t].push(n),n=n.peer;n=e}return s.map(((t,e)=>r("select",{onChange:this._handleTreeInputChange.bind(this),"data-tree":t[0],key:e},t.map(((t,n)=>String(i[e])===""+t.name?r("option",{value:""+t.name,key:n,selected:!0},t.name):r("option",{value:""+t.name,key:n},t.name))))))}renderTextInput(t,e){return r("label",{key:t.key,"data-id":t.key},t.name,r("input",{onKeyUp:this._handleInputChange.bind(this),value:e?String(e):null}))}renderPreview(){return r("div",{class:"dictionary-symbol-browser-preview",key:"preview"},r("label",null,"Preview"),r("img",{id:"previewImg",src:this.symbolObject.previewImg.src}))}render(){var t;return r("div",null,(null===(t=this.symbolObject)||void 0===t?void 0:t.previewImg)&&this.renderPreview(),this.symbolObject.uiFields&&this.renderSearchBox(this.symbolObject.uiFields),this.symbolObject.uiFields&&this.renderForm(this.symbolObject.uiFields))}static get watchers(){return{symbolAttributes:["watchHandler"]}}};Wb.style=":host{display:block;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';height:100%}:host>div{height:100%;overflow:hidden}.dictionary-symbol-browser-preview{height:132px;margin:10px}.dictionary-symbol-browser-form{height:calc(100% - 220px);overflow-y:scroll;margin:10px}.dictionary-symbol-browser-search-container{height:50px;margin:10px}.dictionary-symbol-browser-preview img{display:block;margin:auto;max-height:100px}.dictionary-symbol-browser-group-fields{display:flex;flex-direction:column}.dictionary-symbol-browser-group-fields label{padding:5px}.point-right{cursor:pointer;transform:rotate(90deg) scaleY(1.5);-webkit-transform:rotate(90deg) scaleY(1.5);display:inline-block}.point-down{cursor:pointer;transform:rotate(0deg) scaleY(1.5);-webkit-transform:rotate(0deg) scaleY(1.5);display:inline-block}fieldset{border:none}label{display:flex;flex-direction:column;padding:5px}select{margin-top:3px;padding:5px}span{padding:3px}.dictionary-symbol-browser-search-result{background:white;position:absolute;z-index:1;border:gray}li{list-style:none;border:0.5px solid rgba(110, 110, 110, 0.3);padding:3px;font-size:0.9em;cursor:pointer}li:hover{background-color:rgba(110, 110, 110, 0.2);cursor:pointer}ul{padding-inline-start:0;margin-top:0;margin-bottom:0}input{margin-top:3px;padding:4px}";export{pr as $,q as A,rn as B,nl as C,n as D,Lt as E,vs as F,Fl as G,Ul as H,mt as I,xl as J,ve as K,Yi as L,ru as M,Oc as N,Xr as O,wy as P,Sb as Q,kb as R,Ib as S,Rp as T,tn as U,wp as V,Qr as W,jb as X,Ua as Y,Qa as Z,Xe as _,ko as a,Kw as a$,Ay as a0,By as a1,dv as a2,De as a3,op as a4,pv as a5,Qy as a6,Jy as a7,Un as a8,i as a9,v as aA,zr as aB,on as aC,qr as aD,Lr as aE,Pe as aF,Je as aG,Re as aH,W as aI,Be as aJ,R as aK,Ze as aL,Fe as aM,Nr as aN,Ka as aO,gy as aP,sn as aQ,Hr as aR,th as aS,wh as aT,Ms as aU,dy as aV,Ei as aW,Yr as aX,Rr as aY,Tr as aZ,Uw as a_,xb as aa,gb as ab,kc as ac,nb as ad,Fr as ae,eb as af,Xw as ag,Mp as ah,B as ai,fb as aj,tb as ak,fl as al,cb as am,hb as an,ll as ao,Do as ap,Na as aq,gl as ar,ib as as,Sl as at,Gb as au,rb as av,$ as aw,oy as ax,Lc as ay,g as az,x as b,uw as b$,rr as b0,E as b1,Ke as b2,Wi as b3,ot as b4,ir as b5,Oy as b6,ny as b7,ur as b8,be as b9,Hv as bA,Yv as bB,Zn as bC,oi as bD,Tw as bE,wi as bF,br as bG,mr as bH,tr as bI,ds as bJ,Qv as bK,ss as bL,ns as bM,Es as bN,Hn as bO,Br as bP,A as bQ,Zr as bR,Kr as bS,St as bT,Ya as bU,ut as bV,ow as bW,nw as bX,iw as bY,sw as bZ,an as b_,ae as ba,Dw as bb,Rw as bc,kv as bd,yl as be,Rs as bf,zs as bg,is as bh,ml as bi,Kl as bj,Kv as bk,il as bl,xt as bm,qi as bn,up as bo,yc as bp,Ui as bq,We as br,Bd as bs,cn as bt,Fi as bu,dn as bv,hn as bw,Bi as bx,ri as by,Bt as bz,bs as c,Ca as c$,Ac as c0,lr as c1,sl as c2,Yt as c3,yt as c4,yv as c5,Ld as c6,ol as c7,z as c8,Gl as c9,tc as cA,X as cB,lp as cC,cv as cD,D as cE,Bh as cF,Xl as cG,Hh as cH,oh as cI,Vh as cJ,wv as cK,gv as cL,Zl as cM,Hl as cN,iv as cO,lv as cP,G as cQ,pn as cR,Wn as cS,C as cT,Vw as cU,Fw as cV,zw as cW,Aa as cX,Da as cY,Cc as cZ,_a as c_,Ql as ca,Bl as cb,uf as cc,vv as cd,$l as ce,Pl as cf,zl as cg,Le as ch,Xa as ci,Jv as cj,Ic as ck,K as cl,Iw as cm,Rf as cn,tv as co,Zh as cp,Zu as cq,Yl as cr,Ew as cs,bv as ct,hv as cu,Ba as cv,Qm as cw,Sv as cx,wl as cy,I as cz,k as d,Jr as d$,Pa as d0,Hw as d1,y as d2,m as d3,Ta as d4,nr as d5,f as d6,p as d7,tu as d8,Ia as d9,Zv as dA,Ho as dB,Hs as dC,po as dD,zb as dE,Aw as dF,j as dG,Cw as dH,Jn as dI,Kn as dJ,h as dK,ei as dL,Xn as dM,ea as dN,ha as dO,da as dP,ya as dQ,ma as dR,xa as dS,Mv as dT,pi as dU,T as dV,N as dW,_ as dX,en as dY,Gr as dZ,P as d_,sr as da,Vr as db,Lw as dc,Ra as dd,xr as de,_s as df,Ws as dg,Wr as dh,Os as di,Av as dj,os as dk,ls as dl,Nv as dm,Cv as dn,Tv as dp,us as dq,hs as dr,Ea as ds,$a as dt,Is as du,ks as dv,yr as dw,$s as dx,fs as dy,Ds as dz,fo as e,xi as e0,Nt as e1,d as e2,pc as e3,zh as e4,Rh as e5,_h as e6,Ma as e7,Ph as e8,$d as e9,jr as eA,dp as eB,Vt as eC,yp as eD,Sr as eE,Ro as eF,$e as eG,er as eH,Qi as eI,Pv as eJ,bl as eK,Wb as eL,mu as eM,$w as eN,td as ea,Er as eb,Td as ec,Xd as ed,Qd as ee,rf as ef,O as eg,Yn as eh,tt as ei,_v as ej,iy as ek,xf as el,ap as em,Um as en,bw as eo,nn as ep,Gt as eq,Uu as er,Lu as es,Mc as et,Pb as eu,hw as ev,_b as ew,vt as ex,Fu as ey,Dt as ez,rl as f,Ja as g,Dr as h,$r as i,mh as j,c as k,J as l,ge as m,Dc as n,ul as o,dl as p,hl as q,cl as r,w as s,M as t,Mo as u,al as v,qs as w,tl as x,ms as y,bo as z}