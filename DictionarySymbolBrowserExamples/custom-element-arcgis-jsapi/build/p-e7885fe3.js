import"./p-476cf7c4.js";import{bI as e,m as t,b as s,b1 as r,de as a,t as n,M as o}from"./p-dc4230e0.js";async function i(t,s={},a){await t.load(a);const n=e(t.itemUrl,"resources"),{start:o=1,num:i=10,sortOrder:c="asc",sortField:u="created"}=s,l={query:{start:o,num:i,sortOrder:c,sortField:u},signal:r(a,"signal")},d=await t.portal._request(n,l);return{total:d.total,nextStart:d.nextStart,resources:d.resources.map((({created:e,size:s,resource:r})=>({created:new Date(e),size:s,resource:t.resourceFromPath(r)})))}}async function c(a,n,o,i){if(!a.hasPath())throw new t(`portal-item-resource-${n}:invalid-path`,"Resource does not have a valid path");await a.portalItem.load(i);const c=e(a.portalItem.userItemUrl,"add"===n?"addResources":"updateResources"),[u,l]=d(a.path),f=await m(o),p=new FormData;return u&&"."!==u&&p.append("resourcesPrefix",u),p.append("fileName",l),p.append("file",f,l),p.append("f","json"),s(i)&&i.access&&p.append("access",i.access),await a.portalItem.portal._request(c,{method:"post",body:p,signal:r(i,"signal")}),a}async function u(s,a,n){if(!a.hasPath())throw new t("portal-item-resources-remove:invalid-path","Resource does not have a valid path");await s.load(n);const o=e(s.userItemUrl,"removeResources");await s.portal._request(o,{method:"post",query:{resource:a.path},signal:r(n,"signal")}),a.portalItem=null}async function l(t,s){await t.load(s);const a=e(t.userItemUrl,"removeResources");return t.portal._request(a,{method:"post",query:{deleteAll:!0},signal:r(s,"signal")})}function d(e){const t=e.lastIndexOf("/");return-1===t?[".",e]:[e.slice(0,t),e.slice(t+1)]}function f(e){const[t,s]=function(e){const t=a(e);return n(t)?[e,""]:[e.slice(0,e.length-t.length-1),`.${t}`]}(e),[r,o]=d(t);return[r,o,s]}async function m(e){return e instanceof Blob?e:(await o(e.url,{responseType:"blob"})).data}function p(t,s){if(!t.hasPath())return null;const[r,,a]=f(t.path);return t.portalItem.resourceFromPath(e(r,s+a))}function w(t,s){if(!t.hasPath())return null;const[r,,a]=f(t.path);return t.portalItem.resourceFromPath(e(r,s+a))}export{c as addOrUpdateResource,m as contentToBlob,i as fetchResources,p as getSiblingOfSameType,w as getSiblingOfSameTypeI,l as removeAllResources,u as removeResource,f as splitPrefixFileNameAndExtension}