import"./p-476cf7c4.js";import{U as r,i as n,O as t}from"./p-ab028778.js";import{J as e,k as u,Z as i,F as f,E as o,aj as c,W as s}from"./p-df16e524.js";import"./p-f75d073f.js";import"./p-2ef6e039.js";import"./p-7575e94f.js";import"./p-ebb65ba7.js";import"./p-fd91cc88.js";import"./p-43d5e67f.js";import"./p-6dae6b5e.js";import{WhereClause as p}from"./p-babdd7a5.js";import"./p-098cc742.js";function a(n,t,e,f,a,j){if(1===f.length){if(i(f[0]))return r(c(n,f[0],s(f[1],-1)));if(o(f[0]))return r(c(n,f[0].toArray(),s(f[1],-1)))}else if(2===f.length){if(i(f[0]))return r(c(n,f[0],s(f[1],-1)));if(o(f[0]))return r(c(n,f[0].toArray(),s(f[1],-1)));if(u(f[0]))return f[0].load().then((r=>m(p.create(f[1],r.getFieldsIndex()),j,a).then((r=>f[0].calculateStatistic(n,r,s(f[2],1e3),t.abortSignal)))))}else if(3===f.length&&u(f[0]))return f[0].load().then((r=>m(p.create(f[1],r.getFieldsIndex()),j,a).then((r=>f[0].calculateStatistic(n,r,s(f[2],1e3),t.abortSignal)))));return r(c(n,f,-1))}function m(e,u,i){try{const t=e.getVariables();if(t.length>0){const r=[];for(let n=0;n<t.length;n++)r.push(u.evaluateIdentifier(i,{name:t[n]}));return n(r).then((r=>{const n={};for(let e=0;e<t.length;e++)n[t[e]]=r[e];return e.parameters=n,e}))}return r(e)}catch(r){return t(r)}}function j(r){"async"===r.mode&&(r.functions.stdev=function(n,t){return r.standardFunctionAsync(n,t,(function(t,e,u){return a("stdev",t,0,u,n,r)}))},r.functions.variance=function(n,t){return r.standardFunctionAsync(n,t,(function(t,e,u){return a("variance",t,0,u,n,r)}))},r.functions.average=function(n,t){return r.standardFunctionAsync(n,t,(function(t,e,u){return a("mean",t,0,u,n,r)}))},r.functions.mean=function(n,t){return r.standardFunctionAsync(n,t,(function(t,e,u){return a("mean",t,0,u,n,r)}))},r.functions.sum=function(n,t){return r.standardFunctionAsync(n,t,(function(t,e,u){return a("sum",t,0,u,n,r)}))},r.functions.min=function(n,t){return r.standardFunctionAsync(n,t,(function(t,e,u){return a("min",t,0,u,n,r)}))},r.functions.max=function(n,t){return r.standardFunctionAsync(n,t,(function(t,e,u){return a("max",t,0,u,n,r)}))},r.functions.count=function(n,t){return r.standardFunctionAsync(n,t,(function(r,n,t){if(e(t,1,1),u(t[0]))return t[0].count(r.abortSignal);if(i(t[0])||f(t[0]))return t[0].length;if(o(t[0]))return t[0].length();throw new Error("Invalid Parameters for Count")}))})}export{j as registerFunctions}