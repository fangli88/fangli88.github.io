import"./p-476cf7c4.js";import{A as r,k as t}from"./p-dc4230e0.js";import{o as n}from"./p-098cc742.js";function e(r,t){const n=a[r.toLowerCase()];return null!=n&&t>=n.minParams&&t<=n.maxParams}const a={min:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.min.apply(Math,r[0])},max:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.max.apply(Math,r[0])},avg:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:u(r[0])},sum:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:function(r){let t=0;for(let n=0;n<r.length;n++)t+=r[n];return t}(r[0])},stddev:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.sqrt(i(r[0]))},count:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0].length},var:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:i(r[0])}};function u(r){let t=0;for(let n=0;n<r.length;n++)t+=r[n];return t/r.length}function i(r){const t=u(r),n=r.length;let e=0;for(const n of r)e+=Math.pow(n-t,2);return n>1?e/(n-1):0}class s{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0}static fixDefaults(r){if(null!==r.precision||null!==r.secondary)throw new Error("Primary and Secondary SqlInterval qualifiers not supported")}static createFromMilliseconds(r){const t=new s;return t.second=r/1e3,t}static createFromValueAndQualifer(r,t,n){let e=null;const a=new s;if(a.op="-"===n?"-":"+","interval-period"===t.type){s.fixDefaults(t);const n=new RegExp("^[0-9]{1,}$");if("year"===t.period||"month"===t.period)throw new Error("Year-Month Intervals not supported");if(!n.test(r))throw new Error("Illegal Interval");a[t.period]=parseFloat(r)}else{if(s.fixDefaults(t.start),s.fixDefaults(t.end),"year"===t.start.period||"month"===t.start.period)throw new Error("Year-Month Intervals not supported");if("year"===t.end.period||"month"===t.end.period)throw new Error("Year-Month Intervals not supported");switch(t.start.period){case"day":switch(t.end.period){case"hour":if(e=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!e.test(r))throw new Error("Illegal Interval");a[t.start.period]=parseFloat(r.split(" ")[0]),a[t.end.period]=parseFloat(r.split(" ")[1]);break;case"minute":if(e=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!e.test(r))throw new Error("Illegal Interval");{a[t.start.period]=parseFloat(r.split(" ")[0]);const n=r.split(" ")[1].split(":");a.hour=parseFloat(n[0]),a.minute=parseFloat(n[1])}break;case"second":if(e=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!e.test(r))throw new Error("Illegal Interval");{a[t.start.period]=parseFloat(r.split(" ")[0]);const n=r.split(" ")[1].split(":");a.hour=parseFloat(n[0]),a.minute=parseFloat(n[1]),a.second=parseFloat(n[2])}break;default:throw"Invalid Interval."}break;case"hour":switch(t.end.period){case"minute":if(e=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!e.test(r))throw new Error("Illegal Interval");a.hour=parseFloat(r.split(":")[0]),a.minute=parseFloat(r.split(":")[1]);break;case"second":if(e=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!e.test(r))throw new Error("Illegal Interval");{const t=r.split(":");a.hour=parseFloat(t[0]),a.minute=parseFloat(t[1]),a.second=parseFloat(t[2])}break;default:throw"Invalid Interval."}break;case"minute":switch(t.end.period){case"second":if(e=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!e.test(r))throw new Error("Illegal Interval");{const t=r.split(":");a.minute=parseFloat(t[0]),a.second=parseFloat(t[1])}break;default:throw"Invalid Interval."}break;default:throw"Invalid Interval."}}return a}valueInMilliseconds(){return("-"===this.op?-1:1)*(1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}function o(r,t){const n=c[r.toLowerCase()];if(null==n)throw new Error("Function Not Recognised");if(t.length<n.minParams||t.length>n.maxParams)throw new Error(`Invalid Parameter count for call to ${r.toUpperCase()}`);return n.evaluate(t)}function l(r,t){const n=c[r.toLowerCase()];return null!=n&&t>=n.minParams&&t<=n.maxParams}const c={extract:{minParams:2,maxParams:2,evaluate:([r,t])=>{if(null==t)return null;if(t instanceof Date)switch(r.toUpperCase()){case"SECOND":return t.getSeconds();case"MINUTE":return t.getMinutes();case"HOUR":return t.getHours();case"DAY":return t.getDate();case"MONTH":return t.getMonth()+1;case"YEAR":return t.getFullYear()}throw new Error("Invalid Parameter for call to EXTRACT")}},substring:{minParams:2,maxParams:3,evaluate:r=>{if(2===r.length){const[t,n]=r;return null==t||null==n?null:t.toString().substring(n-1)}if(3===r.length){const[t,n,e]=r;return null==t||null==n||null==e?null:e<=0?"":t.toString().substring(n-1,n+e-1)}}},position:{minParams:2,maxParams:2,evaluate:([r,t])=>null==r||null==t?null:t.indexOf(r)+1},trim:{minParams:2,maxParams:3,evaluate:t=>{const n=3===t.length,e=n?t[1]:" ",a=n?t[2]:t[1];if(null==e||null==a)return null;const u=`(${r(e)})`;switch(t[0]){case"BOTH":return a.replace(new RegExp(`^${u}*|${u}*$`,"g"),"");case"LEADING":return a.replace(new RegExp(`^${u}*`,"g"),"");case"TRAILING":return a.replace(new RegExp(`${u}*$`,"g"),"")}throw new Error("Invalid Parameter for call to TRIM")}},abs:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.abs(r[0])},ceiling:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.ceil(r[0])},floor:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.floor(r[0])},log:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.log(r[0])},log10:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.log(r[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.sin(r[0])},cos:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.cos(r[0])},tan:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.tan(r[0])},asin:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.asin(r[0])},acos:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.acos(r[0])},atan:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.atan(r[0])},sign:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0]>0?1:r[1]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:r=>null==r[0]||null==r[1]?null:Math.pow(r[0],r[1])},mod:{minParams:2,maxParams:2,evaluate:r=>null==r[0]||null==r[1]?null:r[0]%r[1]},round:{minParams:1,maxParams:2,evaluate:r=>{const t=r[0],n=2===r.length?Math.pow(10,r[1]):1;return null==t?null:Math.round(t*n)/n}},truncate:{minParams:1,maxParams:2,evaluate:r=>null==r[0]?null:1===r.length?parseInt(r[0].toFixed(0),10):parseFloat(r[0].toFixed(r[1]))},char_length:{minParams:1,maxParams:1,evaluate:r=>"string"==typeof r[0]||r[0]instanceof String?r[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:r=>{let t="";for(let n=0;n<r.length;n++){if(null==r[n])return null;t+=r[n].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0].toString().toUpperCase()}};var f=n((function(r){r.exports&&(r.exports=function(){function r(t,n,e,a){this.message=t,this.expected=n,this.found=e,this.location=a,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}return function(r,t){function n(){this.constructor=r}n.prototype=t.prototype,r.prototype=new n}(r,Error),r.buildMessage=function(r,t){var n={literal:function(r){return'"'+a(r.text)+'"'},class:function(r){var t,n="";for(t=0;t<r.parts.length;t++)n+=r.parts[t]instanceof Array?u(r.parts[t][0])+"-"+u(r.parts[t][1]):u(r.parts[t]);return"["+(r.inverted?"^":"")+n+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(r){return r.description}};function e(r){return r.charCodeAt(0).toString(16).toUpperCase()}function a(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+e(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+e(r)}))}function u(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+e(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+e(r)}))}function i(r){return n[r.type](r)}return"Expected "+function(r){var t,n,e=new Array(r.length);for(t=0;t<r.length;t++)e[t]=i(r[t]);if(e.sort(),e.length>0){for(t=1,n=1;t<e.length;t++)e[t-1]!==e[t]&&(e[n]=e[t],n++);e.length=n}switch(e.length){case 1:return e[0];case 2:return e[0]+" or "+e[1];default:return e.slice(0,-1).join(", ")+", or "+e[e.length-1]}}(r)+" but "+function(r){return r?'"'+a(r)+'"':"end of input"}(t)+" found."},{SyntaxError:r,parse:function(t,n){n=void 0!==n?n:{};var e,a={},u={start:Wr},i=Wr,s=function(r,t){return vn(r,t)},o=Ur("!",!1),l=Ur("=",!1),c=Ur(">=",!1),f=Ur(">",!1),p=Ur("<=",!1),h=Ur("<>",!1),v=Ur("<",!1),m=Ur("!=",!1),d=function(r){return r[0]+" "+r[2]},w=Ur("+",!1),y=Ur("-",!1),E=Ur("*",!1),I=Ur("/",!1),x=function(r,t){return r+t.join("")},g=/^[A-Za-z_\x80-\uFFFF]/,N=Br([["A","Z"],["a","z"],"_",["","￿"]],!1,!1),P=/^[A-Za-z0-9_]/,T=Br([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),F=/^[A-Za-z0-9_.\x80-\uFFFF]/,A=Br([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1),S=Ur("@",!1),O=function(r){return{type:"interval-period",period:r.value,precision:null,secondary:null}},b=function(r,t){return{type:"interval-period",period:"second",precision:r,secondary:t}},R=function(r){return parseFloat(r)},_=Ur("'",!1),D=Ur("N'",!1),M="''",$=Ur("''",!1),k=/^[^']/,L=Br(["'"],!0,!1),C=function(r,t){return{type:"when_clause",operand:r,value:t}},H=Ur(".",!1),U=/^[0-9]/,B=Br([["0","9"]],!1,!1),q=/^[eE]/,J=Br(["e","E"],!1,!1),W=/^[+\-]/,Y=Br(["+","-"],!1,!1),z=Ur("NULL",!0),G=Ur("TRUE",!0),V=Ur("FALSE",!0),K=Ur("IN",!0),Z=Ur("IS",!0),j=Ur("LIKE",!0),Q=Ur("ESCAPE",!0),X=Ur("NOT",!0),rr=Ur("AND",!0),tr=Ur("OR",!0),nr=Ur("BETWEEN",!0),er=Ur("FROM",!0),ar=Ur("FOR",!0),ur=Ur("SUBSTRING",!0),ir=Ur("EXTRACT",!0),sr=Ur("TRIM",!0),or=Ur("POSITION",!0),lr=Ur("TIMESTAMP",!0),cr=Ur("DATE",!0),fr=Ur("LEADING",!0),pr=Ur("TRAILING",!0),hr=Ur("BOTH",!0),vr=Ur("TO",!0),mr=Ur("INTERVAL",!0),dr=Ur("YEAR",!0),wr=Ur("MONTH",!0),yr=Ur("DAY",!0),Er=Ur("HOUR",!0),Ir=Ur("MINUTE",!0),xr=Ur("SECOND",!0),gr=Ur("CASE",!0),Nr=Ur("END",!0),Pr=Ur("WHEN",!0),Tr=Ur("THEN",!0),Fr=Ur("ELSE",!0),Ar=Ur(",",!1),Sr=Ur("(",!1),Or=Ur(")",!1),br=/^[ \t\n\r]/,Rr=Br([" ","\t","\n","\r"],!1,!1),_r=Ur("`",!1),Dr=/^[^`]/,Mr=Br(["`"],!0,!1),$r=0,kr=[{line:1,column:1}],Lr=0,Cr=[],Hr=0;if("startRule"in n){if(!(n.startRule in u))throw new Error("Can't start parsing from rule \""+n.startRule+'".');i=u[n.startRule]}function Ur(r,t){return{type:"literal",text:r,ignoreCase:t}}function Br(r,t,n){return{type:"class",parts:r,inverted:t,ignoreCase:n}}function qr(r){var n,e=kr[r];if(e)return e;for(n=r-1;!kr[n];)n--;for(e={line:(e=kr[n]).line,column:e.column};n<r;)10===t.charCodeAt(n)?(e.line++,e.column=1):e.column++,n++;return kr[r]=e,e}function Jr(r){$r<Lr||($r>Lr&&(Lr=$r,Cr=[]),Cr.push(r))}function Wr(){var r,t;return r=$r,cn()!==a&&(t=zr())!==a&&cn()!==a?r=t:($r=r,r=a),r}function Yr(){var r,t,n,e,u,i,s,o;if(r=$r,(t=zr())!==a){for(n=[],e=$r,(u=cn())!==a&&(i=sn())!==a&&(s=cn())!==a&&(o=zr())!==a?e=u=[u,i,s,o]:($r=e,e=a);e!==a;)n.push(e),e=$r,(u=cn())!==a&&(i=sn())!==a&&(s=cn())!==a&&(o=zr())!==a?e=u=[u,i,s,o]:($r=e,e=a);n!==a?r=t=function(r,t){var n={type:"expr_list"},e=function(r,t){return function(r,t){for(var n=[r],e=0;e<t.length;e++)n.push(t[e][3]);return n}(r,t)}(r,t);return n.value=e,n}(t,n):($r=r,r=a)}else $r=r,r=a;return r}function zr(){var r,t,n,e,u,i,o,l;if(r=$r,(t=Gr())!==a){for(n=[],e=$r,(u=cn())!==a&&(i=Mt())!==a&&(o=cn())!==a&&(l=Gr())!==a?e=u=[u,i,o,l]:($r=e,e=a);e!==a;)n.push(e),e=$r,(u=cn())!==a&&(i=Mt())!==a&&(o=cn())!==a&&(l=Gr())!==a?e=u=[u,i,o,l]:($r=e,e=a);n!==a?r=t=s(t,n):($r=r,r=a)}else $r=r,r=a;return r}function Gr(){var r,t,n,e,u,i,o,l;if(r=$r,(t=Vr())!==a){for(n=[],e=$r,(u=cn())!==a&&(i=Dt())!==a&&(o=cn())!==a&&(l=Vr())!==a?e=u=[u,i,o,l]:($r=e,e=a);e!==a;)n.push(e),e=$r,(u=cn())!==a&&(i=Dt())!==a&&(o=cn())!==a&&(l=Vr())!==a?e=u=[u,i,o,l]:($r=e,e=a);n!==a?r=t=s(t,n):($r=r,r=a)}else $r=r,r=a;return r}function Vr(){var r,n,e,u,i;return r=$r,(n=_t())===a&&(n=$r,33===t.charCodeAt($r)?(e="!",$r++):(e=a,0===Hr&&Jr(o)),e!==a?(u=$r,Hr++,61===t.charCodeAt($r)?(i="=",$r++):(i=a,0===Hr&&Jr(l)),Hr--,i===a?u=void 0:($r=u,u=a),u!==a?n=e=[e,u]:($r=n,n=a)):($r=n,n=a)),n!==a&&(e=cn())!==a&&(u=Vr())!==a?r=n=function(r){return function(r,t){return{type:"unary_expr",operator:"NOT",expr:t}}(0,r)}(u):($r=r,r=a),r===a&&(r=function(){var r,t,n;return r=$r,(t=Qr())!==a&&cn()!==a?((n=function(){var r;return(r=function(){var r,t,n,e,u,i;if(r=[],t=$r,(n=cn())!==a&&(e=Kr())!==a&&(u=cn())!==a&&(i=Qr())!==a?t=n=[n,e,u,i]:($r=t,t=a),t!==a)for(;t!==a;)r.push(t),t=$r,(n=cn())!==a&&(e=Kr())!==a&&(u=cn())!==a&&(i=Qr())!==a?t=n=[n,e,u,i]:($r=t,t=a);else r=a;return r!==a&&(r=function(r){return{type:"arithmetic",tail:r}}(r)),r}())===a&&(r=function(){var r,t,n,e;return r=$r,(t=jr())!==a&&cn()!==a&&(n=on())!==a&&cn()!==a&&(e=Yr())!==a&&cn()!==a&&ln()!==a?r=t=function(r,t){return{op:r,right:t}}(t,e):($r=r,r=a),r===a&&(r=$r,(t=jr())!==a&&cn()!==a&&(n=on())!==a&&cn()!==a&&(e=ln())!==a?r=t=function(r){return{op:r,right:{type:"expr_list",value:[]}}}(t):($r=r,r=a),r===a&&(r=$r,(t=jr())!==a&&cn()!==a&&(n=st())!==a?r=t=function(r,t){return{op:r,right:t}}(t,n):($r=r,r=a))),r}())===a&&(r=function(){var r,t,n,e,u,i;return r=$r,(t=_t())!==a&&cn()!==a&&(n=$t())!==a&&cn()!==a&&(e=Qr())!==a&&cn()!==a&&(u=Dt())!==a&&cn()!==a&&(i=Qr())!==a?r=t=function(r,t,n){return{op:"NOT"+r,right:{type:"expr_list",value:[t,n]}}}(n,e,i):($r=r,r=a),r===a&&(r=$r,(t=$t())!==a&&cn()!==a&&(n=Qr())!==a&&cn()!==a&&(e=Dt())!==a&&cn()!==a&&(u=Qr())!==a?r=t=function(r,t,n){return{op:r,right:{type:"expr_list",value:[t,n]}}}(t,n,u):($r=r,r=a)),r}())===a&&(r=function(){var r,t,n,e;return r=$r,(t=Ot())!==a&&cn()!==a&&(n=_t())!==a&&cn()!==a&&(e=Qr())!==a?r=t=function(r,t){return{op:r+"NOT",right:t}}(t,e):($r=r,r=a),r===a&&(r=$r,(t=Ot())!==a&&cn()!==a&&(n=Qr())!==a?r=t=function(r,t){return{op:r,right:t}}(t,n):($r=r,r=a)),r}())===a&&(r=function(){var r,t,n,e;return r=$r,(t=Zr())!==a&&cn()!==a&&(n=vt())!==a&&cn()!==a&&Rt()!==a&&cn()!==a&&(e=mt())!==a?r=t=function(r,t,n){return{op:r,right:t,escape:n.value}}(t,n,e):($r=r,r=a),r===a&&(r=$r,(t=Zr())!==a&&cn()!==a&&(n=vt())!==a?r=t=function(r,t){return{op:r,right:t,escape:""}}(t,n):($r=r,r=a)),r}()),r}())===a&&(n=null),n!==a?r=t=function(r,t){return""==t||null==t||null==t?r:"arithmetic"==t.type?vn(r,t.tail):hn(t.op,r,t.right,t.escape)}(t,n):($r=r,r=a)):($r=r,r=a),r}()),r}function Kr(){var r;return">="===t.substr($r,2)?(r=">=",$r+=2):(r=a,0===Hr&&Jr(c)),r===a&&(62===t.charCodeAt($r)?(r=">",$r++):(r=a,0===Hr&&Jr(f)),r===a&&("<="===t.substr($r,2)?(r="<=",$r+=2):(r=a,0===Hr&&Jr(p)),r===a&&("<>"===t.substr($r,2)?(r="<>",$r+=2):(r=a,0===Hr&&Jr(h)),r===a&&(60===t.charCodeAt($r)?(r="<",$r++):(r=a,0===Hr&&Jr(v)),r===a&&(61===t.charCodeAt($r)?(r="=",$r++):(r=a,0===Hr&&Jr(l)),r===a&&("!="===t.substr($r,2)?(r="!=",$r+=2):(r=a,0===Hr&&Jr(m)))))))),r}function Zr(){var r,t,n,e,u;return r=$r,t=$r,(n=_t())!==a&&(e=cn())!==a&&(u=bt())!==a?t=n=[n,e,u]:($r=t,t=a),t!==a&&(t=d(t)),(r=t)===a&&(r=bt()),r}function jr(){var r,t,n,e,u;return r=$r,t=$r,(n=_t())!==a&&(e=cn())!==a&&(u=St())!==a?t=n=[n,e,u]:($r=t,t=a),t!==a&&(t=d(t)),(r=t)===a&&(r=St()),r}function Qr(){var r,t,n,e,u,i,o,l;if(r=$r,(t=rt())!==a){for(n=[],e=$r,(u=cn())!==a&&(i=Xr())!==a&&(o=cn())!==a&&(l=rt())!==a?e=u=[u,i,o,l]:($r=e,e=a);e!==a;)n.push(e),e=$r,(u=cn())!==a&&(i=Xr())!==a&&(o=cn())!==a&&(l=rt())!==a?e=u=[u,i,o,l]:($r=e,e=a);n!==a?r=t=s(t,n):($r=r,r=a)}else $r=r,r=a;return r}function Xr(){var r;return 43===t.charCodeAt($r)?(r="+",$r++):(r=a,0===Hr&&Jr(w)),r===a&&(45===t.charCodeAt($r)?(r="-",$r++):(r=a,0===Hr&&Jr(y))),r}function rt(){var r,t,n,e,u,i,s,o;if(r=$r,(t=nt())!==a){for(n=[],e=$r,(u=cn())!==a&&(i=tt())!==a&&(s=cn())!==a&&(o=nt())!==a?e=u=[u,i,s,o]:($r=e,e=a);e!==a;)n.push(e),e=$r,(u=cn())!==a&&(i=tt())!==a&&(s=cn())!==a&&(o=nt())!==a?e=u=[u,i,s,o]:($r=e,e=a);n!==a?r=t=function(r,t){return vn(r,t)}(t,n):($r=r,r=a)}else $r=r,r=a;return r}function tt(){var r;return 42===t.charCodeAt($r)?(r="*",$r++):(r=a,0===Hr&&Jr(E)),r===a&&(47===t.charCodeAt($r)?(r="/",$r++):(r=a,0===Hr&&Jr(I))),r}function nt(){var r,t;return(r=function(){var r;return(r=mt())===a&&(r=function(){var r,t,n,e;return r=$r,(t=function(){var r,t,n,e;return r=$r,(t=Et())!==a&&(n=It())!==a&&(e=xt())!==a?r=t=function(r,t,n){return parseFloat(r+t+n)}(t,n,e):($r=r,r=a),r===a&&(r=$r,(t=Et())!==a&&(n=It())!==a?r=t=function(r,t){return parseFloat(r+t)}(t,n):($r=r,r=a),r===a&&(r=$r,(t=Et())!==a&&(n=xt())!==a?r=t=function(r,t){return parseFloat(r+t)}(t,n):($r=r,r=a),r===a&&(r=$r,(t=Et())!==a&&(t=function(r){return parseFloat(r)}(t)),r=t))),r}())!==a?(n=$r,Hr++,e=at(),Hr--,e===a?n=void 0:($r=n,n=a),n!==a?r=t=function(r){return{type:"number",value:r}}(t):($r=r,r=a)):($r=r,r=a),r}())===a&&(r=function(){var r,t;return r=$r,(t=Ft())!==a&&(t={type:"bool",value:!0}),(r=t)===a&&(r=$r,(t=At())!==a&&(t={type:"bool",value:!1}),r=t),r}())===a&&(r=function(){var r;return(r=Tt())!==a&&(r={type:"null",value:null}),r}())===a&&(r=function(){var r,t;return r=$r,Jt()!==a&&cn()!==a&&(t=vt())!==a?r=function(r){return{type:"date",value:r.value}}(t):($r=r,r=a),r}())===a&&(r=function(){var r,t;return r=$r,qt()!==a&&cn()!==a&&(t=vt())!==a?r=function(r){return{type:"timestamp",value:r.value}}(t):($r=r,r=a),r}())===a&&(r=lt()),r}())===a&&(r=function(){var r,t,n;return r=$r,Ht()!==a&&cn()!==a&&on()!==a&&cn()!==a&&(t=function(){var r;return(r=Kt())===a&&(r=Zt())===a&&(r=jt())===a&&(r=Qt())===a&&(r=Xt())===a&&(r=rn()),r}())!==a&&cn()!==a&&kt()!==a&&cn()!==a&&(n=zr())!==a&&cn()!==a&&ln()!==a?r=function(r,t){return{type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:r},t]}}}(t,n):($r=r,r=a),r}())===a&&(r=function(){var r,t,n,e,u,i,s,o;return r=$r,Ct()!==a&&cn()!==a&&on()!==a&&cn()!==a&&(t=zr())!==a&&cn()!==a&&kt()!==a&&cn()!==a&&(n=zr())!==a&&cn()!==a?(e=$r,(u=Lt())!==a&&(i=cn())!==a&&(s=zr())!==a&&(o=cn())!==a?e=u=[u,i,s,o]:($r=e,e=a),e===a&&(e=null),e!==a&&(u=ln())!==a?r=function(r,t,n){return{type:"function",name:"substring",args:{type:"expr_list",value:n?[r,t,n[2]]:[r,t]}}}(t,n,e):($r=r,r=a)):($r=r,r=a),r}())===a&&(r=function(){var r,t,n,e;return r=$r,Ut()!==a&&cn()!==a&&on()!==a&&cn()!==a?((t=ot())===a&&(t=null),t!==a&&cn()!==a&&(n=zr())!==a&&cn()!==a&&kt()!==a&&cn()!==a&&(e=zr())!==a&&cn()!==a&&ln()!==a?r=function(r,t,n){return{type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==r?"BOTH":r},t,n]}}}(t,n,e):($r=r,r=a)):($r=r,r=a),r===a&&(r=$r,Ut()!==a&&cn()!==a&&on()!==a&&cn()!==a?((t=ot())===a&&(t=null),t!==a&&cn()!==a&&(n=zr())!==a&&cn()!==a&&ln()!==a?r=function(r,t){return{type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==r?"BOTH":r},t]}}}(t,n):($r=r,r=a)):($r=r,r=a)),r}())===a&&(r=function(){var r,t,n;return r=$r,Bt()!==a&&cn()!==a&&on()!==a&&cn()!==a&&(t=zr())!==a&&cn()!==a&&St()!==a&&cn()!==a&&(n=zr())!==a&&cn()!==a&&ln()!==a?r=function(r,t){return{type:"function",name:"position",args:{type:"expr_list",value:[r,t]}}}(t,n):($r=r,r=a),r}())===a&&(r=function(){var r,t,n;return r=$r,(t=pn())!==a&&cn()!==a&&on()!==a&&cn()!==a?((n=Yr())===a&&(n=null),n!==a&&cn()!==a&&ln()!==a?r=t=function(r,t){return{type:"function",name:r,args:t||{type:"expr_list",value:[]}}}(t,n):($r=r,r=a)):($r=r,r=a),r}())===a&&(r=function(){var r;return(r=function(){var r,t,n,e,u;if(r=$r,tn()!==a)if(cn()!==a)if((t=zr())!==a)if(cn()!==a){for(n=[],e=wt();e!==a;)n.push(e),e=wt();n!==a&&(e=cn())!==a&&(u=nn())!==a?r=function(r,t){return{type:"case_expression",format:"simple",operand:r,clauses:t,else:null}}(t,n):($r=r,r=a)}else $r=r,r=a;else $r=r,r=a;else $r=r,r=a;else $r=r,r=a;if(r===a)if(r=$r,tn()!==a)if(cn()!==a)if((t=zr())!==a)if(cn()!==a){for(n=[],e=wt();e!==a;)n.push(e),e=wt();n!==a&&(e=cn())!==a&&(u=yt())!==a&&cn()!==a&&nn()!==a?r=function(r,t,n){return{type:"case_expression",format:"simple",operand:r,clauses:t,else:n.value}}(t,n,u):($r=r,r=a)}else $r=r,r=a;else $r=r,r=a;else $r=r,r=a;else $r=r,r=a;return r}())===a&&(r=function(){var r,t,n,e;if(r=$r,tn()!==a)if(cn()!==a){for(t=[],n=dt();n!==a;)t.push(n),n=dt();t!==a&&(n=cn())!==a&&(e=nn())!==a?r=function(r){return{type:"case_expression",format:"searched",clauses:r,else:null}}(t):($r=r,r=a)}else $r=r,r=a;else $r=r,r=a;if(r===a)if(r=$r,tn()!==a)if(cn()!==a){for(t=[],n=dt();n!==a;)t.push(n),n=dt();t!==a&&(n=cn())!==a&&(e=yt())!==a&&cn()!==a&&nn()!==a?r=function(r,t){return{type:"case_expression",format:"searched",clauses:r,else:t.value}}(t,e):($r=r,r=a)}else $r=r,r=a;else $r=r,r=a;return r}()),r}())===a&&(r=function(){var r;return(r=function(){var r;return(r=function(){var r,t,n,e;if(r=$r,(t=at())!==a){for(n=[],e=it();e!==a;)n.push(e),e=it();n!==a?r=t=x(t,n):($r=r,r=a)}else $r=r,r=a;return r}())!==a&&(r=r),r}())!==a&&(r=function(r){return/^CURRENT_DATE$/i.test(r)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(r)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:r}}(r)),r}())===a&&(r=st())===a&&(r=$r,on()!==a&&cn()!==a&&(t=zr())!==a&&cn()!==a&&ln()!==a?r=function(r){return r.paren=!0,r}(t):($r=r,r=a)),r}function et(){var r,t,n,e;if(r=$r,(t=at())!==a){for(n=[],e=ut();e!==a;)n.push(e),e=ut();n!==a?r=t=x(t,n):($r=r,r=a)}else $r=r,r=a;return r}function at(){var r;return g.test(t.charAt($r))?(r=t.charAt($r),$r++):(r=a,0===Hr&&Jr(N)),r}function ut(){var r;return P.test(t.charAt($r))?(r=t.charAt($r),$r++):(r=a,0===Hr&&Jr(T)),r}function it(){var r;return F.test(t.charAt($r))?(r=t.charAt($r),$r++):(r=a,0===Hr&&Jr(A)),r}function st(){var r,n,e;return r=$r,64===t.charCodeAt($r)?(n="@",$r++):(n=a,0===Hr&&Jr(S)),n!==a&&(e=et())!==a?r=n=[n,e]:($r=r,r=a),r!==a&&(r=function(r){return{type:"param",value:r[1]}}(r)),r}function ot(){var r;return(r=Wt())===a&&(r=Yt())===a&&(r=zt()),r}function lt(){var r,n,e,u;return r=$r,Vt()!==a&&cn()!==a?(45===t.charCodeAt($r)?(n="-",$r++):(n=a,0===Hr&&Jr(y)),n===a&&(43===t.charCodeAt($r)?(n="+",$r++):(n=a,0===Hr&&Jr(w))),n!==a&&cn()!==a&&(e=vt())!==a&&cn()!==a&&(u=ct())!==a?r=function(r,t,n){return{type:"interval",value:t,qualifier:n,op:r}}(n,e,u):($r=r,r=a)):($r=r,r=a),r===a&&(r=$r,Vt()!==a&&cn()!==a&&(n=vt())!==a&&cn()!==a&&(e=ct())!==a?r=function(r,t){return{type:"interval",value:r,qualifier:t,op:""}}(n,e):($r=r,r=a)),r}function ct(){var r,t,n;return r=$r,(t=function(){var r,t,n;return r=$r,(t=ft())!==a&&cn()!==a&&on()!==a&&cn()!==a&&(n=ht())!==a&&cn()!==a&&ln()!==a?r=t=function(r,t){return{type:"interval-period",period:r.value,precision:t,secondary:null}}(t,n):($r=r,r=a),r===a&&(r=$r,(t=ft())!==a&&(t=O(t)),r=t),r}())!==a&&cn()!==a&&Gt()!==a&&cn()!==a&&(n=function(){var r,t,n,e;return r=$r,(t=ft())!==a&&(t=function(r){return{type:"interval-period",period:r.value,precision:null,secondary:null}}(t)),(r=t)===a&&(r=$r,(t=rn())!==a&&cn()!==a&&on()!==a&&cn()!==a&&(n=ht())!==a&&cn()!==a&&sn()!==a&&cn()!==a&&(e=pt())!==a&&cn()!==a&&ln()!==a?r=t=b(n,e):($r=r,r=a),r===a&&(r=$r,(t=rn())!==a&&cn()!==a&&on()!==a&&cn()!==a&&(n=ht())!==a&&cn()!==a&&ln()!==a?r=t=function(r){return{type:"interval-period",period:"second",precision:r,secondary:null}}(n):($r=r,r=a),r===a&&(r=$r,(t=rn())!==a&&(t={type:"interval-period",period:"second",precision:null,secondary:null}),r=t))),r}())!==a?r=t=function(r,t){return{type:"interval-qualifier",start:r,end:t}}(t,n):($r=r,r=a),r===a&&(r=function(){var r,t,n,e;return r=$r,(t=ft())!==a&&cn()!==a&&on()!==a&&cn()!==a&&(n=pt())!==a&&cn()!==a&&ln()!==a?r=t=function(r,t){return{type:"interval-period",period:r.value,precision:t,secondary:null}}(t,n):($r=r,r=a),r===a&&(r=$r,(t=ft())!==a&&(t=O(t)),(r=t)===a&&(r=$r,(t=rn())!==a&&cn()!==a&&on()!==a&&cn()!==a&&(n=ht())!==a&&cn()!==a&&sn()!==a&&cn()!==a&&(e=pt())!==a&&cn()!==a&&ln()!==a?r=t=b(n,e):($r=r,r=a),r===a&&(r=$r,(t=rn())!==a&&cn()!==a&&on()!==a&&cn()!==a&&(n=pt())!==a&&cn()!==a&&ln()!==a?r=t=function(r){return{type:"interval-period",period:"second",precision:r,secondary:null}}(n):($r=r,r=a),r===a&&(r=$r,(t=rn())!==a&&(t={type:"interval-period",period:"second",precision:null,secondary:null}),r=t)))),r}()),r}function ft(){var r,t;return r=$r,(t=jt())!==a&&(t={type:"string",value:"day"}),(r=t)===a&&(r=$r,(t=Qt())!==a&&(t={type:"string",value:"hour"}),(r=t)===a&&(r=$r,(t=Xt())!==a&&(t={type:"string",value:"minute"}),(r=t)===a&&(r=$r,(t=Zt())!==a&&(t={type:"string",value:"month"}),(r=t)===a&&(r=$r,(t=Kt())!==a&&(t={type:"string",value:"year"}),r=t)))),r}function pt(){var r;return(r=gt())!==a&&(r=R(r)),r}function ht(){var r;return(r=gt())!==a&&(r=R(r)),r}function vt(){var r;return(r=mt())===a&&(r=st()),r}function mt(){var r,n,e,u,i;if(r=$r,39===t.charCodeAt($r)?(n="'",$r++):(n=a,0===Hr&&Jr(_)),n===a&&("N'"===t.substr($r,2)?(n="N'",$r+=2):(n=a,0===Hr&&Jr(D))),n!==a){for(e=[],u=$r,t.substr($r,2)===M?(i=M,$r+=2):(i=a,0===Hr&&Jr($)),i!==a&&(i="'"),(u=i)===a&&(k.test(t.charAt($r))?(u=t.charAt($r),$r++):(u=a,0===Hr&&Jr(L)));u!==a;)e.push(u),u=$r,t.substr($r,2)===M?(i=M,$r+=2):(i=a,0===Hr&&Jr($)),i!==a&&(i="'"),(u=i)===a&&(k.test(t.charAt($r))?(u=t.charAt($r),$r++):(u=a,0===Hr&&Jr(L)));e!==a?(39===t.charCodeAt($r)?(u="'",$r++):(u=a,0===Hr&&Jr(_)),u!==a?r=n=function(r){return{type:"string",value:r.join("")}}(e):($r=r,r=a)):($r=r,r=a)}else $r=r,r=a;return r}function dt(){var r,t,n;return r=$r,en()!==a&&cn()!==a&&(t=zr())!==a&&cn()!==a&&an()!==a&&cn()!==a&&(n=zr())!==a?r=C(t,n):($r=r,r=a),r}function wt(){var r,t,n;return r=$r,en()!==a&&cn()!==a&&(t=zr())!==a&&cn()!==a&&an()!==a&&cn()!==a&&(n=zr())!==a?r=C(t,n):($r=r,r=a),r}function yt(){var r,t;return r=$r,un()!==a&&cn()!==a&&(t=zr())!==a?r=function(r){return{type:"else_clause",value:r}}(t):($r=r,r=a),r}function Et(){var r,n,e;return(r=gt())===a&&(r=$r,45===t.charCodeAt($r)?(n="-",$r++):(n=a,0===Hr&&Jr(y)),n===a&&(43===t.charCodeAt($r)?(n="+",$r++):(n=a,0===Hr&&Jr(w))),n!==a&&(e=gt())!==a?r=n=function(r,t){return r[0]+t}(n,e):($r=r,r=a)),r}function It(){var r,n,e;return r=$r,46===t.charCodeAt($r)?(n=".",$r++):(n=a,0===Hr&&Jr(H)),n!==a?((e=gt())===a&&(e=null),e!==a?r=n=function(r){return"."+(null!=r?r:"")}(e):($r=r,r=a)):($r=r,r=a),r}function xt(){var r,t,n;return r=$r,(t=Pt())!==a&&(n=gt())!==a?r=t=function(r,t){return r+t}(t,n):($r=r,r=a),r}function gt(){var r,t;if(r=[],(t=Nt())!==a)for(;t!==a;)r.push(t),t=Nt();else r=a;return r!==a&&(r=function(r){return r.join("")}(r)),r}function Nt(){var r;return U.test(t.charAt($r))?(r=t.charAt($r),$r++):(r=a,0===Hr&&Jr(B)),r}function Pt(){var r,n,e;return r=$r,q.test(t.charAt($r))?(n=t.charAt($r),$r++):(n=a,0===Hr&&Jr(J)),n!==a?(W.test(t.charAt($r))?(e=t.charAt($r),$r++):(e=a,0===Hr&&Jr(Y)),e===a&&(e=null),e!==a?r=n=function(r,t){return"e"+(null===t?"":t)}(0,e):($r=r,r=a)):($r=r,r=a),r}function Tt(){var r,n,e,u;return r=$r,"null"===t.substr($r,4).toLowerCase()?(n=t.substr($r,4),$r+=4):(n=a,0===Hr&&Jr(z)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n=[n,e]:($r=r,r=a)):($r=r,r=a),r}function Ft(){var r,n,e,u;return r=$r,"true"===t.substr($r,4).toLowerCase()?(n=t.substr($r,4),$r+=4):(n=a,0===Hr&&Jr(G)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n=[n,e]:($r=r,r=a)):($r=r,r=a),r}function At(){var r,n,e,u;return r=$r,"false"===t.substr($r,5).toLowerCase()?(n=t.substr($r,5),$r+=5):(n=a,0===Hr&&Jr(V)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n=[n,e]:($r=r,r=a)):($r=r,r=a),r}function St(){var r,n,e,u;return r=$r,"in"===t.substr($r,2).toLowerCase()?(n=t.substr($r,2),$r+=2):(n=a,0===Hr&&Jr(K)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="IN":($r=r,r=a)):($r=r,r=a),r}function Ot(){var r,n,e,u;return r=$r,"is"===t.substr($r,2).toLowerCase()?(n=t.substr($r,2),$r+=2):(n=a,0===Hr&&Jr(Z)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="IS":($r=r,r=a)):($r=r,r=a),r}function bt(){var r,n,e,u;return r=$r,"like"===t.substr($r,4).toLowerCase()?(n=t.substr($r,4),$r+=4):(n=a,0===Hr&&Jr(j)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="LIKE":($r=r,r=a)):($r=r,r=a),r}function Rt(){var r,n,e,u;return r=$r,"escape"===t.substr($r,6).toLowerCase()?(n=t.substr($r,6),$r+=6):(n=a,0===Hr&&Jr(Q)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="ESCAPE":($r=r,r=a)):($r=r,r=a),r}function _t(){var r,n,e,u;return r=$r,"not"===t.substr($r,3).toLowerCase()?(n=t.substr($r,3),$r+=3):(n=a,0===Hr&&Jr(X)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="NOT":($r=r,r=a)):($r=r,r=a),r}function Dt(){var r,n,e,u;return r=$r,"and"===t.substr($r,3).toLowerCase()?(n=t.substr($r,3),$r+=3):(n=a,0===Hr&&Jr(rr)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="AND":($r=r,r=a)):($r=r,r=a),r}function Mt(){var r,n,e,u;return r=$r,"or"===t.substr($r,2).toLowerCase()?(n=t.substr($r,2),$r+=2):(n=a,0===Hr&&Jr(tr)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="OR":($r=r,r=a)):($r=r,r=a),r}function $t(){var r,n,e,u;return r=$r,"between"===t.substr($r,7).toLowerCase()?(n=t.substr($r,7),$r+=7):(n=a,0===Hr&&Jr(nr)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="BETWEEN":($r=r,r=a)):($r=r,r=a),r}function kt(){var r,n,e,u;return r=$r,"from"===t.substr($r,4).toLowerCase()?(n=t.substr($r,4),$r+=4):(n=a,0===Hr&&Jr(er)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="FROM":($r=r,r=a)):($r=r,r=a),r}function Lt(){var r,n,e,u;return r=$r,"for"===t.substr($r,3).toLowerCase()?(n=t.substr($r,3),$r+=3):(n=a,0===Hr&&Jr(ar)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="FOR":($r=r,r=a)):($r=r,r=a),r}function Ct(){var r,n,e,u;return r=$r,"substring"===t.substr($r,9).toLowerCase()?(n=t.substr($r,9),$r+=9):(n=a,0===Hr&&Jr(ur)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="SUBSTRING":($r=r,r=a)):($r=r,r=a),r}function Ht(){var r,n,e,u;return r=$r,"extract"===t.substr($r,7).toLowerCase()?(n=t.substr($r,7),$r+=7):(n=a,0===Hr&&Jr(ir)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="EXTRACT":($r=r,r=a)):($r=r,r=a),r}function Ut(){var r,n,e,u;return r=$r,"trim"===t.substr($r,4).toLowerCase()?(n=t.substr($r,4),$r+=4):(n=a,0===Hr&&Jr(sr)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="TRIM":($r=r,r=a)):($r=r,r=a),r}function Bt(){var r,n,e,u;return r=$r,"position"===t.substr($r,8).toLowerCase()?(n=t.substr($r,8),$r+=8):(n=a,0===Hr&&Jr(or)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="POSITION":($r=r,r=a)):($r=r,r=a),r}function qt(){var r,n,e,u;return r=$r,"timestamp"===t.substr($r,9).toLowerCase()?(n=t.substr($r,9),$r+=9):(n=a,0===Hr&&Jr(lr)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="TIMESTAMP":($r=r,r=a)):($r=r,r=a),r}function Jt(){var r,n,e,u;return r=$r,"date"===t.substr($r,4).toLowerCase()?(n=t.substr($r,4),$r+=4):(n=a,0===Hr&&Jr(cr)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="DATE":($r=r,r=a)):($r=r,r=a),r}function Wt(){var r,n,e,u;return r=$r,"leading"===t.substr($r,7).toLowerCase()?(n=t.substr($r,7),$r+=7):(n=a,0===Hr&&Jr(fr)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="LEADING":($r=r,r=a)):($r=r,r=a),r}function Yt(){var r,n,e,u;return r=$r,"trailing"===t.substr($r,8).toLowerCase()?(n=t.substr($r,8),$r+=8):(n=a,0===Hr&&Jr(pr)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="TRAILING":($r=r,r=a)):($r=r,r=a),r}function zt(){var r,n,e,u;return r=$r,"both"===t.substr($r,4).toLowerCase()?(n=t.substr($r,4),$r+=4):(n=a,0===Hr&&Jr(hr)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="BOTH":($r=r,r=a)):($r=r,r=a),r}function Gt(){var r,n,e,u;return r=$r,"to"===t.substr($r,2).toLowerCase()?(n=t.substr($r,2),$r+=2):(n=a,0===Hr&&Jr(vr)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="TO":($r=r,r=a)):($r=r,r=a),r}function Vt(){var r,n,e,u;return r=$r,"interval"===t.substr($r,8).toLowerCase()?(n=t.substr($r,8),$r+=8):(n=a,0===Hr&&Jr(mr)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="INTERVAL":($r=r,r=a)):($r=r,r=a),r}function Kt(){var r,n,e,u;return r=$r,"year"===t.substr($r,4).toLowerCase()?(n=t.substr($r,4),$r+=4):(n=a,0===Hr&&Jr(dr)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="YEAR":($r=r,r=a)):($r=r,r=a),r}function Zt(){var r,n,e,u;return r=$r,"month"===t.substr($r,5).toLowerCase()?(n=t.substr($r,5),$r+=5):(n=a,0===Hr&&Jr(wr)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="MONTH":($r=r,r=a)):($r=r,r=a),r}function jt(){var r,n,e,u;return r=$r,"day"===t.substr($r,3).toLowerCase()?(n=t.substr($r,3),$r+=3):(n=a,0===Hr&&Jr(yr)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="DAY":($r=r,r=a)):($r=r,r=a),r}function Qt(){var r,n,e,u;return r=$r,"hour"===t.substr($r,4).toLowerCase()?(n=t.substr($r,4),$r+=4):(n=a,0===Hr&&Jr(Er)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="HOUR":($r=r,r=a)):($r=r,r=a),r}function Xt(){var r,n,e,u;return r=$r,"minute"===t.substr($r,6).toLowerCase()?(n=t.substr($r,6),$r+=6):(n=a,0===Hr&&Jr(Ir)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="MINUTE":($r=r,r=a)):($r=r,r=a),r}function rn(){var r,n,e,u;return r=$r,"second"===t.substr($r,6).toLowerCase()?(n=t.substr($r,6),$r+=6):(n=a,0===Hr&&Jr(xr)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="SECOND":($r=r,r=a)):($r=r,r=a),r}function tn(){var r,n,e,u;return r=$r,"case"===t.substr($r,4).toLowerCase()?(n=t.substr($r,4),$r+=4):(n=a,0===Hr&&Jr(gr)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="CASE":($r=r,r=a)):($r=r,r=a),r}function nn(){var r,n,e,u;return r=$r,"end"===t.substr($r,3).toLowerCase()?(n=t.substr($r,3),$r+=3):(n=a,0===Hr&&Jr(Nr)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="END":($r=r,r=a)):($r=r,r=a),r}function en(){var r,n,e,u;return r=$r,"when"===t.substr($r,4).toLowerCase()?(n=t.substr($r,4),$r+=4):(n=a,0===Hr&&Jr(Pr)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="WHEN":($r=r,r=a)):($r=r,r=a),r}function an(){var r,n,e,u;return r=$r,"then"===t.substr($r,4).toLowerCase()?(n=t.substr($r,4),$r+=4):(n=a,0===Hr&&Jr(Tr)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="THEN":($r=r,r=a)):($r=r,r=a),r}function un(){var r,n,e,u;return r=$r,"else"===t.substr($r,4).toLowerCase()?(n=t.substr($r,4),$r+=4):(n=a,0===Hr&&Jr(Fr)),n!==a?(e=$r,Hr++,u=ut(),Hr--,u===a?e=void 0:($r=e,e=a),e!==a?r=n="ELSE":($r=r,r=a)):($r=r,r=a),r}function sn(){var r;return 44===t.charCodeAt($r)?(r=",",$r++):(r=a,0===Hr&&Jr(Ar)),r}function on(){var r;return 40===t.charCodeAt($r)?(r="(",$r++):(r=a,0===Hr&&Jr(Sr)),r}function ln(){var r;return 41===t.charCodeAt($r)?(r=")",$r++):(r=a,0===Hr&&Jr(Or)),r}function cn(){var r,t;for(r=[],t=fn();t!==a;)r.push(t),t=fn();return r}function fn(){var r;return br.test(t.charAt($r))?(r=t.charAt($r),$r++):(r=a,0===Hr&&Jr(Rr)),r}function pn(){var r,n,e,u;if(r=$r,(n=et())!==a&&(n=n),(r=n)===a)if(r=$r,96===t.charCodeAt($r)?(n="`",$r++):(n=a,0===Hr&&Jr(_r)),n!==a){if(e=[],Dr.test(t.charAt($r))?(u=t.charAt($r),$r++):(u=a,0===Hr&&Jr(Mr)),u!==a)for(;u!==a;)e.push(u),Dr.test(t.charAt($r))?(u=t.charAt($r),$r++):(u=a,0===Hr&&Jr(Mr));else e=a;e!==a?(96===t.charCodeAt($r)?(u="`",$r++):(u=a,0===Hr&&Jr(_r)),u!==a?r=n=function(r){return r.join("")}(e):($r=r,r=a)):($r=r,r=a)}else $r=r,r=a;return r}function hn(r,t,n,e){var a={type:"binary_expr",operator:r,left:t,right:n};return void 0!==e&&(a.escape=e),a}function vn(r,t){for(var n=r,e=0;e<t.length;e++)n=hn(t[e][1],n,t[e][3]);return n}if((e=i())!==a&&$r===t.length)return e;throw e!==a&&$r<t.length&&Jr({type:"end"}),function(t,n,e){return new r(r.buildMessage(t,n),t,n,e)}(Cr,Lr<t.length?t.charAt(Lr):null,function(r,t){var n=qr(r),e=qr(t);return{start:{offset:r,line:n.line,column:n.column},end:{offset:t,line:e.line,column:e.column}}}(Lr,Lr<t.length?Lr+1:Lr))}}}())}));const p=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,h=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,v=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,m=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,d=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function w(r,t){return(r+="").length>=t?r:new Array(t-r.length+1).join("0")+r}function y(r,t,n="0",e="0",a="0",u="0",i="",s="0",o="0"){if("+"===i||"-"===i){const l=`${w(parseInt(r,10),4)}-${w(parseInt(t,10),2)}-${w(parseInt(n,10),2)}`;let c="";parseFloat(u)<10&&(c="0");const f=`${w(parseInt(e,10),2)}:${w(parseInt(a,10),2)}:${c+parseFloat(u).toString()}`,p=`${i}${w(parseInt(s,10),2)}:${w(parseInt(o,10),2)}`;return new Date(l+"T"+f+p)}return new Date(parseInt(r,10),parseInt(t,10)-1,parseInt(n,10),parseInt(e,10),parseInt(a,10),parseFloat(u))}class E{static makeBool(r){return N(r)}static featureValue(r,t,n,e){return M(r,t,n,e)}static equalsNull(r){return null===r}static applyLike(r,t,n){return O(r,t,n)}static ensureArray(r){return P(r)}static applyIn(r,t){return S(r,t)}static currentDate(){const r=new Date;return r.setHours(0,0,0,0),r}static makeSqlInterval(r,t,n){return s.createFromValueAndQualifer(r,t,n)}static convertInterval(r){return r instanceof s?r.valueInMilliseconds():r}static currentTimestamp(){return new Date}static compare(r,t,n){return R(r,t,n)}static calculate(r,t,n){return D(r,t,n)}static makeComparable(r){return b(r)}static evaluateFunction(r,t){return o(r,t)}static lookup(r,t){const n=t[r];return void 0===n?null:n}static between(r,t){return null==r||null==t[0]||null==t[1]?null:r>=t[0]&&r<=t[1]}static notbetween(r,t){return null==r||null==t[0]||null==t[1]?null:r<t[0]||r>t[1]}static ternaryNot(r){return T(r)}static ternaryAnd(r,t){return F(r,t)}static ternaryOr(r,t){return A(r,t)}}class I{constructor(r,t){this.fieldsIndex=t,this.datefields={},this.parameters={},this.parseTree=class{static parse(r){return f.parse(r)}}.parse(r);const{isStandardized:n,isAggregate:e,referencedFieldNames:a}=this.extractExpressionInfo(t);this.referencedFieldNames=a,this.isStandardized=n,this.isAggregate=e}static create(r,t){return new I(r,t)}get fieldNames(){return this.referencedFieldNames}testSet(r,t=$){const n={};for(const e of this.fieldNames)n[e]=r.map((r=>t.getAttribute(r,e)));return!!this.evaluateNode(this.parseTree,{attributes:n},$)}calculateValue(r,t=$){const n=this.evaluateNode(this.parseTree,r,t);return n instanceof s?n.valueInMilliseconds()/864e5:n}calculateValueCompiled(r,n=$){return null!=this.parseTree._compiledVersion?this.parseTree._compiledVersion(r,this.parameters,n,this.datefields):t("csp-restrictions")?this.calculateValue(r,n):(this.compileMe(),this.parseTree._compiledVersion(r,this.parameters,n,this.datefields))}testFeature(r,t=$){return!!this.evaluateNode(this.parseTree,r,t)}testFeatureCompiled(r,n=$){return null!=this.parseTree._compiledVersion?!!this.parseTree._compiledVersion(r,this.parameters,n,this.datefields):t("csp-restrictions")?this.testFeature(r,n):(this.compileMe(),!!this.parseTree._compiledVersion(r,this.parameters,n,this.datefields))}getFunctions(){const r=[];return this.visitAll(this.parseTree,(t=>{"function"===t.type&&r.push(t.name.toLowerCase())})),_(r)}getExpressions(){const r=new Map;return this.visitAll(this.parseTree,(t=>{if("function"===t.type){const n=t.name.toLowerCase(),e=t.args.value[0];if("column_ref"===e.type){const t=e.column,a=`${n}-${t}`;r.has(a)||r.set(a,{aggregateType:n,field:t})}}})),[...r.values()]}getVariables(){const r=[];return this.visitAll(this.parseTree,(t=>{"param"===t.type&&r.push(t.value.toLowerCase())})),_(r)}compileMe(){const r="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","datefields",r).bind(E)}extractExpressionInfo(r){const t=[];let n=!0,a=!0;return this.visitAll(this.parseTree,(u=>{switch(u.type){case"column_ref":{const n=r.get(u.column),e=n&&n.name;!n||"date"!==n.type&&"esriFieldTypeDate"!==n.type||(this.datefields[n.name]=1),void 0!==e?(t.push(e),u.column=e):t.push(u.column);break}case"function":{const{name:r,args:t}=u,i=t.value.length;n&&(n=l(r,i)),a&&(a=e(r,i));break}}})),{referencedFieldNames:_(t),isStandardized:n,isAggregate:a}}visitAll(r,t){if(null!=r)switch(t(r),r.type){case"when_clause":this.visitAll(r.operand,t),this.visitAll(r.value,t);break;case"case_expression":for(const n of r.clauses)this.visitAll(n,t);"simple"===r.format&&this.visitAll(r.operand,t),null!==r.else&&this.visitAll(r.else,t);break;case"expr_list":for(const n of r.value)this.visitAll(n,t);break;case"unary_expr":this.visitAll(r.expr,t);break;case"binary_expr":this.visitAll(r.left,t),this.visitAll(r.right,t);break;case"function":this.visitAll(r.args,t)}}evaluateNodeToJavaScript(r){switch(r.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(r.value)+", "+JSON.stringify(r.qualifier)+","+JSON.stringify(r.op)+")";case"case_expression":{let t="";if("simple"===r.format){const n="this.makeComparable("+this.evaluateNodeToJavaScript(r.operand)+")";t="( ";for(let e=0;e<r.clauses.length;e++)t+=" ("+n+" === this.makeComparable("+this.evaluateNodeToJavaScript(r.clauses[e].operand)+")) ? ("+this.evaluateNodeToJavaScript(r.clauses[e].value)+") : ";t+=null!==r.else?this.evaluateNodeToJavaScript(r.else):"null",t+=" )"}else{t="( ";for(let n=0;n<r.clauses.length;n++)t+=" this.makeBool("+this.evaluateNodeToJavaScript(r.clauses[n].operand)+")===true ? ("+this.evaluateNodeToJavaScript(r.clauses[n].value)+") : ";t+=null!==r.else?this.evaluateNodeToJavaScript(r.else):"null",t+=" )"}return t}case"param":return"this.lookup("+JSON.stringify(r.value.toLowerCase())+",lookups)";case"expr_list":{let t="[";for(const n of r.value)"["!==t&&(t+=","),t+=this.evaluateNodeToJavaScript(n);return t+="]",t}case"unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(r.expr)+")";case"binary_expr":switch(r.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+" )";case"IS":if("null"!==r.right.type)throw new Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(r.left)+")";case"ISNOT":if("null"!==r.right.type)throw new Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(r.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(r.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(r.right)+"))";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(r.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(r.right)+")))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+","+JSON.stringify(r.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+","+JSON.stringify(r.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(r.operator)+","+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")";case"*":case"-":case"+":case"/":return"this.calculate("+JSON.stringify(r.operator)+","+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")"}throw new Error("Not Supported Operator "+r.operator);case"null":case"bool":case"string":case"number":return JSON.stringify(r.value);case"date":return"(new Date("+g(r.value).getTime().toString()+"))";case"timestamp":return"(new Date("+x(r.value).getTime().toString()+"))";case"current_time":return"date"===r.mode?"this.currentDate()":"this.currentTimestamp()";case"column_ref":return"this.featureValue(feature,"+JSON.stringify(r.column)+",datefields,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(r.name)+","+this.evaluateNodeToJavaScript(r.args)+")"}throw new Error("Unsupported sql syntax "+r.type)}evaluateNode(r,t,n){switch(r.type){case"interval":{const e=this.evaluateNode(r.value,t,n);return s.createFromValueAndQualifer(e,r.qualifier,r.op)}case"case_expression":if("simple"===r.format){const e=b(this.evaluateNode(r.operand,t,n));for(let a=0;a<r.clauses.length;a++)if(e===b(this.evaluateNode(r.clauses[a].operand,t,n)))return this.evaluateNode(r.clauses[a].value,t,n);if(null!==r.else)return this.evaluateNode(r.else,t,n)}else{for(let e=0;e<r.clauses.length;e++)if(N(this.evaluateNode(r.clauses[e].operand,t,n)))return this.evaluateNode(r.clauses[e].value,t,n);if(null!==r.else)return this.evaluateNode(r.else,t,n)}return null;case"param":return this.parameters[r.value.toLowerCase()];case"expr_list":{const e=[];for(const a of r.value)e.push(this.evaluateNode(a,t,n));return e}case"unary_expr":return T(this.evaluateNode(r.expr,t,n));case"binary_expr":switch(r.operator){case"AND":return F(this.evaluateNode(r.left,t,n),this.evaluateNode(r.right,t,n));case"OR":return A(this.evaluateNode(r.left,t,n),this.evaluateNode(r.right,t,n));case"IS":if("null"!==r.right.type)throw new Error("Unsupported RHS for IS");return null===this.evaluateNode(r.left,t,n);case"ISNOT":if("null"!==r.right.type)throw new Error("Unsupported RHS for IS");return null!==this.evaluateNode(r.left,t,n);case"IN":{const e=P(this.evaluateNode(r.right,t,n));return S(this.evaluateNode(r.left,t,n),e)}case"NOT IN":{const e=P(this.evaluateNode(r.right,t,n));return T(S(this.evaluateNode(r.left,t,n),e))}case"BETWEEN":{const e=this.evaluateNode(r.left,t,n),a=this.evaluateNode(r.right,t,n);return null==e||null==a[0]||null==a[1]?null:e>=b(a[0])&&e<=b(a[1])}case"NOTBETWEEN":{const e=this.evaluateNode(r.left,t,n),a=this.evaluateNode(r.right,t,n);return null==e||null==a[0]||null==a[1]?null:e<b(a[0])||e>b(a[1])}case"LIKE":return O(this.evaluateNode(r.left,t,n),this.evaluateNode(r.right,t,n),r.escape);case"NOT LIKE":return T(O(this.evaluateNode(r.left,t,n),this.evaluateNode(r.right,t,n),r.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return R(r.operator,this.evaluateNode(r.left,t,n),this.evaluateNode(r.right,t,n));case"-":case"+":case"*":case"/":return D(r.operator,this.evaluateNode(r.left,t,n),this.evaluateNode(r.right,t,n))}case"null":case"bool":case"string":case"number":return r.value;case"date":return g(r.value);case"timestamp":return x(r.value);case"current_time":{const t=new Date;return"date"===r.mode&&t.setHours(0,0,0,0),t}case"column_ref":return M(t,r.column,this.datefields,n);case"function":{const e=this.evaluateNode(r.args,t,n);return this.isAggregate?function(r,t){const n=a[r.toLowerCase()];if(null==n)throw new Error("Function Not Recognised");if(t.length<n.minParams||t.length>n.maxParams)throw new Error(`Invalid Parameter count for call to ${r.toUpperCase()}`);return n.evaluate(t)}(r.name,e):o(r.name,e)}}throw new Error("Unsupported sql syntax "+r.type)}}function x(r){let t=h.exec(r);if(null!==t){const[,r,n,e,a,u,i]=t;return y(r,n,e,a,u,i)}if(t=v.exec(r),null!==t){const[,r,n,e,a,u,i,s,o,l]=t;return y(r,n,e,a,u,i,s,o,l)}if(t=m.exec(r),null!==t){const[,r,n,e,a,u,i,s,o]=t;return y(r,n,e,a,u,"0",i,s,o)}if(t=d.exec(r),null!==t){const[,r,n,e,a,u]=t;return y(r,n,e,a,u)}if(t=p.exec(r),null!==t){const[,r,n,e]=t;return y(r,n,e)}throw new Error("SQL Invalid Timestamp")}function g(r){const t=p.exec(r);if(null===t)throw new Error("SQL Invalid Date");const[,n,e,a]=t;return new Date(parseInt(n,10),parseInt(e,10)-1,parseInt(a,10))}function N(r){return!0===r}function P(r){return Array.isArray(r)?r:[r]}function T(r){return null!==r?!0!==r:null}function F(r,t){return null!=r&&null!=t?!0===r&&!0===t:!1!==r&&!1!==t&&null}function A(r,t){return null!=r&&null!=t?!0===r||!0===t:!0===r||!0===t||null}function S(r,t){if(null==r)return null;let n=!1;for(const e of t)if(null==e)n=null;else if(r===e){n=!0;break}return n}function O(r,t,n){if(null==r)return null;const e=t,a=n;let u="";const i="-[]/{}()*+?.\\^$|";let s=0;for(let r=0;r<e.length;r++){const t=e.charAt(r);switch(s){case 0:t===a?s=1:i.indexOf(t)>=0?u+="\\"+t:u+="%"===t?".*":"_"===t?".":t;break;case 1:i.indexOf(t)>=0?u+="\\"+t:u+=t,s=0}}return new RegExp("^"+u+"$").test(r)}function b(r){return r instanceof Date?r.valueOf():r}function R(r,t,n){if(null==t||null==n)return null;const e=b(t),a=b(n);switch(r){case"<>":return e!==a;case"=":return e===a;case">":return e>a;case"<":return e<a;case">=":return e>=a;case"<=":return e<=a}}function _(r){const t=[],n={};for(const e of r){const r=e.toLowerCase();void 0===n[r]&&(t.push(e),n[r]=1)}return t}function D(r,t,n){if(t instanceof s)if(n instanceof Date)switch(r){case"+":return new Date(t.valueInMilliseconds()+n.getTime());case"-":return t.valueInMilliseconds()-n.getTime();case"*":return t.valueInMilliseconds()*n.getTime();case"/":return t.valueInMilliseconds()/n.getTime()}else if(n instanceof s)switch(r){case"+":return s.createFromMilliseconds(t.valueInMilliseconds()+n.valueInMilliseconds());case"-":return s.createFromMilliseconds(t.valueInMilliseconds()-n.valueInMilliseconds());case"*":return t.valueInMilliseconds()*n.valueInMilliseconds();case"/":return t.valueInMilliseconds()/n.valueInMilliseconds()}else t=t.valueInMilliseconds();else if(n instanceof s)if(t instanceof Date)switch(r){case"+":return new Date(n.valueInMilliseconds()+t.getTime());case"-":return new Date(t.getTime()-n.valueInMilliseconds());case"*":return t.getTime()*n.valueInMilliseconds();case"/":return t.getTime()/n.valueInMilliseconds()}else n=n.valueInMilliseconds();else if(t instanceof Date&&"number"==typeof n)switch(n=24*n*60*60*1e3,t=t.getTime(),r){case"+":return new Date(t+n);case"-":return new Date(t-n);case"*":return new Date(t*n);case"/":return new Date(t/n)}else if(n instanceof Date&&"number"==typeof t)switch(t=24*t*60*60*1e3,n=n.getTime(),r){case"+":return new Date(t+n);case"-":return new Date(t-n);case"*":return new Date(t*n);case"/":return new Date(t/n)}switch(r){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n}}function M(r,t,n,e){const a=e.getAttribute(r,t);return null!=a&&1===n[t]?new Date(a):a}const $={getAttribute(r,t){var n;return((n=r)&&"object"==typeof n.attributes?r.attributes:r)[t]}};export{I as WhereClause,$ as defaultAttributeAdapter}