{"version":3,"sources":["../node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Colorize.js"],"names":["r","constructor","this","_size","_programDesc","vsPath","fsPath","attributes","a_position","dispose","_layerFBOTexture","draw","e","t","_createOrResizeResources","context","s","state","i","painter","a","pixelRatio","o","size","n","materialManager","l","u","h","_quad","c","Math","round","d","colorMatrix","bind","p","bindFramebuffer","copyToTexture","setBlendingEnabled","setStencilTestEnabled","_","getProgram","bindProgram","bindTexture","setUniformMatrix4fv","setUniform1i","setBlendFunction","unbind","resize","target","pixelFormat","internalFormat","dataType","wrapMode","samplingMode","flipped","width","height"],"mappings":"0GAAA,kGAI0Q,MAAMA,EAAEC,cAAcC,KAAKC,MAAM,CAAC,EAAE,GAAGD,KAAKE,aAAa,CAACC,OAAO,qBAAqBC,OAAO,+BAA+BC,WAAW,CAACC,WAAW,IAAIC,UAAUP,KAAKQ,mBAAmBR,KAAKQ,iBAAiBD,UAAUP,KAAKQ,iBAAiB,MAAMC,KAAKC,EAAEC,EAAEb,GAAGE,KAAKY,yBAAyBF,GAAG,MAAMG,QAAQC,EAAEC,MAAMC,EAAEC,QAAQC,EAAEC,WAAWC,GAAGV,GAAGW,KAAKC,GAAGN,GAAGO,gBAAgBC,GAAGN,EAAEO,EAAEzB,KAAKE,aAAawB,EAAE1B,KAAK2B,MAAMC,EAAE,CAACC,KAAKC,MAAMV,EAAEE,EAAE,IAAIO,KAAKC,MAAMV,EAAEE,EAAE,KAAKS,EAAEjC,EAAEkC,YAAYN,EAAEO,OAAO,MAAMC,EAAElC,KAAKQ,iBAAiBM,EAAEqB,gBAAgBxB,GAAGA,EAAEyB,cAAc,EAAE,EAAER,EAAE,GAAGA,EAAE,GAAG,EAAE,EAAEM,GAAGpB,EAAEuB,oBAAmB,GAAIvB,EAAEwB,uBAAsB,GAAI,MAAMC,EAAEf,EAAEgB,WAAW9B,EAAEe,GAAGX,EAAE2B,YAAYF,GAAGzB,EAAE4B,YAAYR,EAAE,GAAGK,EAAEI,oBAAoB,iBAAiBZ,GAAGQ,EAAEK,aAAa,iBAAiB,GAAGlB,EAAEjB,OAAOK,EAAEuB,oBAAmB,GAAIvB,EAAE+B,iBAAiB,EAAE,KAAK/B,EAAEwB,uBAAsB,GAAIZ,EAAEoB,SAASlC,yBAAyBd,GAAG,MAAMe,QAAQC,EAAEC,MAAMC,EAAEG,WAAWD,GAAGpB,GAAGuB,KAAKD,GAAGJ,EAAEM,EAAEO,KAAKC,MAAMZ,EAAEE,EAAE,IAAII,EAAEK,KAAKC,MAAMZ,EAAEE,EAAE,IAAIpB,KAAKQ,kBAAkBR,KAAKC,MAAM,KAAKqB,GAAGtB,KAAKC,MAAM,KAAKuB,IAAIxB,KAAKC,MAAM,GAAGqB,EAAEtB,KAAKC,MAAM,GAAGuB,EAAExB,KAAKQ,iBAAiBR,KAAKQ,iBAAiBuC,OAAOzB,EAAEE,GAAGxB,KAAKQ,iBAAiB,IAAIE,IAAEI,EAAE,CAACkC,OAAO,KAAKC,YAAY,KAAKC,eAAe,KAAKC,SAAS,KAAKC,SAAS,MAAMC,aAAa,KAAKC,SAAQ,EAAGC,MAAMjC,EAAEkC,OAAOhC,IAAIxB,KAAK2B,QAAQ3B,KAAK2B,MAAM,IAAIhB,IAAEG,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE","file":"static/js/157.2e643ccf.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport\"../../../../../../core/has.js\";import\"../../../../../../chunks/builtins.js\";import e from\"../../../../../webgl/Texture.js\";import\"../../../../../webgl/FramebufferObject.js\";import\"../../../../../webgl/RenderingContext.js\";import t from\"../../VertexStream.js\";class r{constructor(){this._size=[0,0],this._programDesc={vsPath:\"post-processing/pp\",fsPath:\"post-processing/filterEffect\",attributes:{a_position:0}}}dispose(){this._layerFBOTexture&&(this._layerFBOTexture.dispose(),this._layerFBOTexture=null)}draw(e,t,r){this._createOrResizeResources(e);const{context:s,state:i,painter:a,pixelRatio:o}=e,{size:n}=i,{materialManager:l}=a,u=this._programDesc,h=this._quad,c=[Math.round(o*n[0]),Math.round(o*n[1])],d=r.colorMatrix;h.bind();const p=this._layerFBOTexture;s.bindFramebuffer(t),t.copyToTexture(0,0,c[0],c[1],0,0,p),s.setBlendingEnabled(!1),s.setStencilTestEnabled(!1);const _=l.getProgram(e,u);s.bindProgram(_),s.bindTexture(p,2),_.setUniformMatrix4fv(\"u_coefficients\",d),_.setUniform1i(\"u_colorTexture\",2),h.draw(),s.setBlendingEnabled(!0),s.setBlendFunction(1,771),s.setStencilTestEnabled(!0),h.unbind()}_createOrResizeResources(r){const{context:s,state:i,pixelRatio:a}=r,{size:o}=i,n=Math.round(a*o[0]),l=Math.round(a*o[1]);this._layerFBOTexture&&this._size[0]===n&&this._size[1]===l||(this._size[0]=n,this._size[1]=l,this._layerFBOTexture?this._layerFBOTexture.resize(n,l):this._layerFBOTexture=new e(s,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:n,height:l}),this._quad||(this._quad=new t(s,[-1,-1,1,-1,-1,1,1,1])))}}export{r as Colorize};\n"],"sourceRoot":""}