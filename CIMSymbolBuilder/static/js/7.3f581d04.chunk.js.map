{"version":3,"sources":["../node_modules/@arcgis/core/portal/support/resourceUtils.js"],"names":["async","u","t","r","a","load","s","o","itemUrl","start","n","num","sortOrder","c","sortField","i","l","query","signal","e","p","portal","_request","total","nextStart","resources","map","created","size","resource","Date","resourceFromPath","hasPath","portalItem","userItemUrl","path","m","d","h","FormData","append","access","method","body","deleteAll","lastIndexOf","slice","length","Blob","url","responseType","data","f"],"mappings":"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","file":"static/js/7.3f581d04.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{get as e,isSome as t,isNone as r}from\"../../core/maybe.js\";import a from\"../../core/Error.js\";import{join as o,getPathExtension as s}from\"../../core/urlUtils.js\";import n from\"../../request.js\";async function u(t,r={},a){await t.load(a);const s=o(t.itemUrl,\"resources\"),{start:n=1,num:u=10,sortOrder:c=\"asc\",sortField:i=\"created\"}=r,l={query:{start:n,num:u,sortOrder:c,sortField:i},signal:e(a,\"signal\")},p=await t.portal._request(s,l);return{total:p.total,nextStart:p.nextStart,resources:p.resources.map((({created:e,size:r,resource:a})=>({created:new Date(e),size:r,resource:t.resourceFromPath(a)})))}}async function c(r,s,n,u){if(!r.hasPath())throw new a(`portal-item-resource-${s}:invalid-path`,\"Resource does not have a valid path\");await r.portalItem.load(u);const c=o(r.portalItem.userItemUrl,\"add\"===s?\"addResources\":\"updateResources\"),[i,l]=p(r.path),m=await d(n),h=new FormData;return i&&\".\"!==i&&h.append(\"resourcesPrefix\",i),h.append(\"fileName\",l),h.append(\"file\",m,l),h.append(\"f\",\"json\"),t(u)&&u.access&&h.append(\"access\",u.access),await r.portalItem.portal._request(c,{method:\"post\",body:h,signal:e(u,\"signal\")}),r}async function i(t,r,s){if(!r.hasPath())throw new a(\"portal-item-resources-remove:invalid-path\",\"Resource does not have a valid path\");await t.load(s);const n=o(t.userItemUrl,\"removeResources\");await t.portal._request(n,{method:\"post\",query:{resource:r.path},signal:e(s,\"signal\")}),r.portalItem=null}async function l(t,r){await t.load(r);const a=o(t.userItemUrl,\"removeResources\");return t.portal._request(a,{method:\"post\",query:{deleteAll:!0},signal:e(r,\"signal\")})}function p(e){const t=e.lastIndexOf(\"/\");return-1===t?[\".\",e]:[e.slice(0,t),e.slice(t+1)]}function m(e){const[t,a]=function(e){const t=s(e);if(r(t))return[e,\"\"];return[e.slice(0,e.length-t.length-1),\".\"+t]}(e),[o,n]=p(t);return[o,n,a]}async function d(e){if(e instanceof Blob)return e;return(await n(e.url,{responseType:\"blob\"})).data}function h(e,t){if(!e.hasPath())return null;const[r,,a]=m(e.path);return e.portalItem.resourceFromPath(o(r,t+a))}function f(e,t){if(!e.hasPath())return null;const[r,,a]=m(e.path);return e.portalItem.resourceFromPath(o(r,t+a))}export{c as addOrUpdateResource,d as contentToBlob,u as fetchResources,h as getSiblingOfSameType,f as getSiblingOfSameTypeI,l as removeAllResources,i as removeResource,m as splitPrefixFileNameAndExtension};\n"],"sourceRoot":""}