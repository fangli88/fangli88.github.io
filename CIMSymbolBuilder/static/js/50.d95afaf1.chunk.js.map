{"version":3,"sources":["../node_modules/@arcgis/core/views/layers/LayerView.js","../node_modules/@arcgis/core/views/layers/support/ClipArea.js","../node_modules/@arcgis/core/views/layers/support/ClipRect.js","../node_modules/@arcgis/core/views/layers/support/Geometry.js","../node_modules/@arcgis/core/views/layers/support/Path.js","../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","../node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js","../node_modules/@arcgis/core/views/2d/engine/Bitmap.js","../node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js","../node_modules/@arcgis/core/views/2d/viewStateUtils.js","../node_modules/@arcgis/core/views/2d/layers/support/ExportStrategy.js","../node_modules/@arcgis/core/layers/support/wmsUtils.js","../node_modules/@arcgis/core/layers/support/ExportWMSImageParameters.js","../node_modules/@arcgis/core/views/layers/WMSLayerView.js","../node_modules/@arcgis/core/views/2d/layers/WMSLayerView2D.js"],"names":["d","a","o","l","n","EventedMixin","i","constructor","e","super","this","layer","parent","initialize","when","catch","name","r","id","s","title","t","getLogger","declaredClass","error","get","canResume","getSuspendInfo","suspended","legendEnabled","updatingHandles","updating","isUpdating","_override","_clearOverride","visible","suspendInfo","view","ready","viewNotReady","loaded","layerNotLoaded","layerInvisible","dependsOn","prototype","readOnly","type","Boolean","p","arguments","left","right","top","bottom","clone","_get","Number","String","json","write","y","base","key","typeMap","extent","polygon","c","geometry","types","read","m","path","ofType","rect","h","clips","moving","attached","lastUpdateId","updateRequested","container","fadeTransitionEnabled","opacity","handles","add","requestUpdate","blendMode","effect","on","notifyChange","whenLayerView","then","destroyed","attach","destroy","detach","remove","isVisibleAtScale","minScale","maxScale","processUpdate","isFulfilled","isResolved","_set","update","isRendering","scale","set","pixelBlock","originalPixelBlock","width","height","render","filter","getAsRGBA","createImageData","data","putImageData","getRenderedRasterPixels","renderedRasterPixels","Uint8Array","buffer","target","pixelFormat","internalFormat","dataType","wrapMode","u","requestRenderOnSourceChangedEnabled","_textureInvalidated","stencilRef","coordScale","_height","pixelRatio","resolution","rotation","_source","_width","x","transforms","dvs","source","requestRender","bind","sourceWidth","sourceHeight","invalidateTexture","HTMLImageElement","naturalHeight","naturalWidth","beforeRender","updateTexture","setTransform","toScreenNoRotation","Math","PI","displayViewMat3","setSamplingProfile","_texture","mips","descriptor","hasMipmap","generateMipmap","setSamplingMode","samplingMode","context","bindTexture","stage","dispose","resize","setData","document","createElement","getContext","onAttach","onDetach","prepareRenderPasses","registerRenderPass","brushes","bitmap","children","drawPhase","MAP","f","M","_imagePromise","hidpi","imageMaxWidth","imageMaxHeight","imageRotationSupported","imageNormalizationSupported","async","state","spatialReference","stationary","size","abs","cos","sin","round","floor","xmin","valid","xmax","_singleExport","min","worldScreenWidth","_tiledExport","Promise","all","map","addChild","fadeIn","includes","fadeOut","removeChild","updateExports","console","_export","fetchSource","signal","g","ymax","center","create","scales","getTileCoverage","forEach","getTileBounds","push","w","84","83","27","idCounter","DOMParser","parseFromString","documentElement","nodeName","Array","slice","call","childNodes","textContent","join","getAttribute","N","b","parseInt","A","E","I","L","O","F","sublayers","v","fullExtents","length","toJSON","spatialReferences","C","T","indexOf","queryable","R","concat","V","_","U","dimensions","q","reduce","B","S","D","POSITIVE_INFINITY","NEGATIVE_INFINITY","isArray","Date","getTime","max","startTimeField","endTimeField","trackIdField","timeExtent","copyright","description","featureInfoFormat","featureInfoUrl","mapUrl","maxWidth","maxHeight","layers","supportedImageFormatTypes","timeInfo","version","some","popupEnabled","parseFloat","isNaN","MAX_VALUE","wkid","ymin","substring","query","hasOwnProperty","toLowerCase","parentLayerId","split","legendURL","test","units","default","multipleValues","nearestValue","current","unitSymbol","nodeType","Node","ELEMENT_NODE","match","years","months","days","hours","minutes","seconds","replace","toISOString","_layerHandles","_scale","removeAll","propertyName","visibleSublayers","unshift","latestWkid","imageFormat","imageTransparency","bbox","format","request","service","styles","transparent","crs","srs","autoTracked","createFetchPopupFeaturesQuery","fetchFeatureInfo","supportsSpatialReference","addResolvingPromise","hitTest","strategy","_bitmapContainer","fetchImage","_exportWMSImageParameters","watch","_exportImageVersion","removeAllChildren","moveStart","viewChange","moveEnd","timestamp","refreshTimestamp"],"mappings":"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","file":"static/js/50.d95afaf1.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import t from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import n from\"../../core/Evented.js\";import{IdentifiableMixin as o}from\"../../core/Identifiable.js\";import{EsriPromiseMixin as l}from\"../../core/Promise.js\";import{HandleOwnerMixin as a}from\"../../core/HandleOwner.js\";let d=class extends(a(o(l(n.EventedMixin(i))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const r=this.layer&&this.layer.id||\"no id\",s=this.layer&&this.layer.title||\"no title\";throw t.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${s}', id: '${r}')`,e),e}}))}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get(\"layer.opacity\"))*e(this.get(\"parent.fullOpacity\"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([r({dependsOn:[\"layer.opacity\",\"parent.fullOpacity\"]})],d.prototype,\"fullOpacity\",null),e([r()],d.prototype,\"layer\",void 0),e([r()],d.prototype,\"parent\",void 0),e([r({readOnly:!0,dependsOn:[\"visible\",\"layer.loaded\",\"parent.suspended\",\"view?.ready\"]})],d.prototype,\"suspended\",null),e([r({readOnly:!0,dependsOn:[\"visible\",\"layer.loaded\",\"parent.suspended\",\"view?.ready\"]})],d.prototype,\"suspendInfo\",null),e([r({readOnly:!0,dependsOn:[\"suspended\",\"layer.legendEnabled?\"]})],d.prototype,\"legendEnabled\",null),e([r({type:Boolean,dependsOn:[\"updatingHandles.updating\"],readOnly:!0})],d.prototype,\"updating\",null),e([r({dependsOn:[\"layer.visible\"]})],d.prototype,\"visible\",null),d=e([s(\"esri.views.layers.LayerView\")],d);var p=d;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import e from\"./ClipArea.js\";var s;let p=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],p.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],p.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],p.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],p.prototype,\"bottom\",void 0),t([r({readOnly:!0,dependsOn:[\"left\",\"right\",\"top\",\"bottom\"]})],p.prototype,\"version\",null),p=s=t([o(\"esri.views.layers.support.ClipRect\")],p);var i=p;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"../../../geometry/Geometry.js\";import s from\"../../../geometry/Extent.js\";import p from\"../../../geometry/Polygon.js\";import{fromJSON as m}from\"../../../geometry/support/jsonUtils.js\";import\"../../../geometry.js\";import i from\"./ClipArea.js\";var n;const y={base:t,key:\"type\",typeMap:{extent:s,polygon:p}};let c=n=class extends i{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new n({geometry:this.geometry.clone()})}};r([e({types:y,json:{read:m,write:!0}})],c.prototype,\"geometry\",void 0),r([e({readOnly:!0,dependsOn:[\"geometry\"]})],c.prototype,\"version\",null),c=n=r([o(\"esri.views.layers.support.Geometry\")],c);var l=c;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import e from\"./ClipArea.js\";let t=class extends e{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],t.prototype,\"path\",void 0),r([o({readOnly:!0,dependsOn:[\"path\"]})],t.prototype,\"version\",null),t=r([s(\"esri.views.layers.support.Path\")],t);var p=t;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import i from\"../../../core/Collection.js\";import{referenceSetter as r}from\"../../../core/collectionUtils.js\";import{init as a}from\"../../../core/watchUtils.js\";import o from\"../../layers/support/ClipArea.js\";import p from\"../../layers/support/ClipRect.js\";import{Container as n}from\"../engine/Container.js\";import h from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=i.ofType({key:\"type\",base:o,typeMap:{rect:p,path:d,geometry:h}}),l=i=>{let o=class extends i{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var e;this.container||(this.container=new n),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([a(this,\"suspended\",(e=>{this.container&&(this.container.visible=!e),this.view&&!e&&this.updateRequested&&this.view.requestUpdate()}),!0),a(this,[\"layer.opacity\",\"container\"],(()=>{var e,t;this.container&&(this.container.opacity=null!=(e=null==(t=this.layer)?void 0:t.opacity)?e:1)}),!0),a(this,[\"layer.blendMode\"],(e=>{this.container&&(this.container.blendMode=e)}),!0),a(this,[\"layer.effect\"],(e=>{this.container&&(this.container.effect=e)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),(null==(e=this.view)?void 0:e.whenLayerView)?this.view.whenLayerView(this.layer).then((e=>{e!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(e){let t=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,a=!r;!s&&e<=i&&(s=!0),!a&&e>=r&&(a=!0),t=s&&a}return t}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(e){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return e([t({type:c,set(e){const t=r(e,this._get(\"clips\"),c);this._set(\"clips\",t)}})],o.prototype,\"clips\",void 0),e([t()],o.prototype,\"moving\",void 0),e([t()],o.prototype,\"attached\",void 0),e([t()],o.prototype,\"container\",void 0),e([t({dependsOn:[\"view.scale\",\"layer.minScale\",\"layer.maxScale\"]})],o.prototype,\"suspended\",void 0),e([t({readOnly:!0})],o.prototype,\"updateParameters\",void 0),e([t()],o.prototype,\"updateRequested\",void 0),e([t({dependsOn:[\"attached\",\"updateRequested\",\"suspended\"]})],o.prototype,\"updating\",null),e([t()],o.prototype,\"view\",void 0),o=e([s(\"esri.views.2d.layers.LayerView2D\")],o),o};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nexport default class{constructor(e,t,i){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=i}get width(){return this.pixelBlock?this.pixelBlock.width:0}get height(){return this.pixelBlock?this.pixelBlock.height:0}render(e){const t=this.pixelBlock;if(!t)return;const i=this.filter({pixelBlock:t}),l=i.pixelBlock.getAsRGBA(),h=e.createImageData(i.pixelBlock.width,i.pixelBlock.height);h.data.set(l),e.putImageData(h,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport\"../../../core/has.js\";import{i as t,a as e,r as i,j as s,m as r}from\"../../../chunks/mat3.js\";import{c as h}from\"../../../chunks/mat3f32.js\";import{f as n}from\"../../../chunks/vec2f32.js\";import\"../../../chunks/builtins.js\";import o from\"../../webgl/Texture.js\";import\"../../webgl/FramebufferObject.js\";import\"../../webgl/RenderingContext.js\";import{DisplayObject as u}from\"./DisplayObject.js\";import a from\"./ImageryBitmapSource.js\";function d(t,e,i){const s={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return e&&i&&(s.width=e,s.height=i),new o(t,s)}class c extends u{constructor(t=null,e=!0){super(),this.requestRenderOnSourceChangedEnabled=e,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.transforms={dvs:h()},this.source=t,this.requestRender=this.requestRender.bind(this)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){this._source=t,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}setTransform(h){const o=t(this.transforms.dvs),[u,a]=h.toScreenNoRotation([0,0],this.x,this.y),d=this.resolution/this.pixelRatio/h.resolution,c=d*this.width,l=d*this.height,x=Math.PI*this.rotation/180;e(o,o,n(u,a)),e(o,o,n(c/2,l/2)),i(o,o,-x),e(o,o,n(-c/2,-l/2)),s(o,o,n(c,l)),r(this.transforms.dvs,h.displayViewMat3,o)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind({context:t},e){this._texture&&t.bindTexture(this._texture,e)}updateTexture({context:t}){var e;if(!this.stage)return null==(e=this._texture)||e.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this.source?this._texture=d(t,this.sourceWidth,this.sourceHeight):this._texture=d(t));const i=this.source;if(i){if(this._texture.resize(this.sourceWidth,this.sourceHeight),function(t){return t&&\"render\"in t}(i))if(i instanceof a){const t=i.getRenderedRasterPixels();this._texture.setData(t.renderedRasterPixels)}else this._texture.setData(function(t){const e=document.createElement(\"canvas\");return e.width=t.width,e.height=t.height,t.render(e.getContext(\"2d\")),e}(i));else(function(t){return t&&!(\"render\"in t)})(i)&&this._texture.setData(i);this.ready()}else this._texture.setData(null)}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}export{c as Bitmap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{WGLDrawPhase as e}from\"./webgl/enums.js\";import{brushes as r}from\"./brushes.js\";import s from\"./webgl/WGLContainer.js\";class t extends s{prepareRenderPasses(s){const t=s.registerRenderPass({name:\"bitmap\",brushes:[r.bitmap],target:()=>this.children,drawPhase:e.MAP});return[...super.prepareRenderPasses(s),t]}}export{t as BitmapContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst t=Math.PI/180;function n(t,n,o){const{resolution:r,size:s}=o;return t[0]=r*(Math.round(n[0]/r)+s[0]%2*.5),t[1]=r*(Math.round(n[1]/r)+s[1]%2*.5),t}function o(n,o){const r=o.rotation*t;const s=Math.abs(Math.cos(r)),u=Math.abs(Math.sin(r)),[a,c]=o.size;return n[0]=Math.round(c*u+a*s),n[1]=Math.round(c*s+a*u),n}function r(t,n,o,r){const[s,u]=n,[a,c]=r,h=.5*o;return t[0]=s-h*a,t[1]=u-h*c,t[2]=s+h*a,t[3]=u+h*c,t}function s(t,n){const[o,r,s,u]=t,[a,c,h,i]=n;return!(o>h||s<a||r>i||u<c)}export{s as bboxIntersects,r as getBBox,o as getOuterSize,n as snapToPixel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{debounce as i,resolve as r,all as s}from\"../../../../core/promiseUtils.js\";import a from\"../../../../core/Accessor.js\";import{getInfo as p}from\"../../../../geometry/support/spatialReferenceUtils.js\";import n from\"../../../../geometry/Extent.js\";import{create as m}from\"../../../../geometry/support/aaBoundingRect.js\";import l from\"../../../../layers/support/TileInfo.js\";import h from\"../../tiling/TileKey.js\";import c from\"../../tiling/TileInfoView.js\";import{getOuterSize as d,getBBox as u}from\"../../viewStateUtils.js\";import{Bitmap as g}from\"../../engine/Bitmap.js\";const f=m(),x=[0,0],y=new h(0,0,0,0),j=2048,v=2048,_=!1,S=!1,R=!1;let M=class extends a{constructor(t){super(t),this._imagePromise=null,this.hidpi=R,this.imageMaxWidth=j,this.imageMaxHeight=v,this.imageRotationSupported=_,this.imageNormalizationSupported=S,this.update=i((async(t,e)=>{const o=t.state,i=p(o.spatialReference),r=this.hidpi?t.pixelRatio:1;if(!t.stationary||this.destroyed)return;this.imageRotationSupported?(x[0]=o.size[0],x[1]=o.size[1]):d(x,o);const s=Math.floor(x[0]*r)>this.imageMaxWidth||Math.floor(x[1]*r)>this.imageMaxHeight,a=i&&(o.extent.xmin<i.valid[0]||o.extent.xmax>i.valid[1]),n=!this.imageNormalizationSupported&&a,m=!s&&!n,l=this.imageRotationSupported?o.rotation:0;if(m)this._imagePromise=this._singleExport(o,x,l,r,e);else{let t=Math.min(this.imageMaxWidth,this.imageMaxHeight);n&&(t=Math.min(o.worldScreenWidth,t)),this._imagePromise=this._tiledExport(o,t,l,r,e)}return this._imagePromise.then((async t=>{this._imagePromise=null,await Promise.all(t.map((t=>(this.container.addChild(t),t.fadeIn()))));for(const e of this.container.children)t.includes(e)||e.fadeOut().then((()=>{this.container.removeChild(e)}))})).catch((t=>{throw this._imagePromise=null,t}))}),5e3)}destroy(){}get updating(){return null!==this._imagePromise}updateExports(t){for(const e of this.container.children){if(!e.visible||!e.stage)return;t(e)?console.error(\"ExportStrategy.updateExports doesn't support promise yet\"):(e.invalidateTexture(),e.requestRender())}}_export(t,e,o,i,s,a){return r().then((()=>this.fetchSource(t,Math.floor(e*s),Math.floor(o*s),{rotation:i,pixelRatio:s,signal:a}))).then((o=>{const r=new g(o);return r.x=t.xmin,r.y=t.ymax,r.resolution=t.width/e,r.rotation=i,r.pixelRatio=s,r}))}_singleExport(t,e,o,i,r){u(f,t.center,t.resolution,e);const s=new n(f[0],f[1],f[2],f[3],t.spatialReference);return this._export(s,e[0],e[1],o,i,r).then((t=>[t]))}_tiledExport(t,e,o,i,r){const a=l.create({size:e,spatialReference:t.spatialReference,scales:[t.scale]}),p=new c(a),m=p.getTileCoverage(t);if(!m)return null;const h=[];return m.forEach(((s,a,m,l)=>{y.set(s,a,m,l),p.getTileBounds(f,y);const c=new n(f[0],f[1],f[2],f[3],t.spatialReference);h.push(this._export(c,e,e,o,i,r))})),s(h)}};t([e()],M.prototype,\"_imagePromise\",void 0),t([e()],M.prototype,\"container\",void 0),t([e()],M.prototype,\"fetchSource\",void 0),t([e()],M.prototype,\"hidpi\",void 0),t([e()],M.prototype,\"imageMaxWidth\",void 0),t([e()],M.prototype,\"imageMaxHeight\",void 0),t([e()],M.prototype,\"imageRotationSupported\",void 0),t([e()],M.prototype,\"imageNormalizationSupported\",void 0),t([e()],M.prototype,\"requestUpdate\",void 0),t([e({dependsOn:[\"_imagePromise\"]})],M.prototype,\"updating\",null),M=t([o(\"esri.views.2d.layers.support.ExportStrategy\")],M);var w=M;export default w;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{urlToObject as t}from\"../../core/urlUtils.js\";import n from\"../../geometry/SpatialReference.js\";import r from\"../../geometry/Extent.js\";const i=[[4001,4999],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],a={84:4326,83:4269,27:4267};function s(t){if(!t)return null;const n={idCounter:-1};if(\"string\"==typeof t){t=(new DOMParser).parseFromString(t,\"text/xml\")}const i=t.documentElement;if(\"ServiceExceptionReport\"===i.nodeName){const t=Array.prototype.slice.call(i.childNodes).map((e=>e.textContent)).join(\"\\r\\n\");throw new e(\"wmslayer:wms-capabilities-xml-is-not-valid\",\"The server returned errors when the WMS capabilities were requested.\",t)}const a=m(\"Capability\",i),s=m(\"Service\",i),o=m(\"Request\",a);if(!a||!s||!o)return null;const l=m(\"Layer\",a);if(!l)return null;const c=\"WMS_Capabilities\"===i.nodeName||\"WMT_MS_Capabilities\"===i.nodeName?i.getAttribute(\"version\"):\"1.3.0\",f=d(\"Title\",s,\"\")||d(\"Name\",s,\"\"),p=d(\"AccessConstraints\",s,\"\"),N=d(\"Abstract\",s,\"\"),b=parseInt(d(\"MaxWidth\",s,\"5000\"),10),y=parseInt(d(\"MaxHeight\",s,\"5000\"),10),A=x(o,\"GetMap\"),E=h(o,\"GetMap\"),I=g(l,c,n);let L,F=0;if(Array.prototype.slice.call(a.childNodes).forEach((e=>{\"Layer\"===e.nodeName&&(0===F?L=e:1===F?(I.name&&(I.name=\"\",I.sublayers.push(g(L,c,n))),I.sublayers.push(g(e,c,n))):I.sublayers.push(g(e,c,n)),F++)})),!I)return null;let M,O,w;const v=I.fullExtents;if(M=I.sublayers,M||(M=[]),0===M.length&&M.push(I),O=I.extent,!O){const e=new r(M[0].extent);I.extent=e.toJSON(),O=I.extent}if(w=I.spatialReferences,!w.length&&M.length>0){const e=t=>{let n=[];return t.sublayers.forEach((t=>{!n.length&&t.spatialReferences.length&&(n=t.spatialReferences||e(t))})),n};M.forEach((t=>{w.length||(w=t.spatialReferences||e(t))}))}const C=h(o,\"GetFeatureInfo\");let T;if(C){const e=x(o,\"GetFeatureInfo\");e.indexOf(\"text/html\")>-1?T=\"text/html\":e.indexOf(\"text/plain\")>-1&&(T=\"text/plain\")}if(!T){const e=function(t){t&&(t.queryable=!1,t.sublayers&&t.sublayers.forEach((t=>{e(t)})))};e(I)}const R=u(M),V=I.minScale||0,_=I.maxScale||0,U=I.dimensions,q=R.reduce(((e,t)=>e.concat(t.dimensions)),[]),B=U.concat(q).filter(S);let D=null;if(B.length>0){let e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY;B.forEach((n=>{const{extent:r}=n;var i;i=r,Array.isArray(i)&&i.length>0&&i[0]instanceof Date?r.forEach((n=>{e=Math.min(e,n.getTime()),t=Math.max(t,n.getTime())})):r.forEach((n=>{e=Math.min(e,n.min.getTime()),t=Math.max(t,n.max.getTime())}))})),D={startTimeField:null,endTimeField:null,trackIdField:null,timeExtent:[e,t]}}return{copyright:p,description:N,dimensions:U,extent:O,fullExtents:v,featureInfoFormat:T,featureInfoUrl:C,mapUrl:E,maxWidth:b,maxHeight:y,maxScale:_,minScale:V,layers:R,spatialReferences:w,supportedImageFormatTypes:A,timeInfo:D,title:f,version:c}}function o(e){return i.some((t=>{const n=t[0],r=t[1];return e>=n&&e<=r}))}function l(e){return e.length?e.filter((e=>e.popupEnabled&&e.name&&e.queryable)).map((e=>e.name)).join(\",\"):\"\"}function u(e){let t=[];return e.forEach((e=>{t.push(e),e.sublayers&&e.sublayers.length&&(t=t.concat(u(e.sublayers)),delete e.sublayers)})),t}function c(e,t,n){var r;return null!=(r=t.getAttribute(e))?r:n}function m(e,t){for(let n=0;n<t.childNodes.length;n++){const r=t.childNodes[n];if(b(r)&&r.nodeName===e)return r}return null}function f(e,t){const n=[];for(let r=0;r<t.childNodes.length;r++){const i=t.childNodes[r];b(i)&&i.nodeName===e&&n.push(i)}return n}function d(e,t,n){const r=m(e,t);return r?r.textContent:n}function p(e,t,i){if(!e)return null;const a=parseFloat(e.getAttribute(\"minx\")),s=parseFloat(e.getAttribute(\"miny\")),o=parseFloat(e.getAttribute(\"maxx\")),l=parseFloat(e.getAttribute(\"maxy\"));let u,c,m,f;i?(u=isNaN(s)?-Number.MAX_VALUE:s,c=isNaN(a)?-Number.MAX_VALUE:a,m=isNaN(l)?Number.MAX_VALUE:l,f=isNaN(o)?Number.MAX_VALUE:o):(u=isNaN(a)?-Number.MAX_VALUE:a,c=isNaN(s)?-Number.MAX_VALUE:s,m=isNaN(o)?Number.MAX_VALUE:o,f=isNaN(l)?Number.MAX_VALUE:l);const d=new n({wkid:t});return new r({xmin:u,ymin:c,xmax:m,ymax:f,spatialReference:d})}function h(e,n){const r=m(n,e);if(r){const e=m(\"DCPType\",r);if(e){const n=m(\"HTTP\",e);if(n){const e=m(\"Get\",n);if(e){let n=function(e,t,n,r){const i=m(e,n);return i?c(t,i,r):r}(\"OnlineResource\",\"xlink:href\",e,null);if(n)return n.indexOf(\"&\")===n.length-1&&(n=n.substring(0,n.length-1)),function(e,n){const r=[],i=t(e);for(const e in i.query)i.query.hasOwnProperty(e)&&-1===n.indexOf(e.toLowerCase())&&r.push(e+\"=\"+i.query[e]);return i.path+(r.length?\"?\"+r.join(\"&\"):\"\")}(n,[\"service\",\"request\"])}}}}return null}function x(e,t){const n=f(\"Operation\",e);if(0===n.length){return f(\"Format\",m(t,e)).map((e=>e.textContent))}const r=[];return n.forEach((e=>{if(e.getAttribute(\"name\")===t){f(\"Format\",e).forEach((e=>{r.push(e.textContent)}))}})),r}function N(e,t,n){const r=m(t,e);if(!r)return n;const{textContent:i}=r;if(null==i||\"\"===i)return n;const a=Number(i);return isNaN(a)?n:a}function g(e,t,i){var s;if(!e)return null;const l={id:i.idCounter++,fullExtents:[],parentLayerId:null,queryable:\"1\"===e.getAttribute(\"queryable\"),spatialReferences:[],sublayers:null},u=m(\"LatLonBoundingBox\",e),h=m(\"EX_GeographicBoundingBox\",e);let x=null;u&&(x=p(u,4326)),h&&(x=new r(0,0,0,0,new n({wkid:4326})),x.xmin=parseFloat(d(\"westBoundLongitude\",h,\"0\")),x.ymin=parseFloat(d(\"southBoundLatitude\",h,\"0\")),x.xmax=parseFloat(d(\"eastBoundLongitude\",h,\"0\")),x.ymax=parseFloat(d(\"northBoundLatitude\",h,\"0\"))),u||h||(x=new r(-180,-90,180,90,new n({wkid:4326}))),l.minScale=N(e,\"MaxScaleDenominator\",0),l.maxScale=N(e,\"MinScaleDenominator\",0);const b=[\"1.0.0\",\"1.1.0\",\"1.1.1\"].indexOf(t)>-1?\"SRS\":\"CRS\";return Array.prototype.slice.call(e.childNodes).forEach((e=>{if(\"Name\"===e.nodeName)l.name=e.textContent||\"\";else if(\"Title\"===e.nodeName)l.title=e.textContent||\"\";else if(\"Abstract\"===e.nodeName)l.description=e.textContent||\"\";else if(\"BoundingBox\"===e.nodeName){const n=e.getAttribute(b);if(n&&0===n.indexOf(\"EPSG:\")){const r=parseInt(n.substring(5),10);0===r||isNaN(r)||x||(x=\"1.3.0\"===t?p(e,r,o(r)):p(e,r))}const r=n&&n.indexOf(\":\");if(r&&r>-1){let i=parseInt(n.substring(r+1,n.length),10);0===i||isNaN(i)||(i=a[i]?a[i]:i);const s=\"1.3.0\"===t?p(e,i,o(i)):p(e,i);l.fullExtents.push(s)}}else if(e.nodeName===b){e.textContent.split(\" \").forEach((e=>{0===(e=e.indexOf(\":\")>-1?parseInt(e.split(\":\")[1],10):parseInt(e,10))||isNaN(e)||(a[e]&&(e=a[e]),-1===l.spatialReferences.indexOf(e)&&l.spatialReferences.push(e))}))}else if(\"Style\"!==e.nodeName||l.legendURL){if(\"Layer\"===e.nodeName){const n=g(e,t,i);n&&(n.parentLayerId=l.id,l.sublayers||(l.sublayers=[]),l.sublayers.push(n))}}else{const t=m(\"LegendURL\",e);if(t){const e=m(\"OnlineResource\",t);e&&(l.legendURL=e.getAttribute(\"xlink:href\"))}}})),l.extent=null==(s=x)?void 0:s.toJSON(),l.dimensions=f(\"Dimension\",e).filter((e=>e.getAttribute(\"name\")&&e.getAttribute(\"units\")&&e.textContent)).map((e=>{const t=e.getAttribute(\"name\"),n=e.getAttribute(\"units\"),r=e.textContent,i=e.getAttribute(\"unitSymbol\"),a=e.getAttribute(\"default\"),s=\"0\"!==c(\"default\",e,\"0\"),o=\"0\"!==c(\"nearestValue\",e,\"0\"),l=\"0\"!==c(\"current\",e,\"0\");if(/^time$/i.test(t)&&/^ISO8601$/i.test(n)){return{name:\"time\",units:\"ISO8601\",extent:F(r),default:F(a),multipleValues:s,nearestValue:o,current:l}}if(/^elevation$/i.test(t)){return{name:\"elevation\",units:n,extent:I(r),unitSymbol:i,default:I(a),multipleValues:s,nearestValue:o}}return{name:t,units:n,extent:L(r),unitSymbol:i,default:L(a),multipleValues:s,nearestValue:o}})),l}function b(e){return e.nodeType===Node.ELEMENT_NODE}function y(e){return void 0!==e.min&&void 0!==e.max}function A(e){return\"elevation\"===e.name}function E(e){return\"time\"!==e.name&&\"elevation\"!==e.name}function S(e){return\"time\"===e.name}function I(e){if(!e)return null;const t=-1!==e.indexOf(\"/\"),n=e.split(\",\");return t?n.map((e=>{const t=e.split(\"/\");if(t.length<2)return null;return{min:parseFloat(t[0]),max:parseFloat(t[1]),resolution:t.length>=3&&\"0\"!==t[2]?parseFloat(t[2]):void 0}})).filter((e=>e)):n.map((e=>parseFloat(e)))}function L(e){if(!e)return null;const t=-1!==e.indexOf(\"/\"),n=e.split(\",\");return t?n.map((e=>{const t=e.split(\"/\");if(t.length<2)return null;return{min:t[0],max:t[1],resolution:t.length>=3&&\"0\"!==t[2]?t[2]:void 0}})).filter((e=>e)):n}function F(e){if(!e)return null;const t=-1!==e.indexOf(\"/\"),n=e.split(\",\");return t?n.map((e=>{const t=e.split(\"/\");if(t.length<2)return null;return{min:new Date(t[0]),max:new Date(t[1]),resolution:t.length>=3&&\"0\"!==t[2]?M(t[2]):void 0}})).filter((e=>e)):n.map((e=>new Date(e)))}function M(e){const t=e.match(/(?:p(\\d+y|\\d+(?:.|,)\\d+y)?(\\d+m|\\d+(?:.|,)\\d+m)?(\\d+d|\\d+(?:.|,)\\d+d)?)?(?:t(\\d+h|\\d+(?:.|,)\\d+h)?(\\d+m|\\d+(?:.|,)\\d+m)?(\\d+s|\\d+(?:.|,)\\d+s)?)?/i);if(!t)return null;return{years:O(t[1]),months:O(t[2]),days:O(t[3]),hours:O(t[4]),minutes:O(t[5]),seconds:O(t[6])}}function O(e){if(!e)return 0;const t=e.match(/(?:\\d+(?:.|,)\\d+|\\d+)/);if(!t)return 0;const n=t[0].replace(\",\",\".\");return Number(n)}function w(e){return e.toISOString().replace(/\\.[0-9]{3}/,\"\")}export{o as coordsReversed,M as fromISODuration,l as getPopupLayers,y as isDimensionInterval,A as isElevationDimension,E as isGenericDimension,S as isTimeDimension,s as parseCapabilities,w as toISOString};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import r from\"../../core/Accessor.js\";import a from\"../../core/Handles.js\";import{combinedViewLayerTimeExtentProperty as l}from\"./commonProperties.js\";import{coordsReversed as i}from\"./wmsUtils.js\";const o={visible:\"visibleSublayers\"},n=[102100,3857,102113,900913],p=[3395,54004];let c=class extends r{constructor(){super(...arguments),this._layerHandles=new a,this.extent=null,this._scale=null,this.view=null}set layer(e){this._get(\"layer\")!==e&&(this._set(\"layer\",e),this._layerHandles&&(this._layerHandles.removeAll(),this._layerHandles=null),e&&(this._layerHandles||(this._layerHandles=new a),this._layerHandles.add([e.sublayers.on(\"change\",(()=>this.notifyChange(\"visibleSublayers\"))),e.on(\"wms-sublayer-update\",(e=>this.notifyChange(o[e.propertyName])))])))}get layers(){const{visibleSublayers:e}=this;return e.filter((e=>e.name)).map((e=>e.name)).join(\",\")}get scale(){return null!=this._scale?this._scale:this.view&&this.view.scale||0}set scale(e){this.view||(this._scale=e,this.notifyChange(\"scale\"))}get version(){return(this._get(\"version\")||0)+1}get visibleSublayers(){const{layer:e,scale:s}=this,{sublayers:t}=e,r=[],a=e=>{const{minScale:t,maxScale:l,sublayers:i,visible:o}=e;o&&(0===s||(0===t||s<=t)&&(0===l||s>=l))&&(i?i.forEach(a):r.unshift(e))};return null==t||t.forEach(a),r}get wkid(){const{extent:e,layer:s}=this,t=s.spatialReferences;let r=e.spatialReference&&e.spatialReference.wkid;t&&-1===t.indexOf(r)&&e.spatialReference.latestWkid&&(r=e.spatialReference.latestWkid);const a=n.some((e=>e===r));if(!t)return r;if(a){const e=[];t.forEach((s=>{n.indexOf(s)>-1&&e.push(s)})),e.length||t.forEach((s=>{p.indexOf(s)>-1&&e.push(s)})),r=e.length>0?e[0]:n[0]}return r}toJSON(){const{extent:e,layer:s,layers:t}=this,{imageFormat:r,imageTransparency:a,spatialReferences:l,version:o}=s;let{wkid:n}=this;l&&-1===l.indexOf(n)&&e.spatialReference.latestWkid&&(n=e.spatialReference.latestWkid);const{xmin:p,ymin:c,xmax:y,ymax:u}=e,m={bbox:\"1.3.0\"===s.version&&i(n)?`${c},${p},${u},${y}`:`${p},${c},${y},${u}`,format:r,request:\"GetMap\",service:\"WMS\",styles:\"\",transparent:a,version:o};return isNaN(n)||(\"1.3.0\"===o?m.crs=\"EPSG:\"+n:m.srs=\"EPSG:\"+n),{...m,layers:t}}};e([s()],c.prototype,\"extent\",void 0),e([s()],c.prototype,\"layer\",null),e([s({readOnly:!0,dependsOn:[\"visibleSublayers\"]})],c.prototype,\"layers\",null),e([s({type:Number,dependsOn:[\"view.scale\"]})],c.prototype,\"scale\",null),e([s(l)],c.prototype,\"timeExtent\",void 0),e([s({type:Number,dependsOn:[\"layers\",\"layer.imageTransparency\",\"timeExtent\"],readOnly:!0})],c.prototype,\"version\",null),e([s()],c.prototype,\"view\",void 0),e([s({readOnly:!0,dependsOn:[\"layer.sublayers\",\"scale\"]})],c.prototype,\"visibleSublayers\",null),e([s({autoTracked:!1})],c.prototype,\"wkid\",null),c=e([t(\"esri.layers.support.ExportWMSImageParameters\")],c);var y=c;export default y;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{reject as s,resolve as p}from\"../../core/promiseUtils.js\";const i=i=>{let c=class extends i{async fetchPopupFeatures(e){const{layer:r}=this;if(!e)return s(new o(\"wmslayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:r}));const{popupEnabled:t}=r;if(!t)return s(new o(\"wmslayerview:fetchPopupFeatures\",\"popupEnabled should be true\",{popupEnabled:t}));const i=this.createFetchPopupFeaturesQuery(e),{extent:c,width:u,height:a,x:n,y:h}=i;if(!(c&&u&&a))throw new o(\"wmslayerview:fetchPopupFeatures\",\"WMSLayer does not support fetching features.\",{extent:c,width:u,height:a});const m=r.fetchFeatureInfo(c,u,a,n,h);return m?m.then((e=>[e])):p([])}};return e([r()],c.prototype,\"layer\",void 0),c=e([t(\"esri.layers.mixins.WMSLayerView\")],c),c};export{i as WMSLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import t from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../core/Error.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{reject as a,isAbortError as o}from\"../../../core/promiseUtils.js\";import p from\"../../../geometry/Extent.js\";import{RefreshableLayerView as m}from\"../../layers/RefreshableLayerView.js\";import n from\"../../../layers/support/ExportWMSImageParameters.js\";import h from\"../../layers/LayerView.js\";import{WMSLayerView as d}from\"../../layers/WMSLayerView.js\";import{BitmapContainer as l}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as c}from\"./LayerView2D.js\";import u from\"./support/ExportStrategy.js\";const y=t.getLogger(\"esri.views.2d.layers.WMSLayerView2D\");let g=class extends(d(m(c(h)))){initialize(){const{layer:e,view:t}=this;e.supportsSpatialReference(t.spatialReference)||this.addResolvingPromise(a(new s(\"layerview:spatial-reference-incompatible\",\"The spatial references supported by this WMS layer are incompatible with the spatial reference of the view\",{layer:e})))}hitTest(){return null}update(e){this.strategy.update(e).catch((e=>{o(e)||y.error(e)}))}attach(){const{layer:e,view:t}=this,{imageMaxHeight:r,imageMaxWidth:i}=e;this._bitmapContainer=new l,this.container.addChild(this._bitmapContainer),this.strategy=new u({container:this._bitmapContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxHeight:r,imageMaxWidth:i,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1}),this._exportWMSImageParameters=new n({layer:e,view:t}),this.handles.add(this._exportWMSImageParameters.watch(\"version\",(e=>{this._exportImageVersion!==e&&(this._exportImageVersion=e,this.requestUpdate())})),\"wms\")}detach(){this.handles.remove(\"wms\"),this.strategy.destroy(),this._exportWMSImageParameters.layer=null,this._exportWMSImageParameters.destroy(),this._exportWMSImageParameters=null,this.container.removeChild(this._bitmapContainer),this._bitmapContainer.removeAllChildren()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}createFetchPopupFeaturesQuery(e){const{view:t}=this,r=this._bitmapContainer,{x:i,y:s}=e,{spatialReference:a}=t;let o=null,m=0,n=0;r.children.some((e=>{const{width:t,height:r,resolution:h,x:d,y:l}=e,c=d+h*t,u=l-h*r;return i>=d&&i<=c&&s<=l&&s>=u&&(o=new p({xmin:d,ymin:u,xmax:c,ymax:l,spatialReference:a}),m=t,n=r,!0)}));const h=o.width/m,d=Math.round((i-o.xmin)/h),l=Math.round((o.ymax-s)/h);return{extent:o,width:m,height:n,x:d,y:l}}async doRefresh(){this.requestUpdate()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(e,t,r,i){return this.layer.fetchImage(e,t,r,{timeExtent:this._exportWMSImageParameters.timeExtent,timestamp:this.refreshTimestamp,...i})}};e([r()],g.prototype,\"strategy\",void 0),e([r({dependsOn:[\"strategy.updating\"]})],g.prototype,\"updating\",void 0),g=e([i(\"esri.views.2d.layers.WMSLayerView2D\")],g);var f=g;export default f;\n"],"sourceRoot":""}