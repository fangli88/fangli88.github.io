{"version":3,"sources":["../node_modules/@arcgis/core/geometry/support/meshUtils/deduplicate.js","../node_modules/@arcgis/core/views/3d/support/buffer/glUtil.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/bufferLayouts.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/edgeBufferWriters.js","../node_modules/@arcgis/core/views/3d/support/buffer/workerHelper.js","../node_modules/@arcgis/core/views/3d/support/meshProcessing.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/edgePreprocessing.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker.js"],"names":["n","f","i","u","byteLength","c","Uint32Array","s","a","minReduction","h","originalIndices","g","componentOffsets","y","t","length","U","Math","floor","o","w","A","m","b","d","p","ceil","M","q","sqrt","r","l","e","x","buffer","indices","uniqueCount","divisor","stride","fieldNames","filter","fields","get","optional","glPadding","map","constructor","ElementCount","Error","ElementType","offset","glNormalized","name","count","type","normalized","u8","u16","u32","i8","i16","i32","f32","vec3f","vec2u8","clone","updateSettings","this","settings","write","position0","position1","seed","getIntRange","variants","getFloat","pow","abs","min","max","setVec","componentIndex","set","variantOffset","variantStroke","variantExtension","trim","slice","Float32Array","commonWriter","allocate","createBuffer","faceNormal0","faceNormal1","normal","Layout","glLayout","normalA","normalB","z","push","layout","F","Array","forEach","J","H","E","N","j","v","V","$","B","C","I","L","T","_","k","K","Map","Int32Array","cosAngle","fwd","ortho","edge","v0","v1","v2","anglePlanar","angleSignificantEdge","async","data","createView","dataBuffer","originalIndicesType","originalIndicesBuffer","Uint16Array","writerSettings","skipDeduplicate","result","regular","lodInfo","lengths","silhouette","instancesData","averageEdgeLength","transferList","faces","neighbors","vertices","position","cos","D","getVec","P","S","G","sort","O","Q","reverse","R"],"mappings":"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","file":"static/js/163.0dd8f4e2.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{nextHighestPowerOfTwo as t}from\"../../../core/mathUtils.js\";function n(n,f,i){const u=n.byteLength/(4*f),c=new Uint32Array(n,0,u*f);let s=new Uint32Array(u);const a=i&&i.minReduction||0,h=i&&i.originalIndices||null,g=i&&i.componentOffsets||null;let y=0;if(g)for(let t=0;t<g.length-1;t++){const n=g[t+1]-g[t];n>y&&(y=n)}else y=u;const U=Math.floor(1.1*y)+1;(null==o||o.length<2*U)&&(o=new Uint32Array(t(2*U)));for(let t=0;t<2*U;t++)o[t]=0;let w=0;const A=!!g&&!!h,m=A?h.length:u,b=A?new Uint32Array(h.length):null,d=1.96;let p=0!==a?Math.ceil(4*d*d/(a*a)*a*(1-a)):m,M=1,q=g?g[1]:m;for(let t=0;t<m;t++){if(t===p){const n=1-w/t;if(n+d*Math.sqrt(n*(1-n)/t)<a)return null;p*=2}if(t===q){for(let t=0;t<2*U;t++)o[t]=0;if(h)for(let t=g[M-1];t<g[M];t++)b[t]=s[h[t]];q=g[++M]}const n=A?h[t]:t,r=n*f,i=l(c,r,f);let u=i%U,y=w;for(;0!==o[2*u+1];){if(o[2*u]===i){const t=o[2*u+1]-1;if(e(c,r,t*f,f)){y=s[t];break}}u++,u>=U&&(u-=U)}y===w&&(o[2*u]=i,o[2*u+1]=n+1,w++),s[n]=y}if(0!==a&&1-w/u<a)return null;if(A){for(let t=g[M-1];t<b.length;t++)b[t]=s[h[t]];s=b}const x=new Uint32Array(f*w);w=0;for(let t=0;t<m;t++)if(s[t]===w){r(c,(A?h[t]:t)*f,x,w*f,f),w++}if(h&&!A){const t=new Uint32Array(h.length);for(let n=0;n<t.length;n++)t[n]=s[h[n]];s=t}return{buffer:x.buffer,indices:s,uniqueCount:w}}function e(t,n,e,r){for(let l=0;l<r;l++)if(t[n+l]!==t[e+l])return!1;return!0}function r(t,n,e,r,l){for(let o=0;o<l;o++)e[r+o]=t[n+o]}function l(t,n,e){let r=0;for(let l=0;l<e;l++)r=t[n+l]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let o=null;export default n;export{n as deduplicate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst t={divisor:0};function o(o,n={}){n={...t,...n};const r=o.stride;return o.fieldNames.filter((t=>{const e=o.fields.get(t).optional;return!(e&&e.glPadding)})).map((t=>{const i=o.fields.get(t),s=i.constructor.ElementCount,u=function(t){const o=e[t];if(o)return o;throw new Error(\"BufferType not supported in WebGL\")}(i.constructor.ElementType),f=i.offset,c=!(!i.optional||!i.optional.glNormalized);return{name:t,stride:r,count:s,type:u,offset:f,normalized:c,divisor:n.divisor}}))}const e={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126};export{o as glLayout};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{glLayout as n}from\"../../../support/buffer/glUtil.js\";import{newLayout as o}from\"../../../support/buffer/InterleavedLayout.js\";const e=o().vec3f(\"position\").u16(\"componentIndex\").u16(\"_padding\"),i=o().vec2u8(\"sideness\"),t=n(i),a=o().vec3f(\"position0\").vec3f(\"position1\").u16(\"componentIndex\").u8(\"variantOffset\",{glNormalized:!0}).u8(\"variantStroke\").u8(\"variantExtension\",{glNormalized:!0}).u8(\"_padding\",{glPadding:!0}).u16(\"_padding2\",{glPadding:!0}),r=a.clone().vec3f(\"normal\"),s=a.clone().vec3f(\"normalA\").vec3f(\"normalB\"),d={position0:0,position1:1,componentIndex:2,variantOffset:4,variantStroke:5,variantExtension:6,normal:7,normalA:7,normalB:8,sideness:9};export{a as CommonInstancesLayout,e as EdgeInputBufferLayout,d as EdgeShaderAttributeLocations,r as RegularEdgeInstancesLayout,s as SilhouetteEdgeInstancesLayout,i as VertexLayout,t as glVertexLayout};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/RandomLCG.js\";import{c as o}from\"../../../../../chunks/vec3f64.js\";import{b as e,n as r}from\"../../../../../chunks/vec3.js\";import{glLayout as n}from\"../../../support/buffer/glUtil.js\";import{RegularEdgeInstancesLayout as i,SilhouetteEdgeInstancesLayout as s}from\"./bufferLayouts.js\";class a{updateSettings(t){this.settings=t}write(t,o,e){const r=function(t){const o=c;o[0]=t.position0[0],o[1]=t.position0[1],o[2]=t.position0[2],o[3]=t.position1[0],o[4]=t.position1[1],o[5]=t.position1[2],u[0]=5381;for(let t=0;t<m.length;t++)u[0]=31*u[0]+m[t];return u[0]}(e);p.seed=r;const n=p.getIntRange(0,255),i=p.getIntRange(0,this.settings.variants-1),s=p.getFloat(),a=255*(.5*function(t,o){const e=t<0?-1:1;return Math.pow(Math.abs(t),o)*e}(-(1-Math.min(s/.7,1))+Math.max(0,s-.7)/(1-.7),1.2)+.5);t.position0.setVec(o,e.position0),t.position1.setVec(o,e.position1),t.componentIndex.set(o,e.componentIndex),t.variantOffset.set(o,n),t.variantStroke.set(o,i),t.variantExtension.set(o,a)}trim(t,o){return t.slice(0,o)}}const c=new Float32Array(6),m=new Uint32Array(c.buffer),u=new Uint32Array(1);const p=new t;class f{constructor(){this.commonWriter=new a}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return i.createBuffer(t)}write(t,o,n){this.commonWriter.write(t,o,n),e(h,n.faceNormal0,n.faceNormal1),r(h,h),t.normal.setVec(o,h)}trim(t,o){return this.commonWriter.trim(t,o)}}f.Layout=i,f.glLayout=n(i,{divisor:1});class l{constructor(){this.commonWriter=new a}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return s.createBuffer(t)}write(t,o,e){this.commonWriter.write(t,o,e),t.normalA.setVec(o,e.faceNormal0),t.normalB.setVec(o,e.faceNormal1)}trim(t,o){return this.commonWriter.trim(t,o)}}l.Layout=s,l.glLayout=n(s,{divisor:1});const h=o();export{a as CommonBufferWriter,f as RegularEdgeBufferWriter,l as SilhouetteEdgeBufferWriter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{BufferViewFloat as e,BufferViewVec2f as t,BufferViewVec3f as r,BufferViewVec4f as n,BufferViewMat3f as o,BufferViewMat4f as f,BufferViewFloat64 as s,BufferViewVec2f64 as u,BufferViewVec3f64 as c,BufferViewVec4f64 as i,BufferViewMat3f64 as a,BufferViewMat4f64 as l,BufferViewUint8 as d,BufferViewVec2u8 as m,BufferViewVec3u8 as p,BufferViewVec4u8 as y,BufferViewUint16 as h,BufferViewVec2u16 as E,BufferViewVec3u16 as b,BufferViewVec4u16 as w,BufferViewUint32 as N,BufferViewVec2u32 as j,BufferViewVec3u32 as v,BufferViewVec4u32 as V,BufferViewInt8 as $,BufferViewVec2i8 as g,BufferViewVec3i8 as x,BufferViewVec4i8 as A,BufferViewInt16 as B,BufferViewVec2i16 as C,BufferViewVec3i16 as I,BufferViewVec4i16 as L,BufferViewInt32 as M,BufferViewVec2i32 as T,BufferViewVec3i32 as _,BufferViewVec4i32 as k}from\"./BufferView.js\";import{newLayout as q}from\"./InterleavedLayout.js\";function z(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:F(e.layout)}}function D(e){return G(e.layout).createView(e.buffer)}function F(e){const t=new Array;return e.fields.forEach(((e,r)=>{const n={...e,constructor:J(e.constructor)};t.push([r,n])})),{stride:e.stride,fields:t,fieldNames:e.fieldNames}}function G(e){const t=q();return t.stride=e.stride,t.fieldNames=e.fieldNames,e.fields.forEach((e=>{return t.fields.set(e[0],{...e[1],constructor:(r=e[1].constructor,K.get(r))});var r})),t}const H=[e,t,r,n,o,f,s,u,c,i,a,l,d,m,p,y,h,E,b,w,N,j,v,V,$,g,x,A,B,C,I,L,M,T,_,k];function J(e){return`${e.ElementType}_${e.ElementCount}`}const K=new Map;H.forEach((e=>K.set(J(e),e)));export{z as packInterleavedBuffer,F as packLayout,D as unpackInterleavedBuffer,G as unpackLayout};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction t(t,n){const o=t.length/3,r=new Uint32Array(n+1),e=new Uint32Array(n+1),c=(t,n)=>{t<n?r[t+1]++:e[n+1]++};for(let n=0;n<o;n++){const o=t[3*n],r=t[3*n+1],e=t[3*n+2];c(o,r),c(r,e),c(e,o)}let s=0,f=0;for(let t=0;t<n;t++){const n=r[t+1],o=e[t+1];r[t+1]=s,e[t+1]=f,s+=n,f+=o}const l=new Uint32Array(6*o),i=r[n],a=(t,n,o)=>{if(t<n){const e=r[t+1]++;l[2*e]=n,l[2*e+1]=o}else{const r=e[n+1]++;l[2*i+2*r]=t,l[2*i+2*r+1]=o}};for(let n=0;n<o;n++){const o=t[3*n],r=t[3*n+1],e=t[3*n+2];a(o,r,n),a(r,e,n),a(e,o,n)}const w=(t,n)=>{const o=2*t,r=n-t;for(let t=1;t<r;t++){const n=l[o+2*t],r=l[o+2*t+1];let e=t-1;for(;e>=0&&l[o+2*e]>n;e--)l[o+2*e+2]=l[o+2*e],l[o+2*e+3]=l[o+2*e+1];l[o+2*e+2]=n,l[o+2*e+3]=r}};for(let t=0;t<n;t++)w(r[t],r[t+1]),w(i+e[t],i+e[t+1]);const y=new Int32Array(3*o),A=(n,o)=>n===t[3*o]?0:n===t[3*o+1]?1:n===t[3*o+2]?2:-1,U=(t,n)=>{const o=A(t,n);y[3*n+o]=-1},u=(t,n,o,r)=>{const e=A(t,n);y[3*n+e]=r;const c=A(o,r);y[3*r+c]=n};for(let t=0;t<n;t++){let n=r[t];const o=r[t+1];let c=e[t];const s=e[t+1];for(;n<o&&c<s;){const o=l[2*n],r=l[2*i+2*c];o===r?(u(t,l[2*n+1],r,l[2*i+2*c+1]),n++,c++):o<r?(U(t,l[2*n+1]),n++):(U(r,l[2*i+2*c+1]),c++)}for(;n<o;)U(t,l[2*n+1]),n++;for(;c<s;){U(l[2*i+2*c],l[2*i+2*c+1]),c++}}return y}export{t as computeNeighbors};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{forEach as e}from\"../../../../../core/typedArrayUtil.js\";import{range as t}from\"../../../../../core/arrayUtils.js\";import{deg2rad as o,acosClamped as n}from\"../../../../../core/mathUtils.js\";import{c as r}from\"../../../../../chunks/vec3f64.js\";import{k as s,s as c,g as a,d as i,c as l,f as g,n as f}from\"../../../../../chunks/vec3.js\";import{directionFromTo as m}from\"../../../support/mathUtils.js\";function p(n,r,m,p=w){const y=n.vertices.position,I=n.vertices.componentIndex,V=o(p.anglePlanar),j=o(p.angleSignificantEdge),N=Math.cos(j),x=Math.cos(V),F=A.edge,U=F.position0,k=F.position1,E=F.faceNormal0,D=F.faceNormal1,M=function(e){const t=e.faces.length/3,o=e.vertices.position,n=e.faces,r=v.v0,s=v.v1,c=v.v2,a=new Float32Array(3*t);for(let e=0;e<t;e++){const t=n[3*e+0],i=n[3*e+1],m=n[3*e+2];o.getVec(t,r),o.getVec(i,s),o.getVec(m,c),g(s,s,r),g(c,c,r),l(r,s,c),f(r,r),a[3*e+0]=r[0],a[3*e+1]=r[1],a[3*e+2]=r[2]}return a}(n),P=function(e){const t=e.faces.length/3,o=e.faces,n=e.neighbors;let r=0;for(let e=0;e<t;e++){const t=n[3*e+0],s=n[3*e+1],c=n[3*e+2],a=o[3*e+0],i=o[3*e+1],l=o[3*e+2];r+=-1===t||a<i?1:0,r+=-1===s||i<l?1:0,r+=-1===c||l<a?1:0}const s=new Int32Array(4*r);let c=0;for(let e=0;e<t;e++){const t=n[3*e+0],r=n[3*e+1],a=n[3*e+2],i=o[3*e+0],l=o[3*e+1],g=o[3*e+2];(-1===t||i<l)&&(s[c++]=i,s[c++]=l,s[c++]=e,s[c++]=t),(-1===r||l<g)&&(s[c++]=l,s[c++]=g,s[c++]=e,s[c++]=r),(-1===a||g<i)&&(s[c++]=g,s[c++]=i,s[c++]=e,s[c++]=a)}return s}(n),S=P.length/4,b=r.allocate(S);let L=0;const q=S,z=m.allocate(q);let B=0,C=0,G=0;const H=t(0,S),J=new Float32Array(S);e(J,((e,t,o)=>{y.getVec(P[4*t+0],U),y.getVec(P[4*t+1],k),o[t]=s(U,k)})),H.sort(((e,t)=>J[t]-J[e]));const K=new Array,O=new Array;for(let e=0;e<S;e++){const t=H[e],o=J[t],n=P[4*t+0],s=P[4*t+1],l=P[4*t+2],g=P[4*t+3],f=-1===g;if(y.getVec(n,U),y.getVec(s,k),f)c(E,M[3*l+0],M[3*l+1],M[3*l+2]),a(D,E),F.componentIndex=I.get(n),F.cosAngle=i(E,D);else{if(c(E,M[3*l+0],M[3*l+1],M[3*l+2]),c(D,M[3*g+0],M[3*g+1],M[3*g+2]),F.componentIndex=I.get(n),F.cosAngle=i(E,D),h(F,x))continue;F.cosAngle<-.9999&&a(D,E)}C+=o,G++,f||u(F,N)?(r.write(b,L++,F),K.push(o)):d(F,V)&&(m.write(z,B++,F),O.push(o))}const Q=new Float32Array(K.reverse()),R=new Float32Array(O.reverse());return{regular:{instancesData:r.trim(b,L),lodInfo:{lengths:Q}},silhouette:{instancesData:m.trim(z,B),lodInfo:{lengths:R}},averageEdgeLength:C/G}}function u(e,t){return e.cosAngle<t}function h(e,t){return e.cosAngle>t}function d(e,t){const o=n(e.cosAngle),r=A.fwd,s=A.ortho;m(r,e.position1,e.position0);return o*(i(l(s,e.faceNormal0,e.faceNormal1),r)>0?-1:1)>t}const A={edge:{position0:r(),position1:r(),faceNormal0:r(),faceNormal1:r(),componentIndex:0,cosAngle:0},ortho:r(),fwd:r()},v={v0:r(),v1:r(),v2:r()},w={anglePlanar:4,angleSignificantEdge:35};export{p as extractEdges};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{deduplicate as e}from\"../../../../../geometry/support/meshUtils/deduplicate.js\";import{EdgeInputBufferLayout as r}from\"./bufferLayouts.js\";import{RegularEdgeBufferWriter as t,SilhouetteEdgeBufferWriter as n}from\"./edgeBufferWriters.js\";import{packInterleavedBuffer as i}from\"../../../support/buffer/workerHelper.js\";import{computeNeighbors as s}from\"../../../support/meshProcessing.js\";import{extractEdges as o}from\"./edgePreprocessing.js\";async function a(e){const t=function(e){return{data:r.createView(e.dataBuffer),originalIndices:\"Uint32Array\"===e.originalIndicesType?new Uint32Array(e.originalIndicesBuffer):\"Uint16Array\"===e.originalIndicesType?new Uint16Array(e.originalIndicesBuffer):void 0,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}(e),n=u(t),s=[t.data.buffer];return{result:function(e,r){r.push(e.regular.lodInfo.lengths.buffer),r.push(e.silhouette.lodInfo.lengths.buffer);return{regular:{instancesData:i(e.regular.instancesData,r),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:i(e.silhouette.instancesData,r),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}}(n,s),transferList:s}}function u(t){const n=function(t,n,i){if(n&&i){return{faces:i,neighbors:s(i,t.count),vertices:t}}{const n=e(t.buffer,t.stride/4,{originalIndices:i}),o=s(n.indices,n.uniqueCount);return{faces:n.indices,neighbors:o,vertices:r.createView(n.buffer)}}}(t.data,t.skipDeduplicate,t.originalIndices);return f.updateSettings(t.writerSettings),c.updateSettings(t.writerSettings),o(n,f,c)}const f=new t,c=new n;export{u as work,a as wrappedWork};\n"],"sourceRoot":""}