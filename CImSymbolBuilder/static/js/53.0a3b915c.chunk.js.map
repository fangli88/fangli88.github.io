{"version":3,"sources":["../node_modules/@arcgis/core/views/2d/engine/webgl/TiledDisplayObject.js","../node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js","../node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js","../node_modules/@arcgis/core/views/2d/engine/Bitmap.js","../node_modules/@arcgis/core/views/2d/engine/BitmapTile.js","../node_modules/@arcgis/core/views/2d/engine/BitmapTileContainer.js","../node_modules/@arcgis/core/renderers/support/heatmapUtils.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/BaseTileRenderer.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/support/HeatmapSource.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/HeatmapTileRenderer.js"],"names":["r","e","constructor","s","t","super","this","triangleCountReportedInDebug","transforms","dvs","i","tileMat3","triangleCount","key","o","bounds","size","coordRange","destroy","texture","dispose","_coords","_bounds","setTransform","resolution","pixelRatio","n","h","toScreenNoRotation","coords","a","d","displayViewMat3","level","row","col","_tileInfoView","renderChildren","sortChildren","setStencilReference","createRenderParams","state","requiredLevel","getClosestInfoForScale","scale","displayLevel","tileInfo","scaleToZoom","prepareRenderPasses","registerRenderPass","name","brushes","drawPhase","DEBUG","MAP","target","getStencilTarget","children","has","updateTransforms","getTileResolution","stencilRef","pixelBlock","extent","originalPixelBlock","width","height","render","filter","l","getAsRGBA","createImageData","data","set","putImageData","getRenderedRasterPixels","renderedRasterPixels","Uint8Array","buffer","pixelFormat","internalFormat","dataType","wrapMode","c","u","requestRenderOnSourceChangedEnabled","_textureInvalidated","coordScale","_height","rotation","_source","_width","x","y","source","requestRender","bind","sourceWidth","sourceHeight","invalidateTexture","HTMLImageElement","naturalHeight","naturalWidth","beforeRender","updateTexture","Math","PI","setSamplingProfile","_texture","mips","descriptor","hasMipmap","generateMipmap","setSamplingMode","samplingMode","context","bindTexture","stage","resize","setData","document","createElement","getContext","ready","onAttach","onDetach","bitmap","once","afterRender","createTile","getTileBounds","destroyTile","map","doRender","visible","clearRect","createLinearGradient","ratio","color","colorStops","addColorStop","max","fillStyle","fillRect","getImageData","blurRadius","fieldOffset","field","f","Float64Array","round","m","Number","NEGATIVE_INFINITY","readAttribute","g","Set","getCursor","next","getObjectId","add","readLegacyPointGeometry","b","min","matrix","canvas","Uint8ClampedArray","Uint32Array","length","floor","exp","pow","sqrt","tiles","Map","clear","layer","layerView","tileInfoView","isUpdating","acquireTile","notifyChange","id","forceAttributeTextureUpload","forEachTile","forEach","releaseTile","delete","disposeTile","isReady","setHighlight","invalidateLabels","requestUpdate","prototype","gradient","intensities","minPixelIntensity","maxPixelIntensity","_intensityInfo","featuresView","attributeView","initialize","_container","getTileCoords","onConfigUpdate","renderer","type","_gradient","toJSON","hitTest","install","addChild","uninstall","removeAllChildren","removeChild","supportsRenderer","onTileData","get","tileKey","intensityInfo","onTileError","console","error","lockGPUUploads","unlockGPUUploads"],"mappings":"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","file":"static/js/53.0a3b915c.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{s,m as t}from\"../../../../chunks/mat3.js\";import o from\"../../tiling/TileKey.js\";import{c as i}from\"../../../../chunks/mat3f32.js\";import{DisplayObject as e}from\"../DisplayObject.js\";class r extends e{constructor(s,t,e,r=e){super(),this.triangleCountReportedInDebug=0,this.transforms={dvs:i(),tileMat3:i()},this.triangleCount=0,this.key=new o(s),this.bounds=t,this.size=e,this.coordRange=r}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}get coords(){return this._coords}get bounds(){return this._bounds}set bounds(s){this._coords=[s[0],s[3]],this._bounds=s}setTransform(o,i){const e=i/(o.resolution*o.pixelRatio),r=this.transforms.tileMat3,[n,h]=o.toScreenNoRotation([0,0],this.coords),a=this.size[0]/this.coordRange[0]*e,d=this.size[1]/this.coordRange[1]*e;s(r,a,0,0,0,d,0,n,h,1),t(this.transforms.dvs,o.displayViewMat3,r)}}export{r as TiledDisplayObject};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{WGLDrawPhase as e}from\"./enums.js\";import r from\"./brushes/WGLBrushInfo.js\";import s from\"./brushes/WGLBrushStencil.js\";import t from\"./WGLContainer.js\";const n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;export default class extends t{constructor(e){super(),this._tileInfoView=e}renderChildren(e){this.sortChildren(n),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:r}=e;return{...super.createRenderParams(e),requiredLevel:this._tileInfoView.getClosestInfoForScale(r.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(r.scale)}}prepareRenderPasses(t){const n=t.registerRenderPass({name:\"stencil\",brushes:[s],drawPhase:e.DEBUG|e.MAP,target:()=>this.getStencilTarget()}),i=t.registerRenderPass({name:\"tileInfo\",brushes:[r],drawPhase:e.DEBUG,target:()=>this.children,has:\"esri-tiles-debug\"});return[...super.prepareRenderPasses(t),n,i]}getStencilTarget(){return this.children}updateTransforms(e){for(const r of this.children){const s=this._tileInfoView.getTileResolution(r.key);r.setTransform(e,s)}}setStencilReference(){let e=1;for(const r of this.children)r.stencilRef=e++}}export{n as sortByLevel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nexport default class{constructor(e,t,i){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=i}get width(){return this.pixelBlock?this.pixelBlock.width:0}get height(){return this.pixelBlock?this.pixelBlock.height:0}render(e){const t=this.pixelBlock;if(!t)return;const i=this.filter({pixelBlock:t}),l=i.pixelBlock.getAsRGBA(),h=e.createImageData(i.pixelBlock.width,i.pixelBlock.height);h.data.set(l),e.putImageData(h,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport\"../../../core/has.js\";import{i as t,a as e,r as i,j as s,m as r}from\"../../../chunks/mat3.js\";import{c as h}from\"../../../chunks/mat3f32.js\";import{f as n}from\"../../../chunks/vec2f32.js\";import\"../../../chunks/builtins.js\";import o from\"../../webgl/Texture.js\";import\"../../webgl/FramebufferObject.js\";import\"../../webgl/RenderingContext.js\";import{DisplayObject as u}from\"./DisplayObject.js\";import a from\"./ImageryBitmapSource.js\";function d(t,e,i){const s={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return e&&i&&(s.width=e,s.height=i),new o(t,s)}class c extends u{constructor(t=null,e=!0){super(),this.requestRenderOnSourceChangedEnabled=e,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.transforms={dvs:h()},this.source=t,this.requestRender=this.requestRender.bind(this)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){this._source=t,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}setTransform(h){const o=t(this.transforms.dvs),[u,a]=h.toScreenNoRotation([0,0],this.x,this.y),d=this.resolution/this.pixelRatio/h.resolution,c=d*this.width,l=d*this.height,x=Math.PI*this.rotation/180;e(o,o,n(u,a)),e(o,o,n(c/2,l/2)),i(o,o,-x),e(o,o,n(-c/2,-l/2)),s(o,o,n(c,l)),r(this.transforms.dvs,h.displayViewMat3,o)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind({context:t},e){this._texture&&t.bindTexture(this._texture,e)}updateTexture({context:t}){var e;if(!this.stage)return null==(e=this._texture)||e.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this.source?this._texture=d(t,this.sourceWidth,this.sourceHeight):this._texture=d(t));const i=this.source;if(i){if(this._texture.resize(this.sourceWidth,this.sourceHeight),function(t){return t&&\"render\"in t}(i))if(i instanceof a){const t=i.getRenderedRasterPixels();this._texture.setData(t.renderedRasterPixels)}else this._texture.setData(function(t){const e=document.createElement(\"canvas\");return e.width=t.width,e.height=t.height,t.render(e.getContext(\"2d\")),e}(i));else(function(t){return t&&!(\"render\"in t)})(i)&&this._texture.setData(i);this.ready()}else this._texture.setData(null)}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}export{c as Bitmap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{TiledDisplayObject as e}from\"./webgl/TiledDisplayObject.js\";import{Bitmap as t}from\"./Bitmap.js\";class s extends e{constructor(e,s,r,i=null){super(e,s,r,r),this.bitmap=new t(i),this.bitmap.coordScale=r,this.bitmap.once(\"isReady\",(()=>this.ready()))}beforeRender(e){super.beforeRender(e),this.bitmap.beforeRender(e)}afterRender(e){super.afterRender(e),this.bitmap.afterRender(e)}set stencilRef(e){this.bitmap.stencilRef=e}get stencilRef(){return this.bitmap.stencilRef}setTransform(e,t){super.setTransform(e,t),this.bitmap.transforms.dvs=this.transforms.dvs}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap.stage=null}}export{s as BitmapTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{WGLDrawPhase as r}from\"./webgl/enums.js\";import{brushes as s}from\"./brushes.js\";import t from\"./webgl/TileContainer.js\";import{BitmapTile as i}from\"./BitmapTile.js\";class o extends t{createTile(r){const s=this._tileInfoView.getTileBounds(e(),r);return new i(r,s,this._tileInfoView.tileInfo.size)}destroyTile(){}prepareRenderPasses(e){const t=e.registerRenderPass({name:\"bitmap (tile)\",brushes:[s.bitmap],target:()=>this.children.map((e=>e.bitmap)),drawPhase:r.MAP});return[...super.prepareRenderPasses(e),t]}doRender(e){this.visible&&e.drawPhase===r.MAP&&super.doRender(e)}}export{o as BitmapTileContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport t from\"../../core/global.js\";import{clamp as e}from\"../../core/mathUtils.js\";const r=(()=>{if(!(\"document\"in t))return()=>null;const e=document.createElement(\"canvas\"),r=e.getContext(\"2d\");return e.height=512,e.width=1,t=>{r.clearRect(0,0,1,e.height);const n=r.createLinearGradient(0,0,0,e.height);for(const{ratio:e,color:r}of t.colorStops)n.addColorStop(Math.max(e,.001),`rgba(${r[0]}, ${r[1]}, ${r[2]}, ${r[3]})`);return r.fillStyle=n,r.fillRect(0,0,1,e.height),r.getImageData(0,0,1,e.height).data}})();function n(t,e,r,n){const{blurRadius:o,fieldOffset:a,field:f}=e,u=new Float64Array(r*n),l=i(o),s=Math.round(3*o);let h,m=Number.NEGATIVE_INFINITY;const d=c(f,a);for(const{geometry:e,attributes:o}of t){const t=e.x-s,a=e.y-s,f=Math.max(0,t),i=Math.max(0,a),c=Math.min(n,e.y+s),g=Math.min(r,e.x+s),y=+d(o);for(let e=i;e<c;e++){const n=l[e-a];for(let o=f;o<g;o++){const a=l[o-t];h=u[e*r+o]+=n*a*y,h>m&&(m=h)}}}return{matrix:u.buffer,max:m}}function o(t,e,r,n){const{blurRadius:o,fieldOffset:a,field:f}=e,c=new Float64Array(r*n),l=i(o),s=Math.round(3*o);let h,m=Number.NEGATIVE_INFINITY;const d=u(f,a),g=new Set;for(const e of t){const t=e.getCursor();for(;t.next();){const e=t.getObjectId();if(g.has(e))continue;g.add(e);const o=t.readLegacyPointGeometry(),a=+d(t),f=o.x-s,i=o.y-s,u=Math.max(0,f),y=Math.max(0,i),b=Math.min(n,o.y+s),x=Math.min(r,o.x+s);for(let t=y;t<b;t++){const e=l[t-i];for(let n=u;n<x;n++){const o=l[n-f];h=c[t*r+n]+=e*o*a,h>m&&(m=h)}}}}return{matrix:c.buffer,max:m}}function a(t,e,r,n,o,a){t.canvas.width=t.canvas.height=e,t.clearRect(0,0,e,e);const i=t.getImageData(0,0,e,e);r&&n&&i.data.set(new Uint8ClampedArray(f(e,r,n,o,a))),t.putImageData(i,0,0)}function f(t,r,n,o,a){const f=new Uint32Array(t*t),i=\"buffer\"in r?r:new Float64Array(r),c=\"buffer\"in n?new Uint32Array(n.buffer):new Uint32Array(new Uint8Array(n).buffer),u=c.length/(a-o);for(let t=0;t<i.length;t++){const r=i[t],n=Math.floor((r-o)*u);f[t]=c[e(n,0,c.length-1)]}return f.buffer}function i(t){const e=Math.round(3*t),r=2*t*t,n=new Float64Array(2*e+1);for(let o=0;o<=n.length;o++)n[o]=Math.exp(-Math.pow(o-e,2)/r)/Math.sqrt(2*Math.PI)*(t/2);return n}function c(t,e){return\"function\"==typeof t?t:t?\"string\"==typeof e?e=>-1*+e[t]:r=>+r[t]+e:()=>1}function u(t,e){return null!=t?\"string\"==typeof e?e=>-1*+e.readAttribute(t):r=>+r.readAttribute(t)+e:t=>1}export{n as calculateHeatmapIntensityInfo,o as calculateHeatmapIntensityInfoReaders,f as createHeatmapImageData,i as createKernel,c as createValueFunction,u as createValueFunctionCursor,a as drawHeatmap,r as generateGradient};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import{HandleOwner as s}from\"../../../../../core/HandleOwner.js\";let i=class extends s{constructor(e){super(e),this.tiles=new Map}destroy(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}get updating(){return this.isUpdating()}acquireTile(e){const t=this.createTile(e);return t.once(\"isReady\",(()=>this.notifyChange(\"updating\"))),this.tiles.set(e.id,t),t}forceAttributeTextureUpload(){}forEachTile(e){this.tiles.forEach(e)}releaseTile(e){this.tiles.delete(e.key.id),this.disposeTile(e)}isUpdating(){let e=!0;return this.tiles.forEach((t=>{e=e&&t.isReady})),!e}setHighlight(){}invalidateLabels(){}requestUpdate(){this.layerView.requestUpdate()}};e([t()],i.prototype,\"layer\",void 0),e([t()],i.prototype,\"layerView\",void 0),e([t()],i.prototype,\"tileInfoView\",void 0),e([t()],i.prototype,\"updating\",null),i=e([r(\"esri.views.2d.layers.features.tileRenderers.BaseTileRenderer\")],i);var o=i;export default o;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{drawHeatmap as t}from\"../../../../../../renderers/support/heatmapUtils.js\";class i{constructor(){this.gradient=null,this.height=512,this.width=512}render(i){t(i,512,this.intensities,this.gradient,this.minPixelIntensity,this.maxPixelIntensity)}}export{i as HeatmapSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import{resolve as i}from\"../../../../../core/promiseUtils.js\";import{generateGradient as r}from\"../../../../../renderers/support/heatmapUtils.js\";import{BitmapTileContainer as s}from\"../../../engine/BitmapTileContainer.js\";import n from\"./BaseTileRenderer.js\";import{HeatmapSource as o}from\"./support/HeatmapSource.js\";let a=class extends n{constructor(e){super(e),this._intensityInfo={minPixelIntensity:0,maxPixelIntensity:0},this.featuresView={attributeView:{initialize:()=>{},requestUpdate:()=>{}},requestRender:()=>{}},this._container=new s(e.tileInfoView)}createTile(e){const t=this._container.createTile(e);return this.tileInfoView.getTileCoords(t.bitmap,e),t.bitmap.resolution=this.tileInfoView.getTileResolution(e),t}onConfigUpdate(){const e=this.layer.renderer;if(\"heatmap\"===e.type){const{minPixelIntensity:t,maxPixelIntensity:i}=e;this._intensityInfo.minPixelIntensity=t,this._intensityInfo.maxPixelIntensity=i,this._gradient=r(e.toJSON()),this.tiles.forEach((e=>{const r=e.bitmap.source;r&&(r.minPixelIntensity=t,r.maxPixelIntensity=i,r.gradient=this._gradient,e.bitmap.invalidateTexture())}))}}hitTest(){return i([])}install(e){e.addChild(this._container)}uninstall(e){this._container.removeAllChildren(),e.removeChild(this._container)}disposeTile(e){this._container.removeChild(e),e.destroy()}supportsRenderer(e){return e&&\"heatmap\"===e.type}onTileData(e){const t=this.tiles.get(e.tileKey);if(!t)return;const i=e.intensityInfo,{minPixelIntensity:r,maxPixelIntensity:s}=this._intensityInfo,n=t.bitmap.source||new o;n.intensities=i&&i.matrix||null,n.minPixelIntensity=r,n.maxPixelIntensity=s,n.gradient=this._gradient,t.bitmap.source=n,this._container.addChild(t),this.requestUpdate()}onTileError(e){console.error(e)}lockGPUUploads(){}unlockGPUUploads(){}};a=e([t(\"esri.views.2d.layers.features.tileRenderers.HeatmapTileRenderer\")],a);var l=a;export default l;\n"],"sourceRoot":""}