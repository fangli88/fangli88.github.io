{"version":3,"sources":["../node_modules/@arcgis/core/portal/support/layersLoader.js","../node_modules/@arcgis/core/layers/support/lazyLayerLoader.js","../node_modules/@arcgis/core/portal/support/jsonContext.js"],"names":["async","s","n","u","instance","portalItem","id","load","t","r","supportedTypes","indexOf","type","e","expectedType","join","d","url","y","title","f","m","l","read","a","o","FeatureLayer","StreamLayer","SceneLayer","then","p","c","i","responseType","query","data","name","layers","map","tables","h","resourceReferences","paths","readResourcePaths","forEach","layerDefinition","push","filter","reverse","add","layerId","sublayerTitleMode","origin","portal","getDefault","showLegend","supportsData","fetchData","catch","length","BingMapsLayer","default","BuildingSceneLayer","CSVLayer","ElevationLayer","GroupLayer","GeoRSSLayer","ImageryLayer","ImageryTileLayer","IntegratedMeshLayer","KMLLayer","MapImageLayer","MapNotesLayer","OpenStreetMapLayer","PointCloudLayer","RouteLayer","TileLayer","UnknownLayer","UnsupportedLayer","VectorTileLayer","WebTileLayer","WMSLayer","WMTSLayer","itemUrl"],"mappings":"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","file":"static/js/74.eeae6a31.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{resolve as t}from\"../../core/promiseUtils.js\";import r from\"../../request.js\";import n from\"../Portal.js\";import{loadStyleRenderer as a}from\"../../renderers/support/styleUtils.js\";import{createForItem as l}from\"./jsonContext.js\";import{layerLookupMap as o}from\"../../layers/support/lazyLayerLoader.js\";async function s(n,s){const u=n.instance.portalItem;return u&&u.id?(await u.load(s),function(t){const r=t.instance.portalItem;if(-1===t.supportedTypes.indexOf(r.type))throw new e(\"portal:invalid-layer-item-type\",\"Invalid layer item type '${type}', expected '${expectedType}'\",{type:r.type,expectedType:t.supportedTypes.join(\", \")})}(n),async function(n,s){const u=n.instance,d=u.portalItem,{url:y,title:f}=d,m=l(d);if(\"group\"===u.type)return u.read({title:f},m),function(n,a){let l;const s=n.portalItem.type;switch(s){case\"Feature Service\":l=o.FeatureLayer;break;case\"Stream Service\":l=o.StreamLayer;break;case\"Scene Service\":l=o.SceneLayer;break;case\"Feature Collection\":l=o.FeatureLayer;break;default:throw new e(\"portal:unsupported-item-type-as-group\",`The item type '${s}' is not supported as a 'GroupLayer'`)}let u;return l().then((e=>(u=e,p(a)))).then((e=>c(e)>0?i(n,u,e):function(e,n){if(!e.portalItem.url)return t();const a={responseType:\"json\",query:{f:\"json\"}};return r(e.portalItem.url,a).then((t=>{var r,a;const l=t.data;function o(e){return{id:e.id,name:e.name}}l&&i(e,n,{layers:null==(r=l.layers)?void 0:r.map(o),tables:null==(a=l.tables)?void 0:a.map(o)})}))}(n,u)))}(u,n);y&&u.read({url:y},m);const h=await p(n,s);h&&u.read(h,m);return u.resourceReferences={portalItem:d,paths:m.readResourcePaths},u.read({title:f},m),a(u,m)}(n,s)):t()}function i(e,t,r){let n=r.layers||[];const a=r.tables||[];\"Feature Collection\"===e.portalItem.type&&(n.forEach((e=>{var t;\"Table\"===(null==e||null==(t=e.layerDefinition)?void 0:t.type)&&a.push(e)})),n=n.filter((e=>{var t;return\"Table\"!==(null==e||null==(t=e.layerDefinition)?void 0:t.type)}))),n.reverse().forEach((n=>{const a=u(e,t,r,n);e.add(a)})),a.reverse().forEach((n=>{const a=u(e,t,r,n);e.tables.add(a)}))}function u(e,t,r,a){const l=new t({portalItem:e.portalItem,layerId:a.id,sublayerTitleMode:\"service-name\"});if(\"Feature Collection\"===e.portalItem.type){const t={origin:\"portal-item\",portal:e.portalItem.portal||n.getDefault()};l.read(a,t);const o=r.showLegend;null!=o&&l.read({showLegend:o},t)}return l}function p(e,r){if(!1===e.supportsData)return t();const n=e.instance;return n.portalItem.fetchData(\"json\",r).catch((()=>null)).then((e=>{const t=e;let r;if(function(e){if(\"stream\"===e.type)return!1;return\"layerId\"in e}(n)){let a=!0;return e&&c(t)>0&&(null==n.layerId&&(n.layerId=function(e){const t=e.layers;if(t&&t.length)return t[0].id;const r=e.tables;if(r&&r.length)return r[0].id;return null}(t)),r=function(e,t){const r=e.layers;if(r)for(let e=0;e<r.length;e++)if(r[e].id===t)return r[e];const n=e.tables;if(n)for(let e=0;e<n.length;e++)if(n[e].id===t)return n[e];return null}(t,n.layerId),r&&(1===c(t)&&(a=!1),null!=e.showLegend&&(r.showLegend=e.showLegend))),a&&\"service-name\"!==n.sublayerTitleMode&&(n.sublayerTitleMode=\"item-title-and-service-name\"),r}return e}))}function c(e){var t,r,n,a;return(null!=(t=null==e||null==(r=e.layers)?void 0:r.length)?t:0)+(null!=(n=null==e||null==(a=e.tables)?void 0:a.length)?n:0)}export{s as load};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst a={BingMapsLayer:async()=>(await import(\"../BingMapsLayer.js\")).default,BuildingSceneLayer:async()=>(await import(\"../BuildingSceneLayer.js\")).default,CSVLayer:async()=>(await import(\"../CSVLayer.js\")).default,ElevationLayer:async()=>(await import(\"../ElevationLayer.js\")).default,FeatureLayer:async()=>(await import(\"../FeatureLayer.js\")).default,GroupLayer:async()=>(await import(\"../GroupLayer.js\")).default,GeoRSSLayer:async()=>(await import(\"../GeoRSSLayer.js\")).default,ImageryLayer:async()=>(await import(\"../ImageryLayer.js\")).default,ImageryTileLayer:async()=>(await import(\"../ImageryTileLayer.js\")).default,IntegratedMeshLayer:async()=>(await import(\"../IntegratedMeshLayer.js\")).default,KMLLayer:async()=>(await import(\"../KMLLayer.js\")).default,MapImageLayer:async()=>(await import(\"../MapImageLayer.js\")).default,MapNotesLayer:async()=>(await import(\"../MapNotesLayer.js\")).default,OpenStreetMapLayer:async()=>(await import(\"../OpenStreetMapLayer.js\")).default,PointCloudLayer:async()=>(await import(\"../PointCloudLayer.js\")).default,RouteLayer:async()=>(await import(\"../RouteLayer.js\")).default,SceneLayer:async()=>(await import(\"../SceneLayer.js\")).default,StreamLayer:async()=>(await import(\"../StreamLayer.js\")).default,TileLayer:async()=>(await import(\"../TileLayer.js\")).default,UnknownLayer:async()=>(await import(\"../UnknownLayer.js\")).default,UnsupportedLayer:async()=>(await import(\"../UnsupportedLayer.js\")).default,VectorTileLayer:async()=>(await import(\"../VectorTileLayer.js\")).default,WebTileLayer:async()=>(await import(\"../WebTileLayer.js\")).default,WMSLayer:async()=>(await import(\"../WMSLayer.js\")).default,WMTSLayer:async()=>(await import(\"../WMTSLayer.js\")).default};export{a as layerLookupMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{urlToObject as r}from\"../../core/urlUtils.js\";import t from\"../Portal.js\";function o(o){return{origin:\"portal-item\",url:r(o.itemUrl),portal:o.portal||t.getDefault(),portalItem:o,readResourcePaths:[]}}export{o as createForItem};\n"],"sourceRoot":""}